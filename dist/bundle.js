!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return h})),n.d(e,"__generator",(function(){return l})),n.d(e,"__createBinding",(function(){return f})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return d})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return y})),n.d(e,"__spreadArrays",(function(){return g})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return E})),n.d(e,"__makeTemplateObject",(function(){return I})),n.d(e,"__importStar",(function(){return _})),n.d(e,"__importDefault",(function(){return T})),n.d(e,"__classPrivateFieldGet",(function(){return A})),n.d(e,"__classPrivateFieldSet",(function(){return x}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function E(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function I(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function A(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function x(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(n(2));
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.default.registerVersion("firebase","7.19.1","app"),t.exports=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(0),s=n(3),a=n(5),u=n(6),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.ErrorFactory("app","Firebase",c),l=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Logger("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next()){var l=h.value;this._addComponent(l)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(s.contains(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=l[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.18.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!s.contains(e,t))throw h.create("no-app",{appName:t});return e[t]}function c(a){var u,c,l=a.name;if(n.has(l))return f.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?r[l]:null;if(n.set(l,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw h.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&s.deepExtend(p,a.serviceProps),r[l]=p,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,l);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=o.__values(Object.keys(e)),v=d.next();!v.done;v=d.next()){var y=v.value;e[y]._addComponent(a)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[l]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){s.deepExtend(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(s.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),g.apply(void 0,t)};var m=d;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.10",e),t.registerVersion("fire-js","")}(m),e.default=m,e.firebase=m},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,v.prototype.create),i}return r.__extends(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?y(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new d(i,a),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},t}();function y(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(t){return JSON.parse(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function I(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=i,e.Deferred=l,e.ErrorFactory=v,e.FirebaseError=d,e.Sha1=w,e.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return h(void 0,t)},e.deepExtend=h,e.errorPrefix=_,e.getUA=f,e.isAdmin=function(t){var e=b(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!==indexedDB},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=p,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(_(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(_(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(_(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(4))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),a=s[0],u=s[1],c=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService(c);u.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=a,e.Provider=s},function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return l})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return p}));var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){n(i[r])}}},function(t,e,n){(function(t,e){!function(n){"use strict";try{(function(){var r,i,o,s=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function u(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function c(t,e,n,r){return new(n=n||Promise)((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=y[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,f(["["+i+"]  "+t.name+":"],n))}}(o=i=i||{})[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var d={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},v=i.INFO,y=((r={})[i.DEBUG]="log",r[i.VERBOSE]="log",r[i.INFO]="info",r[i.WARN]="warn",r[i.ERROR]="error",r),g=(Object.defineProperty(m.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),m.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?d[t]:t},Object.defineProperty(m.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),m.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,i.DEBUG],t)),this._logHandler.apply(this,f([this,i.DEBUG],t))},m.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,i.VERBOSE],t)),this._logHandler.apply(this,f([this,i.VERBOSE],t))},m.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,i.INFO],t)),this._logHandler.apply(this,f([this,i.INFO],t))},m.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,i.WARN],t)),this._logHandler.apply(this,f([this,i.WARN],t))},m.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,i.ERROR],t)),this._logHandler.apply(this,f([this,i.ERROR],t))},m);function m(t){this.name=t,this._logLevel=v,this._logHandler=p,this._userLogHandler=null}function b(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w,E=(u(I,w=Error),I);function I(t,e){var n=w.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,_.prototype.create),n}var _=(T.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(A,(function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}))):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new E(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},T);function T(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var A=/\{\$([^}]+)}/g,x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function N(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var S,k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},O={},D=k||self;function L(){}function R(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function P(t){var e=R(t);return"array"==e||"object"==e&&"number"==typeof t.length}function C(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var V="closure_uid_"+(1e9*Math.random()>>>0),M=0;function U(t,e,n){return t.call.apply(t.bind,arguments)}function j(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function F(t,e,n){return(F=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?U:j).apply(null,arguments)}function z(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var q=Date.now;function B(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function G(){this.j=this.j,this.i=this.i}G.prototype.j=!1,G.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,V)&&t[V]||(t[V]=++M))},G.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var $=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function W(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Y(t){return/^[\s\xa0]*$/.test(t)}var X,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Z(t,e){return-1!=t.indexOf(e)}function J(t,e){return t<e?-1:e<t?1:0}t:{var tt=D.navigator;if(tt){var et=tt.userAgent;if(et){X=et;break t}}X=""}function nt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function rt(t){var e={};for(var n in t)e[n]=t[n];return e}var it="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<it.length;o++)n=it[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function st(t){return st[" "](t),t}st[" "]=L;var at,ut,ct=Z(X,"Opera"),ht=Z(X,"Trident")||Z(X,"MSIE"),lt=Z(X,"Edge"),ft=lt||ht,pt=Z(X,"Gecko")&&!(Z(X.toLowerCase(),"webkit")&&!Z(X,"Edge"))&&!(Z(X,"Trident")||Z(X,"MSIE"))&&!Z(X,"Edge"),dt=Z(X.toLowerCase(),"webkit")&&!Z(X,"Edge");function vt(){var t=D.document;return t?t.documentMode:void 0}t:{var yt="",gt=(ut=X,pt?/rv:([^\);]+)(\)|;)/.exec(ut):lt?/Edge\/([\d\.]+)/.exec(ut):ht?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ut):dt?/WebKit\/(\S+)/.exec(ut):ct?/(?:Version)[ \/]?(\S+)/.exec(ut):void 0);if(gt&&(yt=gt?gt[1]:""),ht){var mt=vt();if(null!=mt&&mt>parseFloat(yt)){at=String(mt);break t}}at=yt}var bt={};function wt(t){return e=t,n=function(){for(var e=0,n=Q(String(at)).split("."),r=Q(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=J(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||J(0==s[2].length,0==a[2].length)||J(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e},r=bt,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n();var e,n,r}var Et=D.document&&ht&&(vt()||parseInt(at,10))||void 0,It=!ht||9<=Number(Et),_t=ht&&!wt("9"),Tt=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{D.addEventListener("test",L,e),D.removeEventListener("test",L,e)}catch(t){}return t}();function At(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function xt(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(pt){t:{try{st(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Nt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}At.prototype.b=function(){this.defaultPrevented=!0},B(xt,At);var Nt={2:"touch",3:"pen",4:"mouse"};xt.prototype.b=function(){xt.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,_t)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var St="closure_listenable_"+(1e6*Math.random()|0),kt=0;function Ot(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++kt,this.Y=this.Z=!1}function Dt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Lt(t){this.src=t,this.a={},this.b=0}function Rt(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=$(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Dt(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Lt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Pt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ot(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ct="closure_lm_"+(1e6*Math.random()|0),Vt={};function Mt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=$t(r),e&&e[St]?e.wa(n,r,C(i)?!!i.capture:!!i,o):Ut(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mt(t,e[o],n,r,i);return null}return n=$t(n),t&&t[St]?t.va(e,n,C(r)?!!r.capture:!!r,i):Ut(t,e,n,!1,r,i)}function Ut(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=C(i)?!!i.capture:!!i;if(s&&!It)return null;var a,u,c=Bt(t);if(c||(t[Ct]=c=new Lt(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=qt,r=u=It?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Tt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ft(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function jt(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[St]?Rt(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ft(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bt(e))?(Rt(n,t),0==n.b&&(n.src=null,e[Ct]=null)):Dt(t)))}function Ft(t){return t in Vt?Vt[t]:Vt[t]="on"+t}function zt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&jt(t),n.call(r,e)}function qt(t,e){if(t.Y)return!0;if(It)return zt(t,new xt(e,this));if(!e)t:{e=["window","event"];for(var n=D,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return zt(t,e=new xt(e,this))}function Bt(t){return(t=t[Ct])instanceof Lt?t:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function $t(t){return"function"==R(t)?t:(t[Gt]||(t[Gt]=function(e){return t.handleEvent(e)}),t[Gt])}function Ht(){G.call(this),this.c=new Lt(this),(this.J=this).C=null}function Wt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Rt(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}B(Ht,G),Ht.prototype[St]=!0,(S=Ht.prototype).addEventListener=function(t,e,n,r){Mt(this,t,e,n,r)},S.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=C(i)?!!i.capture:!!i,r=$t(r),e&&e[St]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Pt(s=e.a[n],r,i,o))&&(Dt(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Bt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Pt(n,r,i,o)),(r=-1<e?n[e]:null)&&jt(r))}(this,t,e,n,r)},S.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new At(t,n):t instanceof At?t.target=t.target||n:(s=t,ot(t=new At(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=Wt(o,r,!0,t)&&s;if(s=Wt(o=t.a=n,r,!0,t)&&s,s=Wt(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=Wt(o=t.a=e[i],r,!1,t)&&s;return s},S.G=function(){if(Ht.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Dt(n[r]);delete e.a[t],e.b--}}this.C=null},S.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},S.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Kt=D.JSON.stringify;function Yt(){this.b=this.a=null}var Xt,Qt=(Zt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Zt((function(){return new Jt}),(function(t){t.reset()}),100));function Zt(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Jt(){this.next=this.b=this.a=null}function te(t,e){var n;Xt||(n=D.Promise.resolve(void 0),Xt=function(){n.then(re)}),ee||(Xt(),ee=!0),ne.add(t,e)}Yt.prototype.add=function(t,e){var n=Qt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Jt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var ee=!(Jt.prototype.reset=function(){this.next=this.b=this.a=null}),ne=new Yt;function re(){for(var t,e,n;n=e=void 0,n=null,(e=ne).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){D.setTimeout((function(){throw t}),0)}(t)}var r=Qt;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}ee=!1}function ie(t,e){Ht.call(this),this.b=t||1,this.a=e||D,this.f=F(this.Ya,this),this.g=q()}function oe(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function se(t,e,n){if("function"==R(t))n&&(t=F(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=F(t.handleEvent,t)}return 2147483647<Number(e)?-1:D.setTimeout(t,e||0)}B(ie,Ht),(S=ie.prototype).aa=!1,S.M=null,S.Ya=function(){var t;this.aa&&(0<(t=q()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(oe(this),this.start())))},S.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=q())},S.G=function(){ie.S.G.call(this),oe(this),delete this.a};var ae,ue,ce,he=(x(ue=fe,ce=ae=G),ue.prototype=null===ce?Object.create(ce):(le.prototype=ce.prototype,new le),fe.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=se((function(){e.a=null,e.c&&(e.c=!1,t(e))}),e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},fe.prototype.G=function(){ae.prototype.G.call(this),this.a&&(D.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},fe);function le(){this.constructor=ue}function fe(t,e,n){var r=ae.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function pe(t){G.call(this),this.b=t,this.a={}}B(pe,G);var de=[];function ve(t,e,n,r){Array.isArray(n)||(n&&(de[0]=n.toString()),n=de);for(var i=0;i<n.length;i++){var o=Mt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ye(t){nt(t.a,(function(t,e){this.a.hasOwnProperty(e)&&jt(t)}),t),t.a={}}function ge(){this.a=!0}function me(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Kt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}pe.prototype.G=function(){pe.S.G.call(this),ye(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ge.prototype.info=function(){};var be=null;function we(){return be=be||new Ht}function Ee(t){At.call(this,"serverreachability",t)}function Ie(t){var e=we();e.dispatchEvent(new Ee(e))}function _e(t){At.call(this,"statevent",t)}function Te(t){var e=we();e.dispatchEvent(new _e(e))}function Ae(t){At.call(this,"timingevent",t)}function xe(t,e){if("function"!=R(t))throw Error("Fn must not be null and must be a function");return D.setTimeout((function(){t()}),e)}B(Ee,At),B(_e,At),B(Ae,At);var Ne={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},Se={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ke(){}function Oe(t){var e;return(e=t.a)||(e=t.a={}),e}function De(){}ke.prototype.a=null;var Le,Re={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Pe(){At.call(this,"d")}function Ce(){At.call(this,"c")}function Ve(){}function Me(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new pe(this),this.P=Ue,t=ft?125:void 0,this.R=new ie(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}B(Pe,At),B(Ce,At),B(Ve,ke),Le=new Ve;var Ue=45e3,je={},Fe={};function ze(t,e,n){t.H=1,t.i=cn(nn(e)),t.j=n,t.I=!0,qe(t,null)}function qe(t,e){t.u=q(),Ge(t),t.l=nn(t.i);var n,r,i,o,s,a,u=t.l,c=t.T;Array.isArray(c)||(c=[String(c)]),In(u.b,"t",c),t.D=0,t.a=vr(t.g,t.g.C?e:null),0<t.O&&(t.F=new he(F(t.Ca,t,t.a),t.O)),ve(t.J,t.a,"readystatechange",t.Wa),e=t.B?rt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ie(),n=t.c,r=t.m,i=t.l,o=t.f,s=t.T,a=t.j,n.info((function(){if(n.a)if(a)for(var t="",e=a.split("&"),u=0;u<e.length;u++){var c,h,l=e[u].split("=");1<l.length&&(c=l[0],l=l[1],t=2<=(h=c.split("_")).length&&"type"==h[1]?t+(c+"=")+l+"&":t+(c+"=redacted&"))}else t=null;else t=a;return"XMLHTTP REQ ("+o+") [attempt "+s+"]: "+r+"\n"+i+"\n"+t}))}function Be(t,e,n){for(var r,i,o,s,a=!0;!t.A&&t.D<n.length;){var u=(i=n,s=o=void 0,o=(r=t).D,-1==(s=i.indexOf("\n",o))?Fe:(o=Number(i.substring(o,s)),isNaN(o)?je:(s+=1)+o>i.length?Fe:(i=i.substr(s,o),r.D=s+o,i)));if(u==Fe){4==e&&(t.h=4,Te(),a=!1),me(t.c,t.f,null,"[Incomplete Response]");break}if(u==je){t.h=4,Te(),me(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}me(t.c,t.f,u,null),Ye(t,u)}4==e&&0==n.length&&(t.h=1,Te(),a=!1),t.b=t.b&&a,a?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ar(e),e.F=!0)):(me(t.c,t.f,n,"[Invalid Chunked Response]"),Ke(t),We(t))}function Ge(t){t.U=q()+t.P,$e(t,t.P)}function $e(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=xe(F(t.Ua,t),e)}function He(t){t.o&&(D.clearTimeout(t.o),t.o=null)}function We(t){0==t.g.v||t.A||hr(t.g,t)}function Ke(t){He(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,oe(t.R),ye(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ye(t,e){try{var n,r,i,o,s,a,u,c,h,l,f,p=t.g;if(0!=p.v&&(p.a==t||kn(p.b,t)))if(p.I=t.N,!t.C&&kn(p.b,t)&&3==p.v){try{var d=p.ka.a.parse(e)}catch(t){d=null}if(Array.isArray(d)&&3==d.length){var v=d;if(0==v[0]){t:if(!p.j){if(p.a){if(!(p.a.u+3e3<t.u))break t;cr(p),Zn(p)}sr(p),Te()}}else p.oa=v[1],0<p.oa-p.P&&v[2]<37500&&p.H&&0==p.o&&!p.m&&(p.m=xe(F(p.Ra,p),6e3));if(Sn(p.b)<=1&&p.ea){try{p.ea()}catch(t){}p.ea=void 0}}else fr(p,11)}else if(!t.C&&p.a!=t||cr(p),!Y(e))for(e=d=p.ka.a.parse(e),d=0;d<e.length;d++)v=e[d],p.P=v[0],v=v[1],2==p.v?"c"==v[0]?(p.J=v[1],p.ga=v[2],null!=(n=v[3])&&(p.ha=n,p.c.info("VER="+p.ha)),null!=(r=v[4])&&(p.pa=r,p.c.info("SVER="+p.pa)),null!=(i=v[5])&&"number"==typeof i&&0<i&&(o=1.5*i,p.D=o,p.c.info("backChannelRequestTimeoutMs_="+o)),o=p,(s=t.a)&&(!(a=s.a?s.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(u=o.b).a&&(Z(a,"spdy")||Z(a,"quic")||Z(a,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(On(u,u.b),u.b=null)),!o.A||(c=s.a?s.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(o.na=c,un(o.B,o.A,c))),p.v=3,p.f&&p.f.ta(),p.V&&(p.N=q()-t.u,p.c.info("Handshake RTT: "+p.N+"ms")),h=t,(o=p).la=dr(o,o.C?o.ga:null,o.fa),h.C?(Dn(o.b,h),l=h,(f=o.D)&&l.setTimeout(f),l.o&&(He(l),Ge(l)),o.a=h):or(o),0<p.g.length&&er(p)):"stop"!=v[0]&&"close"!=v[0]||fr(p,7):3==p.v&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?fr(p,7):Qn(p):"noop"!=v[0]&&p.f&&p.f.sa(v),p.o=0);Ie()}catch(t){}}function Xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(P(t)||"string"==typeof t)H(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(P(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(P(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Qe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ze(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Je(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Je(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(S=Me.prototype).setTimeout=function(t){this.P=t},S.Wa=function(t){t=t.target;var e=this.F;e&&3==Wn(t)?e.f():this.Ca(t)},S.Ca=function(t){try{if(t==this.a)t:{var e=Wn(this.a),n=this.a.ua();if(this.a.X(),!(e<3||3==e&&!ft&&!this.a.$())){this.A||4!=e||7==n||Ie(),He(this);var r=this.a.X();this.N=r;var i=this.a.$();if(this.b=200==r,u=this.c,c=this.m,h=this.l,l=this.f,f=this.T,p=e,d=r,u.info((function(){return"XMLHTTP RESP ("+l+") [ attempt "+f+"]: "+c+"\n"+h+"\n"+p+" "+d})),this.b){if(this.V&&!this.C){e:{if(this.a){var o,s=this.a;if((o=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.h=3,Te(),Ke(this),We(this);break t}me(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ye(this,a)}this.I?(Be(this,e,i),ft&&this.b&&3==e&&(ve(this.J,this.R,"tick",this.Va),this.R.start())):(me(this.c,this.f,i,null),Ye(this,i)),4==e&&Ke(this),this.b&&!this.A&&(4==e?hr(this.g,this):(this.b=!1,Ge(this)))}else 400==r&&0<i.indexOf("Unknown SID")?(this.h=3,Te()):(this.h=0,Te()),Ke(this),We(this)}}}catch(t){}var u,c,h,l,f,p,d},S.Va=function(){var t,e;this.a&&(t=Wn(this.a),e=this.a.$(),this.D<e.length&&(He(this),Be(this,t,e),this.b&&4!=t&&Ge(this)))},S.cancel=function(){this.A=!0,Ke(this)},S.Ua=function(){this.o=null;var t,e,n=q();0<=n-this.U?(t=this.c,e=this.l,t.info((function(){return"TIMEOUT: "+e})),2!=this.H&&(Ie(),Te()),Ke(this),this.h=2,We(this)):$e(this,this.U-n)},(S=Qe.prototype).K=function(){Ze(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},S.L=function(){return Ze(this),this.a.concat()},S.get=function(t,e){return Je(this.b,t)?this.b[t]:e},S.set=function(t,e){Je(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},S.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var tn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function en(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof en?(this.a=void 0!==e?e:t.a,rn(this,t.f),this.j=t.j,on(this,t.c),sn(this,t.h),this.g=t.g,e=t.b,(n=new mn).c=e.c,e.a&&(n.a=new Qe(e.a),n.b=e.b),an(this,n),this.i=t.i):t&&(n=String(t).match(tn))?(this.a=!!e,rn(this,n[1]||"",!0),this.j=hn(n[2]||""),on(this,n[3]||"",!0),sn(this,n[4]),this.g=hn(n[5]||"",!0),an(this,n[6]||"",!0),this.i=hn(n[7]||"")):(this.a=!!e,this.b=new mn(null,this.a))}function nn(t){return new en(t)}function rn(t,e,n){t.f=n?hn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function on(t,e,n){t.c=n?hn(e,!0):e}function sn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function an(t,e,n){var r,i;e instanceof mn?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(bn(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(wn(this,e),In(this,n,t))}),r)),r.f=i):(n||(e=ln(e,yn)),t.b=new mn(e,t.a))}function un(t,e,n){t.b.set(e,n)}function cn(t){return un(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)),t}function hn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}en.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ln(e,pn,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(ln(e,pn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ln(n,"/"==n.charAt(0)?vn:dn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ln(n,gn)),t.join("")};var pn=/[#\/\?@]/g,dn=/[#\?:]/g,vn=/[#\?]/g,yn=/[#\?@]/g,gn=/#/g;function mn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function bn(t){t.a||(t.a=new Qe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function wn(t,e){bn(t),e=_n(t,e),Je(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Je((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ze(t)))}function En(t,e){return bn(t),e=_n(t,e),Je(t.a.b,e)}function In(t,e,n){wn(t,e),0<n.length&&(t.c=null,t.a.set(_n(t,e),K(n)),t.b+=n.length)}function _n(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Tn(t,e){this.b=t,this.a=e}function An(t){this.g=t||xn,t=D.PerformanceNavigationTiming?0<(t=D.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(D.ia&&D.ia.ya&&D.ia.ya()&&D.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(S=mn.prototype).add=function(t,e){bn(this),this.c=null,t=_n(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},S.forEach=function(t,e){bn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},S.L=function(){bn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},S.K=function(t){bn(this);var e=[];if("string"==typeof t)En(this,t)&&(e=W(e,this.a.get(_n(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},S.set=function(t,e){return bn(this),this.c=null,En(this,t=_n(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},S.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},S.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.K(r),0);o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var xn=10;function Nn(t){return t.b||t.a&&t.a.size>=t.f}function Sn(t){return t.b?1:t.a?t.a.size:0}function kn(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function On(t,e){t.a?t.a.add(e):t.b=e}function Dn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ln(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return K(t.c);var r=t.c;try{for(var i=N(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Rn(){}function Pn(){this.a=new Rn}function Cn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}An.prototype.cancel=function(){var t,e;if(this.c=Ln(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=N(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Rn.prototype.stringify=function(t){return D.JSON.stringify(t,void 0)},Rn.prototype.parse=function(t){return D.JSON.parse(t,void 0)};var Vn=D.JSON.parse;function Mn(t){Ht.call(this),this.headers=new Qe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Un,this.D=this.F=!1}B(Mn,Ht);var Un="",jn=/^https?$/i,Fn=["POST","PUT"];function zn(t){return"content-type"==t.toLowerCase()}function qn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Bn(t),$n(t)}function Bn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Gn(t){if(t.b&&void 0!==O&&(!t.s[1]||4!=Wn(t)||2!=t.X()))if(t.l&&4==Wn(t))se(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Wn(t)){t.b=!1;try{var e,n,r,i,o=t.X();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(tn)[1]||null)&&D.self&&D.self.location&&(i=(r=D.self.location.protocol).substr(0,r.length-1)),n=!jn.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Wn(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",Bn(t)}}finally{$n(t)}}}function $n(t,e){if(t.a){Hn(t);var n=t.a,r=t.s[0]?L:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Hn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(D.clearTimeout(t.m),t.m=null)}function Wn(t){return t.a?t.a.readyState:0}function Kn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",nt(n,(function(t,e){i+=e,i+=":",i+=t,i+="\r\n"})),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):un(t,e,n))}function Yn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xn(t){this.pa=0,this.g=[],this.c=new ge,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Yn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Yn("baseRetryDelayMs",5e3,t),this.Ma=Yn("retryDelaySeedMs",1e4,t),this.Ja=Yn("forwardChannelMaxRetries",2,t),this.ma=Yn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new An(t&&t.concurrentRequestLimit),this.ka=new Pn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Qn(t){var e,n;Jn(t),3==t.v&&(e=t.R++,un(n=nn(t.B),"SID",t.J),un(n,"RID",e),un(n,"TYPE","terminate"),rr(t,n),(e=new Me(t,t.c,e,void 0)).H=2,e.i=cn(nn(n)),n=!1,D.navigator&&D.navigator.sendBeacon&&(n=D.navigator.sendBeacon(e.i.toString(),"")),!n&&D.Image&&((new Image).src=e.i,n=!0),n||(e.a=vr(e.g,null),e.a.ba(e.i)),e.u=q(),Ge(e)),pr(t)}function Zn(t){t.a&&(ar(t),t.a.cancel(),t.a=null)}function Jn(t){Zn(t),t.j&&(D.clearTimeout(t.j),t.j=null),cr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&D.clearTimeout(t.h),t.h=null)}function tr(t,e){t.g.push(new Tn(t.La++,e)),3==t.v&&er(t)}function er(t){Nn(t.b)||t.h||(t.h=!0,te(t.Ba,t),t.u=0)}function nr(t,e){var n=e?e.f:t.R++,r=nn(t.B);un(r,"SID",t.J),un(r,"RID",n),un(r,"AID",t.P),rr(t,r),t.i&&t.l&&Kn(r,t.i,t.l),n=new Me(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ir(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),On(t.b,n),ze(n,r,e)}function rr(t,e){t.f&&Xe({},(function(t,n){un(e,n,t)}))}function ir(t,e,n){n=Math.min(t.g.length,n);var r=t.f?F(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,e,n){var r=n||"";try{Xe(t,(function(t,n){var i=t;C(t)&&(i=Kt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function or(t){t.a||t.j||(t.U=1,te(t.Aa,t),t.o=0)}function sr(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=xe(F(t.Aa,t),lr(t,t.o)),t.o++,1)}function ar(t){null!=t.s&&(D.clearTimeout(t.s),t.s=null)}function ur(t){t.a=new Me(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=nn(t.la);un(e,"RID","rpc"),un(e,"SID",t.J),un(e,"CI",t.H?"0":"1"),un(e,"AID",t.P),rr(t,e),un(e,"TYPE","xmlhttp"),t.i&&t.l&&Kn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=cn(nn(e)),n.j=null,n.I=!0,qe(n,t)}function cr(t){null!=t.m&&(D.clearTimeout(t.m),t.m=null)}function hr(t,e){var n,r=null;if(t.a==e){cr(t),ar(t),t.a=null;var i=2}else{if(!kn(t.b,e))return;r=e.s,Dn(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b)1==i?(r=e.j?e.j.length:0,e=q()-e.u,n=t.u,(i=we()).dispatchEvent(new Ae(i)),er(t)):or(t);else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(Sn(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)))return t.h=xe(F(t.Ba,t,e),lr(t,t.u)),t.u++,1}}(t,e)||2==i&&sr(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:fr(t,5);break;case 4:fr(t,10);break;case 3:fr(t,6);break;default:fr(t,2)}}function lr(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function fr(t,e){var n,r,i,o,s,a;t.c.info("Error code "+e),2==e?(n=null,t.f&&(n=null),r=F(t.Xa,t),n||(n=new en("//www.google.com/images/cleardot.gif"),D.location&&"http"==D.location.protocol||rn(n,"https"),cn(n)),i=n.toString(),o=r,a=new ge,D.Image?((s=new Image).onload=z(Cn,a,s,"TestLoadImage: loaded",!0,o),s.onerror=z(Cn,a,s,"TestLoadImage: error",!1,o),s.onabort=z(Cn,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=z(Cn,a,s,"TestLoadImage: timeout",!1,o),D.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=i):o(!1)):Te(),t.v=0,t.f&&t.f.ra(e),pr(t),Jn(t)}function pr(t){t.v=0,t.I=-1,t.f&&(0==Ln(t.b).length&&0==t.g.length||(t.b.c.length=0,K(t.g),t.g.length=0),t.f.qa())}function dr(t,e,n){var r,i,o,s,a,u,c,h=(r=n)instanceof en?nn(r):new en(r,void 0);return""!=h.c?(e&&on(h,e+"."+h.c),sn(h,h.h)):(o=(i=D.location).protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,c=new en(null,void 0),o&&rn(c,o),s&&on(c,s),a&&sn(c,a),u&&(c.g=u),h=c),t.W&&nt(t.W,(function(t,e){un(h,e,t)})),e=t.A,n=t.na,e&&n&&un(h,e,n),un(h,"VER",t.ha),rr(t,h),h}function vr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mn(t.Ka)).F=t.C,e}function yr(){}function gr(){if(ht&&!(10<=Number(Et)))throw Error("Environmental error: no available transport.")}function mr(t,e){Ht.call(this),this.a=new Xn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Y(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Y(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Er(this)}function br(t){Pe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function wr(){Ce.call(this),this.status=1}function Er(t){this.a=t}(S=Mn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Oe(this.H):Oe(Le),this.a.onreadystatechange=F(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void qn(this,t)}t=n||"";var i,o=new Qe(this.headers);r&&Xe(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=zn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=D.FormData&&t instanceof D.FormData,0<=$(Fn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Hn(this),0<this.o&&((this.D=(i=this.a,ht&&wt(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=F(this.xa,this)):this.m=se(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){qn(this,t)}},S.xa=function(){void 0!==O&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},S.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),$n(this))},S.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),$n(this,!0)),Mn.S.G.call(this)},S.za=function(){this.j||(this.A||this.l||this.g?Gn(this):this.Ta())},S.Ta=function(){Gn(this)},S.X=function(){try{return 2<Wn(this)?this.a.status:-1}catch(t){return-1}},S.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},S.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Vn(e)}},S.ua=function(){return this.h},S.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(S=Xn.prototype).ha=8,S.v=1,S.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Me(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ot(r=rt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ir(this,n,e),un(i=nn(this.B),"RID",t),un(i,"CVER",22),this.A&&un(i,"X-HTTP-Session-Id",this.A),rr(this,i),this.i&&r&&Kn(i,this.i,r),On(this.b,n),this.Ga&&un(i,"TYPE","init"),this.da?(un(i,"$req",e),un(i,"SID","null"),n.V=!0,ze(n,i,null)):ze(n,i,e),this.v=2}}else 3==this.v&&(t?nr(this,t):0==this.g.length||Nn(this.b)||nr(this))},S.Aa=function(){var t;this.j=null,ur(this),this.V&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=xe(F(this.Sa,this),t))},S.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Zn(this),ur(this))},S.Ra=function(){null!=this.m&&(this.m=null,Zn(this),sr(this),Te())},S.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Te()):(this.c.info("Failed to ping google.com"),Te())},(S=yr.prototype).ta=function(){},S.sa=function(){},S.ra=function(){},S.qa=function(){},S.Ha=function(){},gr.prototype.a=function(t,e){return new mr(t,e)},B(mr,Ht),(S=mr.prototype).addEventListener=function(t,e,n,r){mr.S.addEventListener.call(this,t,e,n,r)},S.removeEventListener=function(t,e,n,r){mr.S.removeEventListener.call(this,t,e,n,r)},S.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Te(),t.fa=e,t.W=n||{},t.H=t.T,t.B=dr(t,null,t.fa),er(t)},S.close=function(){Qn(this.a)},S.Pa=function(t){var e;"string"==typeof t?((e={}).__data__=t,tr(this.a,e)):this.g?((e={}).__data__=Kt(t),tr(this.a,e)):tr(this.a,t)},S.G=function(){this.a.f=null,delete this.f,Qn(this.a),delete this.a,mr.S.G.call(this)},B(br,Pe),B(wr,Ce),B(Er,yr),Er.prototype.ta=function(){this.a.dispatchEvent("a")},Er.prototype.sa=function(t){this.a.dispatchEvent(new br(t))},Er.prototype.ra=function(t){this.a.dispatchEvent(new wr)},Er.prototype.qa=function(){this.a.dispatchEvent("b")},gr.prototype.createWebChannel=gr.prototype.a,mr.prototype.send=mr.prototype.Pa,mr.prototype.open=mr.prototype.Oa,Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,Se.COMPLETE="complete",(De.EventType=Re).OPEN="a",Re.CLOSE="b",Re.ERROR="c",Re.MESSAGE="d",Ht.prototype.listen=Ht.prototype.va,Mn.prototype.listenOnce=Mn.prototype.wa,Mn.prototype.getLastError=Mn.prototype.Qa,Mn.prototype.getLastErrorCode=Mn.prototype.ua,Mn.prototype.getStatus=Mn.prototype.X,Mn.prototype.getResponseJson=Mn.prototype.Na,Mn.prototype.getResponseText=Mn.prototype.$,Mn.prototype.send=Mn.prototype.ba;var Ir={createWebChannelTransport:function(){return new gr},ErrorCode:Ne,EventType:Se,WebChannel:De,XhrIo:Mn},_r=Ir.createWebChannelTransport,Tr=Ir.ErrorCode,Ar=Ir.EventType,xr=Ir.WebChannel,Nr=Ir.XhrIo,Sr=(kr.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},kr.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},kr.prototype.setServiceProps=function(t){return this.serviceProps=t,this},kr);function kr(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Or=new g("@firebase/firestore");function Dr(){return Or.logLevel}function Lr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Or.logLevel<=i.DEBUG&&(e=n.map(Cr),Or.debug.apply(Or,l(["Firestore (7.19.1): "+t],e)))}function Rr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Or.logLevel<=i.ERROR&&(e=n.map(Cr),Or.error.apply(Or,l(["Firestore (7.19.1): "+t],e)))}function Pr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Or.logLevel<=i.WARN&&(e=n.map(Cr),Or.warn.apply(Or,l(["Firestore (7.19.1): "+t],e)))}function Cr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function Vr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.19.1) INTERNAL ASSERTION FAILED: "+t;throw Rr(e),new Error(e)}function Mr(t){t||Vr()}var Ur=(jr.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<40;r++)n[r]=Math.floor(256*Math.random());return n}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},jr);function jr(){}function Fr(t,e){return t<e?-1:e<t?1:0}function zr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function qr(t){return t+"\0"}function Br(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var Gr=(Object.defineProperty($r.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),$r.prototype.isEqual=function(t){return t instanceof $r&&t.projectId===this.projectId&&t.database===this.database},$r.prototype.o=function(t){return Fr(this.projectId,t.projectId)||Fr(this.database,t.database)},$r);function $r(t,e){this.projectId=t,this.database=e||"(default)"}function Hr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Yr,Xr,Qr,Zr=(vi.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},vi.prototype.has=function(t){return void 0!==this.get(t)},vi.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},vi.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},vi.prototype.forEach=function(t){Wr(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},vi.prototype._=function(){return Kr(this.l)},vi),Jr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ti=(u(di,Qr=Error),di),ei=(pi.now=function(){return pi.fromMillis(Date.now())},pi.fromDate=function(t){return pi.fromMillis(t.getTime())},pi.fromMillis=function(t){var e=Math.floor(t/1e3);return new pi(e,1e6*(t-1e3*e))},pi.prototype.toDate=function(){return new Date(this.toMillis())},pi.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},pi.prototype.T=function(t){return this.seconds===t.seconds?Fr(this.nanoseconds,t.nanoseconds):Fr(this.seconds,t.seconds)},pi.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},pi.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},pi.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},pi.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},pi),ni=(fi.I=function(t){return new fi(t)},fi.min=function(){return new fi(new ei(0,0))},fi.prototype.o=function(t){return this.timestamp.T(t.timestamp)},fi.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},fi.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},fi.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},fi.prototype.A=function(){return this.timestamp},fi),ri=(Object.defineProperty(li.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),li.prototype.isEqual=function(t){return 0===li.P(this,t)},li.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof li?t.forEach((function(t){e.push(t)})):e.push(t),this.g(e)},li.prototype.limit=function(){return this.offset+this.length},li.prototype.V=function(t){return t=void 0===t?1:t,this.g(this.segments,this.offset+t,this.length-t)},li.prototype.p=function(){return this.g(this.segments,this.offset,this.length-1)},li.prototype.v=function(){return this.segments[this.offset]},li.prototype.S=function(){return this.get(this.length-1)},li.prototype.get=function(t){return this.segments[this.offset+t]},li.prototype._=function(){return 0===this.length},li.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},li.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},li.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},li.prototype.N=function(){return this.segments.slice(this.offset,this.limit())},li.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},li),ii=(u(hi,Xr=ri),hi.prototype.g=function(t,e,n){return new hi(t,e,n)},hi.prototype.F=function(){return this.N().join("/")},hi.prototype.toString=function(){return this.F()},hi.k=function(t){if(0<=t.indexOf("//"))throw new ti(Jr.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new hi(t.split("/").filter((function(t){return 0<t.length})))},hi.$=function(){return new hi([])},hi),oi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,si=(u(ci,Yr=ri),ci.prototype.g=function(t,e,n){return new ci(t,e,n)},ci.O=function(t){return oi.test(t)},ci.prototype.F=function(){return this.N().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),ci.O(t)||(t="`"+t+"`"),t})).join(".")},ci.prototype.toString=function(){return this.F()},ci.prototype.M=function(){return 1===this.length&&"__name__"===this.get(0)},ci.L=function(){return new ci(["__name__"])},ci.q=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new ti(Jr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new ti(Jr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new ti(Jr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new ti(Jr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ci(e)},ci.$=function(){return new ci([])},ci),ai=(ui.B=function(t){return new ui(ii.k(t))},ui.U=function(t){return new ui(ii.k(t).V(5))},ui.prototype.W=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},ui.prototype.isEqual=function(t){return null!==t&&0===ii.P(this.path,t.path)},ui.prototype.toString=function(){return this.path.toString()},ui.P=function(t,e){return ii.P(t.path,e.path)},ui.j=function(t){return t.length%2==0},ui.K=function(t){return new ui(new ii(t.slice()))},ui);function ui(t){this.path=t}function ci(){return null!==Yr&&Yr.apply(this,arguments)||this}function hi(){return null!==Xr&&Xr.apply(this,arguments)||this}function li(t,e,n){void 0===e?e=0:e>t.length&&Vr(),void 0===n?n=t.length-e:n>t.length-e&&Vr(),this.segments=t,this.offset=e,this.R=n}function fi(t){this.timestamp=t}function pi(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new ti(Jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new ti(Jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ti(Jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new ti(Jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function di(t,e){var n=this;return(n=Qr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function vi(t,e){this.h=t,this.u=e,this.l={}}function yi(t){return null==t}function gi(t){return-0===t&&1/t==-1/0}function mi(t){return"number"==typeof t&&Number.isInteger(t)&&!gi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bi=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.G=null};function wi(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new bi(t,e,n,r,i,o,s)}function Ei(t){var e,n=t;return null===n.G&&(e=n.path.F(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map((function(t){return(e=t).field.F()+e.op.toString()+To(e.value);var e})).join(","),e+="|ob:",e+=n.orderBy.map((function(t){return(e=t).field.F()+e.dir;var e})).join(","),yi(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=nu(n.startAt)),n.endAt&&(e+="|ub:",e+=nu(n.endAt)),n.G=e),n.G}function Ii(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!wo(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iu(t.startAt,e.startAt)&&iu(t.endAt,e.endAt)}function _i(t){return ai.j(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ti=(Ai.fromBase64String=function(t){return new Ai(atob(t))},Ai.fromUint8Array=function(t){return new Ai(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Ai.prototype.toBase64=function(){return t=this.H,btoa(t);var t},Ai.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.H)},Ai.prototype.Y=function(){return 2*this.H.length},Ai.prototype.o=function(t){return Fr(this.H,t.H)},Ai.prototype.isEqual=function(t){return this.H===t.H},Ai);function Ai(t){this.H=t}function xi(t){this.count=t}Ti.J=new Ti("");var Ni,Si,ki=(Oi.prototype.tt=function(t){return new Oi(this.target,this.targetId,this.X,t,this.Z,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Oi.prototype.et=function(t,e){return new Oi(this.target,this.targetId,this.X,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Oi.prototype.nt=function(t){return new Oi(this.target,this.targetId,this.X,this.sequenceNumber,this.Z,t,this.resumeToken)},Oi);function Oi(t,e,n,r,i,o,s){void 0===i&&(i=ni.min()),void 0===o&&(o=ni.min()),void 0===s&&(s=Ti.J),this.target=t,this.targetId=e,this.X=n,this.sequenceNumber=r,this.Z=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Di(t){switch(t){case Jr.OK:return Vr(),0;case Jr.CANCELLED:case Jr.UNKNOWN:case Jr.DEADLINE_EXCEEDED:case Jr.RESOURCE_EXHAUSTED:case Jr.INTERNAL:case Jr.UNAVAILABLE:case Jr.UNAUTHENTICATED:return;case Jr.INVALID_ARGUMENT:case Jr.NOT_FOUND:case Jr.ALREADY_EXISTS:case Jr.PERMISSION_DENIED:case Jr.FAILED_PRECONDITION:case Jr.ABORTED:case Jr.OUT_OF_RANGE:case Jr.UNIMPLEMENTED:case Jr.DATA_LOSS:return 1;default:return Vr(),0}}function Li(t){if(void 0===t)return Rr("GRPC error has no .code"),Jr.UNKNOWN;switch(t){case Ni.OK:return Jr.OK;case Ni.CANCELLED:return Jr.CANCELLED;case Ni.UNKNOWN:return Jr.UNKNOWN;case Ni.DEADLINE_EXCEEDED:return Jr.DEADLINE_EXCEEDED;case Ni.RESOURCE_EXHAUSTED:return Jr.RESOURCE_EXHAUSTED;case Ni.INTERNAL:return Jr.INTERNAL;case Ni.UNAVAILABLE:return Jr.UNAVAILABLE;case Ni.UNAUTHENTICATED:return Jr.UNAUTHENTICATED;case Ni.INVALID_ARGUMENT:return Jr.INVALID_ARGUMENT;case Ni.NOT_FOUND:return Jr.NOT_FOUND;case Ni.ALREADY_EXISTS:return Jr.ALREADY_EXISTS;case Ni.PERMISSION_DENIED:return Jr.PERMISSION_DENIED;case Ni.FAILED_PRECONDITION:return Jr.FAILED_PRECONDITION;case Ni.ABORTED:return Jr.ABORTED;case Ni.OUT_OF_RANGE:return Jr.OUT_OF_RANGE;case Ni.UNIMPLEMENTED:return Jr.UNIMPLEMENTED;case Ni.DATA_LOSS:return Jr.DATA_LOSS;default:return Vr()}}(Si=Ni=Ni||{})[Si.OK=0]="OK",Si[Si.CANCELLED=1]="CANCELLED",Si[Si.UNKNOWN=2]="UNKNOWN",Si[Si.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Si[Si.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Si[Si.NOT_FOUND=5]="NOT_FOUND",Si[Si.ALREADY_EXISTS=6]="ALREADY_EXISTS",Si[Si.PERMISSION_DENIED=7]="PERMISSION_DENIED",Si[Si.UNAUTHENTICATED=16]="UNAUTHENTICATED",Si[Si.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Si[Si.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Si[Si.ABORTED=10]="ABORTED",Si[Si.OUT_OF_RANGE=11]="OUT_OF_RANGE",Si[Si.UNIMPLEMENTED=12]="UNIMPLEMENTED",Si[Si.INTERNAL=13]="INTERNAL",Si[Si.UNAVAILABLE=14]="UNAVAILABLE",Si[Si.DATA_LOSS=15]="DATA_LOSS";var Ri=(Ui.prototype.st=function(t,e){return new Ui(this.P,this.root.st(t,e,this.P).copy(null,null,Ci.it,null,null))},Ui.prototype.remove=function(t){return new Ui(this.P,this.root.remove(t,this.P).copy(null,null,Ci.it,null,null))},Ui.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Ui.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Ui.prototype._=function(){return this.root._()},Object.defineProperty(Ui.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Ui.prototype.rt=function(){return this.root.rt()},Ui.prototype.ot=function(){return this.root.ot()},Ui.prototype.ht=function(t){return this.root.ht(t)},Ui.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},Ui.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},Ui.prototype.at=function(t){return this.root.at(t)},Ui.prototype.ut=function(){return new Pi(this.root,null,this.P,!1)},Ui.prototype.ct=function(t){return new Pi(this.root,t,this.P,!1)},Ui.prototype.lt=function(){return new Pi(this.root,null,this.P,!0)},Ui.prototype._t=function(t){return new Pi(this.root,t,this.P,!0)},Ui),Pi=(Mi.prototype.wt=function(){var t=this.dt.pop(),e={key:t.key,value:t.value};if(this.ft)for(t=t.left;!t._();)this.dt.push(t),t=t.right;else for(t=t.right;!t._();)this.dt.push(t),t=t.left;return e},Mi.prototype.Tt=function(){return 0<this.dt.length},Mi.prototype.Et=function(){if(0===this.dt.length)return null;var t=this.dt[this.dt.length-1];return{key:t.key,value:t.value}},Mi),Ci=(Vi.prototype.copy=function(t,e,n,r,i){return new Vi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Vi.prototype._=function(){return!1},Vi.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},Vi.prototype.at=function(t){return this.right.at(t)||t(this.key,this.value)||this.left.at(t)},Vi.prototype.min=function(){return this.left._()?this:this.left.min()},Vi.prototype.rt=function(){return this.min().key},Vi.prototype.ot=function(){return this.right._()?this.key:this.right.ot()},Vi.prototype.st=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.st(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.st(t,e,n))).It()},Vi.prototype.At=function(){if(this.left._())return Vi.EMPTY;var t=this;return t.left.Rt()||t.left.left.Rt()||(t=t.Pt()),(t=t.copy(null,null,null,t.left.At(),null)).It()},Vi.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left._()||r.left.Rt()||r.left.left.Rt()||(r=r.Pt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Rt()&&(r=r.gt()),r.right._()||r.right.Rt()||r.right.left.Rt()||(r=r.Vt()),0===e(t,r.key)){if(r.right._())return Vi.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.At())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.It()},Vi.prototype.Rt=function(){return this.color},Vi.prototype.It=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.yt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.gt()),t.left.Rt()&&t.right.Rt()&&(t=t.pt()),t},Vi.prototype.Pt=function(){var t=this.pt();return t.right.left.Rt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.gt())).yt()).pt()),t},Vi.prototype.Vt=function(){var t=this.pt();return t.left.left.Rt()&&(t=(t=t.gt()).pt()),t},Vi.prototype.yt=function(){var t=this.copy(null,null,Vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Vi.prototype.gt=function(){var t=this.copy(null,null,Vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Vi.prototype.pt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Vi.prototype.bt=function(){var t=this.vt();return Math.pow(2,t)<=this.size+1},Vi.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw Vr();if(this.right.Rt())throw Vr();var t=this.left.vt();if(t!==this.right.vt())throw Vr();return t+(this.Rt()?0:1)},Vi);function Vi(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Vi.RED,this.left=null!=r?r:Vi.EMPTY,this.right=null!=i?i:Vi.EMPTY,this.size=this.left.size+1+this.right.size}function Mi(t,e,n,r){this.ft=r,this.dt=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ft?t.left:t.right;else{if(0===i){this.dt.push(t);break}this.dt.push(t),t=this.ft?t.right:t.left}}function Ui(t,e){this.P=t,this.root=e||Ci.EMPTY}function ji(){this.size=0}Ci.EMPTY=null,Ci.RED=!0,Ci.it=!1,Ci.EMPTY=(Object.defineProperty(ji.prototype,"key",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(ji.prototype,"value",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(ji.prototype,"color",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(ji.prototype,"left",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(ji.prototype,"right",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),ji.prototype.copy=function(t,e,n,r,i){return this},ji.prototype.st=function(t,e,n){return new Ci(t,e)},ji.prototype.remove=function(t,e){return this},ji.prototype._=function(){return!0},ji.prototype.ht=function(t){return!1},ji.prototype.at=function(t){return!1},ji.prototype.rt=function(){return null},ji.prototype.ot=function(){return null},ji.prototype.Rt=function(){return!1},ji.prototype.bt=function(){return!0},ji.prototype.vt=function(){return 0},new ji);var Fi=(Gi.prototype.has=function(t){return null!==this.data.get(t)},Gi.prototype.first=function(){return this.data.rt()},Gi.prototype.last=function(){return this.data.ot()},Object.defineProperty(Gi.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Gi.prototype.indexOf=function(t){return this.data.indexOf(t)},Gi.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},Gi.prototype.St=function(t,e){for(var n=this.data.ct(t[0]);n.Tt();){var r=n.wt();if(0<=this.P(r.key,t[1]))return;e(r.key)}},Gi.prototype.Dt=function(t,e){for(var n=void 0!==e?this.data.ct(e):this.data.ut();n.Tt();)if(!t(n.wt().key))return},Gi.prototype.Ct=function(t){var e=this.data.ct(t);return e.Tt()?e.wt().key:null},Gi.prototype.ut=function(){return new zi(this.data.ut())},Gi.prototype.ct=function(t){return new zi(this.data.ct(t))},Gi.prototype.add=function(t){return this.copy(this.data.remove(t).st(t,!0))},Gi.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Gi.prototype._=function(){return this.data._()},Gi.prototype.Nt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},Gi.prototype.isEqual=function(t){if(!(t instanceof Gi))return!1;if(this.size!==t.size)return!1;for(var e=this.data.ut(),n=t.data.ut();e.Tt();){var r=e.wt().key,i=n.wt().key;if(0!==this.P(r,i))return!1}return!0},Gi.prototype.N=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},Gi.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},Gi.prototype.copy=function(t){var e=new Gi(this.P);return e.data=t,e},Gi),zi=(Bi.prototype.wt=function(){return this.Ft.wt().key},Bi.prototype.Tt=function(){return this.Ft.Tt()},Bi),qi=new Ri(ai.P);function Bi(t){this.Ft=t}function Gi(t){this.P=t,this.data=new Ri(this.P)}var $i=new Ri(ai.P),Hi=new Ri(ai.P),Wi=new Fi(ai.P);function Ki(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Wi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Yi=new Fi(Fr);function Xi(t,e,n,r){this.te=t,this.removedTargetIds=e,this.key=n,this.ee=r}function Qi(t,e){this.targetId=t,this.ne=e}function Zi(t,e,n,r){void 0===n&&(n=Ti.J),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var Ji=(fo.xt=function(t){return new fo(t.P)},fo.prototype.has=function(t){return null!=this.kt.get(t)},fo.prototype.get=function(t){return this.kt.get(t)},fo.prototype.first=function(){return this.$t.rt()},fo.prototype.last=function(){return this.$t.ot()},fo.prototype._=function(){return this.$t._()},fo.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(fo.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),fo.prototype.forEach=function(t){this.$t.ht((function(e,n){return t(e),!1}))},fo.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.st(t.key,t),e.$t.st(t,null))},fo.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},fo.prototype.isEqual=function(t){if(!(t instanceof fo))return!1;if(this.size!==t.size)return!1;for(var e=this.$t.ut(),n=t.$t.ut();e.Tt();){var r=e.wt().key,i=n.wt().key;if(!r.isEqual(i))return!1}return!0},fo.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},fo.prototype.copy=function(t,e){var n=new fo;return n.P=this.P,n.kt=t,n.$t=e,n},fo),to=(lo.prototype.track=function(t){var e=t.doc.key,n=this.Ot.get(e);!n||0!==t.type&&3===n.type?this.Ot=this.Ot.st(e,t):3===t.type&&1!==n.type?this.Ot=this.Ot.st(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ot=this.Ot.st(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ot=this.Ot.remove(e):1===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):Vr()},lo.prototype.Mt=function(){var t=[];return this.Ot.ht((function(e,n){t.push(n)})),t},lo),eo=(ho.Qt=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:0,doc:t})})),new ho(t,e,Ji.xt(e),i,n,r,!0,!1)},Object.defineProperty(ho.prototype,"hasPendingWrites",{get:function(){return!this.qt._()},enumerable:!1,configurable:!0}),ho.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.qt.isEqual(t.qt)&&Aa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},ho),no=(co.zt=function(t,e){var n=new Map;return n.set(t,ro.Ht(t,e)),new co(ni.min(),n,Yi,qi,Ki())},co),ro=(uo.Ht=function(t,e){return new uo(Ti.J,e,Ki(),Ki(),Ki())},uo),io=(Object.defineProperty(ao.prototype,"Yt",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(ao.prototype,"resumeToken",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(ao.prototype,"ae",{get:function(){return 0!==this.se},enumerable:!1,configurable:!0}),Object.defineProperty(ao.prototype,"ue",{get:function(){return this.he},enumerable:!1,configurable:!0}),ao.prototype.ce=function(t){0<t.Y()&&(this.he=!0,this.re=t)},ao.prototype.le=function(){var t=Ki(),e=Ki(),n=Ki();return this.ie.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Vr()}})),new ro(this.re,this.oe,t,e,n)},ao.prototype._e=function(){this.he=!1,this.ie=vo()},ao.prototype.fe=function(t,e){this.he=!0,this.ie=this.ie.st(t,e)},ao.prototype.de=function(t){this.he=!0,this.ie=this.ie.remove(t)},ao.prototype.we=function(){this.se+=1},ao.prototype.Te=function(){--this.se},ao.prototype.Ee=function(){this.he=!0,this.oe=!0},ao),oo=(so.prototype.ge=function(t){for(var e=0,n=t.te;e<n.length;e++){var r=n[e];t.ee instanceof ua?this.Ve(r,t.ee):t.ee instanceof ca&&this.ye(r,t.key,t.ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ye(s,t.key,t.ee)}},so.prototype.pe=function(t){var e=this;this.be(t,(function(n){var r=e.ve(n);switch(t.state){case 0:e.Se(n)&&r.ce(t.resumeToken);break;case 1:r.Te(),r.ae||r._e(),r.ce(t.resumeToken);break;case 2:r.Te(),r.ae||e.removeTarget(n);break;case 3:e.Se(n)&&(r.Ee(),r.ce(t.resumeToken));break;case 4:e.Se(n)&&(e.De(n),r.ce(t.resumeToken));break;default:Vr()}}))},so.prototype.be=function(t,e){var n=this;0<t.targetIds.length?t.targetIds.forEach(e):this.me.forEach((function(t,r){n.Se(r)&&e(r)}))},so.prototype.Ce=function(t){var e,n,r=t.targetId,i=t.ne.count,o=this.Ne(r);o&&(_i(e=o.target)?0===i?(n=new ai(e.path),this.ye(r,n,new ca(n,ni.min()))):Mr(1===i):this.Fe(r)!==i&&(this.De(r),this.Pe=this.Pe.add(r)))},so.prototype.ke=function(t){var e=this,n=new Map;this.me.forEach((function(r,i){var o,s=e.Ne(i);s&&(r.Yt&&_i(s.target)&&(o=new ai(s.target.path),null!==e.Ae.get(o)||e.$e(i,o)||e.ye(i,o,new ca(o,t))),r.ue&&(n.set(i,r.le()),r._e()))}));var r=Ki();this.Re.forEach((function(t,n){var i=!0;n.Dt((function(t){var n=e.Ne(t);return!n||2===n.X||(i=!1)})),i&&(r=r.add(t))}));var i=new no(t,n,this.Pe,this.Ae,r);return this.Ae=qi,this.Re=po(),this.Pe=new Fi(Fr),i},so.prototype.Ve=function(t,e){var n;this.Se(t)&&(n=this.$e(t,e.key)?2:0,this.ve(t).fe(e.key,n),this.Ae=this.Ae.st(e.key,e),this.Re=this.Re.st(e.key,this.xe(e.key).add(t)))},so.prototype.ye=function(t,e,n){var r;this.Se(t)&&(r=this.ve(t),this.$e(t,e)?r.fe(e,1):r.de(e),this.Re=this.Re.st(e,this.xe(e).delete(t)),n&&(this.Ae=this.Ae.st(e,n)))},so.prototype.removeTarget=function(t){this.me.delete(t)},so.prototype.Fe=function(t){var e=this.ve(t).le();return this.Ie.Oe(t).size+e.Jt.size-e.Zt.size},so.prototype.we=function(t){this.ve(t).we()},so.prototype.ve=function(t){var e=this.me.get(t);return e||(e=new io,this.me.set(t,e)),e},so.prototype.xe=function(t){var e=this.Re.get(t);return e||(e=new Fi(Fr),this.Re=this.Re.st(t,e)),e},so.prototype.Se=function(t){var e=null!==this.Ne(t);return e||Lr("WatchChangeAggregator","Detected inactive target",t),e},so.prototype.Ne=function(t){var e=this.me.get(t);return e&&e.ae?null:this.Ie.Me(t)},so.prototype.De=function(t){var e=this;this.me.set(t,new io),this.Ie.Oe(t).forEach((function(n){e.ye(t,n,null)}))},so.prototype.$e=function(t,e){return this.Ie.Oe(t).has(e)},so);function so(t){this.Ie=t,this.me=new Map,this.Ae=qi,this.Re=po(),this.Pe=new Fi(Fr)}function ao(){this.se=0,this.ie=vo(),this.re=Ti.J,this.oe=!1,this.he=!0}function uo(t,e,n,r,i){this.resumeToken=t,this.Yt=e,this.Jt=n,this.Xt=r,this.Zt=i}function co(t,e,n,r,i){this.Z=t,this.Wt=e,this.jt=n,this.Kt=r,this.Gt=i}function ho(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.qt=i,this.fromCache=o,this.Bt=s,this.Ut=a}function lo(){this.Ot=new Ri(ai.P)}function fo(t){this.P=t?function(e,n){return t(e,n)||ai.P(e.key,n.key)}:function(t,e){return ai.P(t.key,e.key)},this.kt=$i,this.$t=new Ri(this.P)}function po(){return new Ri(ai.P)}function vo(){return new Ri(ai.P)}function yo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function go(t){var e=Ao(t.mapValue.fields.__local_write_time__.timestampValue);return new ei(e.seconds,e.nanos)}var mo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yo(t)?4:10:Vr()}function wo(t,e){var n,r,i,o=bo(t);if(o!==bo(e))return!1;switch(o){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return go(t).isEqual(go(e));case 3:return function(e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ao(t.timestampValue),r=Ao(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,No(t.bytesValue).isEqual(No(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return r=e,xo((n=t).geoPointValue.latitude)===xo(r.geoPointValue.latitude)&&xo(n.geoPointValue.longitude)===xo(r.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return xo(t.integerValue)===xo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=xo(t.doubleValue),r=xo(e.doubleValue);return n===r?gi(n)===gi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zr(t.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Hr(n)!==Hr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wo(n[i],r[i])))return!1;return!0}();default:return Vr()}}function Eo(t,e){return void 0!==(t.values||[]).find((function(t){return wo(t,e)}))}function Io(t,e){var n,r,i,o,s,a,u,c,h,l,f=bo(t),p=bo(e);if(f!==p)return Fr(f,p);switch(f){case 0:return 0;case 1:return Fr(t.booleanValue,e.booleanValue);case 2:return c=e,(h=xo(t.integerValue||t.doubleValue))<(l=xo(c.integerValue||c.doubleValue))?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return _o(t.timestampValue,e.timestampValue);case 4:return _o(go(t),go(e));case 5:return Fr(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=No(o),u=No(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Fr(n[i],r[i]);if(0!==o)return o}return Fr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=Fr(xo(n.latitude),xo(r.latitude)))?i:Fr(xo(n.longitude),xo(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Io(n[i],r[i]);if(o)return o}return Fr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Fr(r[s],o[s]);if(0!==a)return a;var u=Io(n[r[s]],i[o[s]]);if(0!==u)return u}return Fr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Vr()}}function _o(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Fr(t,e);var n=Ao(t),r=Ao(e),i=Fr(n.seconds,r.seconds);return 0!==i?i:Fr(n.nanos,r.nanos)}function To(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?"time("+(n=Ao(e.timestampValue)).seconds+","+n.nanos+")":"stringValue"in e?e.stringValue:"bytesValue"in e?No(e.bytesValue).toBase64():"referenceValue"in e?(i=e.referenceValue,ai.U(i).toString()):"geoPointValue"in e?"geo("+(r=e.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in e?function(){for(var n="[",r=!0,i=0,o=e.arrayValue.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}():"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Vr();var n,r,i}(t)}function Ao(t){if(Mr(!!t),"string"!=typeof t)return{seconds:xo(t.seconds),nanos:xo(t.nanos)};var e,n=0,r=mo.exec(t);Mr(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function xo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function No(t){return"string"==typeof t?Ti.fromBase64String(t):Ti.fromUint8Array(t)}function So(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.F()}}function ko(t){return t&&"integerValue"in t}function Oo(t){return!!t&&"arrayValue"in t}function Do(t){return t&&"nullValue"in t}function Lo(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ro(t){return t&&"mapValue"in t}var Po={asc:"ASCENDING",desc:"DESCENDING"},Co={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vo=function(t,e){this.s=t,this.Le=e};function Mo(t){return{integerValue:""+t}}function Uo(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gi(e)?"-0":e}}function jo(t,e){return mi(e)?Mo(e):Uo(t,e)}function Fo(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function zo(t,e){return t.Le?e.toBase64():e.toUint8Array()}function qo(t){return Mr(!!t),ni.I((e=Ao(t),new ei(e.seconds,e.nanos)));var e}function Bo(t,e){return new ii(["projects",t.projectId,"databases",t.database]).child("documents").child(e).F()}function Go(t){var e=ii.k(t);return Mr(ss(e)),e}function $o(t,e){return Bo(t.s,e.path)}function Ho(t,e){var n=Go(e);return Mr(n.get(1)===t.s.projectId),Mr(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new ai(Xo(n))}function Wo(t,e){return Bo(t.s,e)}function Ko(t){var e=Go(t);return 4===e.length?ii.$():Xo(e)}function Yo(t){return new ii(["projects",t.s.projectId,"databases",t.s.database]).F()}function Xo(t){return Mr(4<t.length&&"documents"===t.get(4)),t.V(5)}function Qo(t,e,n){return{name:$o(t,e),fields:n.proto.mapValue.fields}}function Zo(t,e){var n,r,i,o,s,a;if(e instanceof js)n={update:Qo(t,e.key,e.value)};else if(e instanceof Xs)n={delete:$o(t,e.key)};else if(e instanceof Fs)n={update:Qo(t,e.key,e.data),updateMask:(r=e.qe,i=[],r.fields.forEach((function(t){return i.push(t.F())})),{fieldPaths:i})};else if(e instanceof $s)n={transform:{document:$o(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){var e=t.transform;if(e instanceof ls)return{fieldPath:t.field.F(),setToServerValue:"REQUEST_TIME"};if(e instanceof fs)return{fieldPath:t.field.F(),appendMissingElements:{values:e.elements}};if(e instanceof gs)return{fieldPath:t.field.F(),removeAllFromArray:{values:e.elements}};if(e instanceof Es)return{fieldPath:t.field.F(),increment:e.Be};throw Vr()}))}};else{if(!(e instanceof Qs))return Vr();n={verify:$o(t,e.key)}}return e.Qe.Ue||(n.currentDocument=void 0!==(o=e.Qe).updateTime?{updateTime:(s=t,a=o.updateTime,Fo(s,a.A()))}:void 0!==o.exists?{exists:o.exists}:Vr()),n}function Jo(t,e){var n,r,i=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?ks.updateTime(qo(n.updateTime)):void 0!==n.exists?ks.exists(n.exists):ks.We():ks.We();if(e.update){e.update.name;var o=Ho(t,e.update.name),s=new Zs({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=(r=e.updateMask.fieldPaths||[],new As(r.map((function(t){return si.q(t)}))));return new Fs(o,s,a,i)}return new js(o,s,i)}if(e.delete){var u=Ho(t,e.delete);return new Xs(u,i)}if(e.transform){var c=Ho(t,e.transform.document),h=e.transform.fieldTransforms.map((function(e){return function(t,e){var n,r,i=null;"setToServerValue"in e?(Mr("REQUEST_TIME"===e.setToServerValue),i=new ls):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],i=new fs(n)):"removeAllFromArray"in e?(r=e.removeAllFromArray.values||[],i=new gs(r)):"increment"in e?i=new Es(t,e.increment):Vr();var o=si.q(e.fieldPath);return new xs(o,i)}(t,e)}));return Mr(!0===i.exists),new $s(c,h)}if(e.verify){var l=Ho(t,e.verify);return new Qs(l,i)}return Vr()}function ts(t,e){return{documents:[Wo(t,e.path)]}}function es(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Wo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Wo(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){if("=="===t.op){if(Lo(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NAN"}};if(Do(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Lo(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NAN"}};if(Do(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(t.field),op:(e=t.op,Co[e]),value:t.value}};var e}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:is((e=t).field),direction:(n=e.dir,Po[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Le||yi(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=ns(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ns(e.endAt)),n}function ns(t){return{before:t.before,values:t.position}}function rs(t){var e=!!t.before,n=t.values||[];return new Qa(n,e)}function is(t){return{fieldPath:t.F()}}function os(t){return si.q(t.fieldPath)}function ss(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function as(){this.je=void 0}function us(t,e){return t instanceof Es?ko(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var cs,hs,ls=(u(ds,hs=as),ds),fs=(u(ps,cs=as),ps);function ps(t){var e=this;return(e=cs.call(this)||this).elements=t,e}function ds(){return null!==hs&&hs.apply(this,arguments)||this}function vs(t,e){for(var n=Ts(e),r=0,i=t.elements;r<i.length;r++)!function(t){n.some((function(e){return wo(e,t)}))||n.push(t)}(i[r]);return{arrayValue:{values:n}}}var ys,gs=(u(ms,ys=as),ms);function ms(t){var e=this;return(e=ys.call(this)||this).elements=t,e}function bs(t,e){for(var n=Ts(e),r=0,i=t.elements;r<i.length;r++)!function(t){n=n.filter((function(e){return!wo(e,t)}))}(i[r]);return{arrayValue:{values:n}}}var ws,Es=(u(Is,ws=as),Is);function Is(t,e){var n=this;return(n=ws.call(this)||this).serializer=t,n.Be=e,n}function _s(t){return xo(t.integerValue||t.doubleValue)}function Ts(t){return Oo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var As=(Ns.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},Ns.prototype.isEqual=function(t){return zr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},Ns),xs=function(t,e){this.field=t,this.transform=e};function Ns(t){(this.fields=t).sort(si.P)}function Ss(t,e){this.version=t,this.transformResults=e}var ks=(Os.We=function(){return new Os},Os.exists=function(t){return new Os(void 0,t)},Os.updateTime=function(t){return new Os(t)},Object.defineProperty(Os.prototype,"Ue",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Os.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Os);function Os(t,e){this.updateTime=t,this.exists=e}function Ds(t,e){return void 0!==t.updateTime?e instanceof ua&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ua}function Ls(){}function Rs(t,e,n){return t instanceof js?new ua(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof Fs?function(t,e,n){if(!Ds(t.Qe,e))return new ha(t.key,n.version);var r=Bs(t,e);return new ua(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof $s?function(t,e,n){if(Mr(null!=n.transformResults),!Ds(t.Qe,e))return new ha(t.key,n.version);var r=e,i=function(t,e,n){var r=[];Mr(t.length===n.length);for(var i,o,s,a=0;a<n.length;a++){var u=t[a],c=u.transform,h=null;e instanceof ua&&(h=e.field(u.field)),r.push((i=c,o=h,s=n[a],i instanceof fs?vs(i,o):i instanceof gs?bs(i,o):s))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Ws(t,r.data(),i);return new ua(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):new ca(t.key,n.version,{hasCommittedMutations:!0})}function Ps(t,e,n,r){return t instanceof js?function(t,e){if(!Ds(t.Qe,e))return e;var n=Vs(e);return new ua(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof Fs?function(t,e){if(!Ds(t.Qe,e))return e;var n=Vs(e),r=Bs(t,e);return new ua(t.key,n,r,{Ge:!0})}(t,e):t instanceof $s?function(t,e,n,r){if(!Ds(t.Qe,e))return e;var i=e,o=function(t,e,n,r){for(var i,o,s,a,u,c,h,l=[],f=0,p=t;f<p.length;f++){var d=p[f],v=d.transform,y=null;n instanceof ua&&(y=n.field(d.field)),null===y&&r instanceof ua&&(y=r.field(d.field)),l.push((o=y,s=e,h=c=u=a=void 0,(i=v)instanceof ls?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},o&&(h.fields.__previous_value__=o),{mapValue:h}):i instanceof fs?vs(i,o):i instanceof gs?bs(i,o):(c=_s(u=us(a=i,o))+_s(a.Be),ko(u)&&ko(a.Be)?Mo(c):Uo(a.serializer,c))))}return l}(t.fieldTransforms,n,e,r),s=Ws(t,i.data(),o);return new ua(t.key,i.version,s,{Ge:!0})}(t,e,r,n):(o=e,Ds((i=t).Qe,o)?new ca(i.key,ni.min()):o);var i,o}function Cs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Qe.isEqual(e.Qe)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.qe.isEqual(e.qe):2!==t.type||zr(t.fieldTransforms,t.fieldTransforms,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof fs&&o instanceof fs||i instanceof gs&&o instanceof gs?zr(i.elements,o.elements,wo):i instanceof Es&&o instanceof Es?wo(i.Be,o.Be):i instanceof ls&&o instanceof ls);var n,r,i,o})))}function Vs(t){return t instanceof ua?t.version:ni.min()}var Ms,Us,js=(u(qs,Us=Ls),qs),Fs=(u(zs,Ms=Ls),zs);function zs(t,e,n,r){var i=this;return(i=Ms.call(this)||this).key=t,i.data=e,i.qe=n,i.Qe=r,i.type=1,i}function qs(t,e,n){var r=this;return(r=Us.call(this)||this).key=t,r.value=e,r.Qe=n,r.type=0,r}function Bs(t,e){return n=t,r=e instanceof ua?e.data():Zs.empty(),i=new Js(r),n.qe.fields.forEach((function(t){var e;t._()||(null!==(e=n.data.field(t))?i.set(t,e):i.delete(t))})),i.ze();var n,r,i}var Gs,$s=(u(Hs,Gs=Ls),Hs);function Hs(t,e){var n=this;return(n=Gs.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Qe=ks.exists(!0),n}function Ws(t,e,n){for(var r=new Js(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var Ks,Ys,Xs=(u(ra,Ys=Ls),ra),Qs=(u(na,Ks=Ls),na),Zs=(ea.empty=function(){return new ea({mapValue:{}})},ea.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ro(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},ea.prototype.isEqual=function(t){return wo(this.proto,t.proto)},ea),Js=(ta.prototype.set=function(t,e){return this.Je(t,e),this},ta.prototype.delete=function(t){return this.Je(t,null),this},ta.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===bo(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.S(),e)},ta.prototype.ze=function(){var t=this.Xe(si.$(),this.Ye);return null!=t?new Zs(t):this.He},ta.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=Ro(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){var s;e instanceof Map?null!=(s=n.Xe(t.child(i),e))&&(o[i]=s,r=!0):null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},ta);function ta(t){void 0===t&&(t=Zs.empty()),this.He=t,this.Ye=new Map}function ea(t){this.proto=t}function na(t,e){var n=this;return(n=Ks.call(this)||this).key=t,n.Qe=e,n.type=4,n}function ra(t,e){var n=this;return(n=Ys.call(this)||this).key=t,n.Qe=e,n.type=3,n}function ia(t,e){this.key=t,this.version=e}var oa,sa,aa,ua=(u(pa,aa=ia),pa.prototype.field=function(t){return this.Ze.field(t)},pa.prototype.data=function(){return this.Ze},pa.prototype.tn=function(){return this.Ze.proto},pa.prototype.isEqual=function(t){return t instanceof pa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},pa.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(pa.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),pa),ca=(u(fa,sa=ia),fa.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(fa.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),fa.prototype.isEqual=function(t){return t instanceof fa&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},fa),ha=(u(la,oa=ia),la.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(la.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),la.prototype.isEqual=function(t){return t instanceof la&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},la);function la(){return null!==oa&&oa.apply(this,arguments)||this}function fa(t,e,n){var r=this;return(r=sa.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function pa(t,e,n,r){var i=this;return(i=aa.call(this,t,e)||this).Ze=n,i.Ge=!!r.Ge,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function da(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new ti(Jr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new ti(Jr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var va=(ya.prototype.on=function(t){return new ya(t,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},ya.prototype.hn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.M())},ya.prototype.an=function(){return!yi(this.limit)&&"F"===this.nn},ya.prototype.un=function(){return!yi(this.limit)&&"L"===this.nn},ya.prototype.cn=function(){return 0<this.en.length?this.en[0].field:null},ya.prototype.ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n._n())return n.field}return null},ya.prototype.fn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(0<=t.indexOf(r.op))return r.op}return null},ya);function ya(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=s,this.endAt=a,this.sn=null,this.rn=null,this.startAt,this.endAt}function ga(t,e,n,r,i,o,s,a){return new va(t,e,n,r,i,o,s,a)}function ma(t){return new va(t)}function ba(t){return null!==t.collectionGroup}function wa(t){var e=da(t,va);if(null===e.sn){e.sn=[];var n=e.ln(),r=e.cn();if(null!==n&&null===r)n.M()||e.sn.push(new ou(n)),e.sn.push(new ou(si.L(),"asc"));else{for(var i,o=!1,s=0,a=e.en;s<a.length;s++){var u=a[s];e.sn.push(u),u.field.M()&&(o=!0)}o||(i=0<e.en.length?e.en[e.en.length-1].dir:"asc",e.sn.push(new ou(si.L(),i)))}}return e.sn}function Ea(t){var e=da(t,va);if(!e.rn)if("F"===e.nn)e.rn=wi(e.path,e.collectionGroup,wa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=wa(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new ou(o.field,s))}var a=e.endAt?new Qa(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Qa(e.startAt.position,!e.startAt.before):null;e.rn=wi(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.rn}function Ia(t,e,n){return new va(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _a(t,e){return new va(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,e,t.endAt)}function Ta(t,e){return new va(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,t.startAt,e)}function Aa(t,e){return Ii(Ea(t),Ea(e))&&t.nn===e.nn}function xa(t){return Ei(Ea(t))+"|lt:"+t.nn}function Na(t){return"Query(target="+(n=(e=Ea(t)).path.F(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.F()+" "+e.op+" "+To(e.value);var e})).join(", ")+"]"),yi(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.F()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+nu(e.startAt)),e.endAt&&(n+=", endAt: "+nu(e.endAt)),"Target("+n+"); limitType=")+t.nn+")";var e,n}function Sa(t,e){return i=t,o=e.key.path,(null!==i.collectionGroup?e.key.W(i.collectionGroup)&&i.path.D(o):ai.j(i.path)?i.path.isEqual(o):i.path.C(o))&&function(e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.M()&&null===e.field(i.field))return}return 1}(e)&&function(e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return;return 1}(e)&&(r=e,(!(n=t).startAt||ru(n.startAt,wa(n),r))&&(!n.endAt||!ru(n.endAt,wa(n),r)));var n,r,i,o}function ka(t){return function(e,n){for(var r=!1,i=0,o=wa(t);i<o.length;i++){var s=o[i],a=function(t,e,n){var r=t.field.M()?ai.P(e.key,n.key):function(t,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Io(r,i):Vr()}(t.field,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Vr()}}(s,e,n);if(0!==a)return a;r=r||s.field.M()}return 0}}var Oa,Da=(u(La,Oa=function(){}),La.create=function(t,e,n){if(t.M())return"in"===e||"not-in"===e?this.dn(t,e,n):new Va(t,e,n);if(Do(n)){if("=="!==e&&"!="!==e)throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new La(t,e,n)}if(Lo(n)){if("=="!==e&&"!="!==e)throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new La(t,e,n)}return"array-contains"===e?new Wa(t,n):"in"===e?new Ka(t,n):"not-in"===e?new Ya(t,n):"array-contains-any"===e?new Xa(t,n):new La(t,e,n)},La.dn=function(t,e,n){return new("in"===e?Ma:Ua)(t,n)},La.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.wn(Io(e,this.value)):null!==e&&bo(this.value)===bo(e)&&this.wn(Io(e,this.value))},La.prototype.wn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Vr()}},La.prototype._n=function(){return 0<=["<","<=",">",">=","!="].indexOf(this.op)},La);function La(t,e,n){var r=this;return(r=Oa.call(this)||this).field=t,r.op=e,r.value=n,r}var Ra,Pa,Ca,Va=(u(za,Ca=Da),za.prototype.matches=function(t){var e=ai.P(t.key,this.key);return this.wn(e)},za),Ma=(u(Fa,Pa=Da),Fa.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},Fa),Ua=(u(ja,Ra=Da),ja.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},ja);function ja(t,e){var n=this;return(n=Ra.call(this,t,"not-in",e)||this).keys=qa(0,e),n}function Fa(t,e){var n=this;return(n=Pa.call(this,t,"in",e)||this).keys=qa(0,e),n}function za(t,e,n){var r=this;return(r=Ca.call(this,t,e,n)||this).key=ai.U(n.referenceValue),r}function qa(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ai.U(t.referenceValue)}))}var Ba,Ga,$a,Ha,Wa=(u(eu,Ha=Da),eu.prototype.matches=function(t){var e=t.field(this.field);return Oo(e)&&Eo(e.arrayValue,this.value)},eu),Ka=(u(tu,$a=Da),tu.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Eo(this.value.arrayValue,e)},tu),Ya=(u(Ja,Ga=Da),Ja.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&!Eo(this.value.arrayValue,e)},Ja),Xa=(u(Za,Ba=Da),Za.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Oo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Eo(e.value.arrayValue,t)}))},Za),Qa=function(t,e){this.position=t,this.before=e};function Za(t,e){return Ba.call(this,t,"array-contains-any",e)||this}function Ja(t,e){return Ga.call(this,t,"not-in",e)||this}function tu(t,e){return $a.call(this,t,"in",e)||this}function eu(t,e){return Ha.call(this,t,"array-contains",e)||this}function nu(t){return(t.before?"b":"a")+":"+t.position.map(To).join(",")}function ru(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.M()?ai.P(ai.U(s.referenceValue),n.key):Io(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function iu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wo(t.position[n],e.position[n]))return!1;return!0}var ou=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},su=(Iu.prototype.En=function(t,e,n){for(var r=n.In,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Rs(o,e,r[i]))}return e},Iu.prototype.mn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ps(i,e,e,this.Tn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Ps(u,e,o,this.Tn))}return e},Iu.prototype.An=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.mn(r.key,t.get(r.key));i&&(n=n.st(r.key,i))})),n},Iu.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ki())},Iu.prototype.isEqual=function(t){return this.batchId===t.batchId&&zr(this.mutations,t.mutations,Cs)&&zr(this.baseMutations,t.baseMutations,Cs)},Iu),au=(Eu.from=function(t,e,n){Mr(t.mutations.length===n.length);for(var r=Hi,i=t.mutations,o=0;o<i.length;o++)r=r.st(i[o].key,n[o].version);return new Eu(t,e,n,r)},Eu),uu=(wu.prototype.catch=function(t){return this.next(void 0,t)},wu.prototype.next=function(t,e){var n=this;return this.pn&&Vr(),this.pn=!0,this.yn?this.error?this.bn(e,this.error):this.vn(t,this.result):new wu((function(r,i){n.gn=function(e){n.vn(t,e).next(r,i)},n.Vn=function(t){n.bn(e,t).next(r,i)}}))},wu.prototype.Sn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},wu.prototype.Dn=function(t){try{var e=t();return e instanceof wu?e:wu.resolve(e)}catch(t){return wu.reject(t)}},wu.prototype.vn=function(t,e){return t?this.Dn((function(){return t(e)})):wu.resolve(e)},wu.prototype.bn=function(t,e){return t?this.Dn((function(){return t(e)})):wu.reject(e)},wu.resolve=function(t){return new wu((function(e,n){e(t)}))},wu.reject=function(t){return new wu((function(e,n){n(t)}))},wu.Cn=function(t){return new wu((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},wu.Nn=function(t){for(var e=wu.resolve(!1),n=0,r=t;n<r.length;n++)!function(t){e=e.next((function(e){return e?wu.resolve(e):t()}))}(r[n]);return e},wu.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Cn(r)},wu),cu=(Object.defineProperty(bu.prototype,"readTime",{get:function(){return this.$n},set:function(t){this.$n=t},enumerable:!1,configurable:!0}),bu.prototype.xn=function(t,e){this.On(),this.readTime=e,this.Fn.set(t.key,t)},bu.prototype.Mn=function(t,e){this.On(),e&&(this.readTime=e),this.Fn.set(t,null)},bu.prototype.Ln=function(t,e){this.On();var n=this.Fn.get(e);return void 0!==n?uu.resolve(n):this.qn(t,e)},bu.prototype.getEntries=function(t,e){return this.Bn(t,e)},bu.prototype.apply=function(t){return this.On(),this.kn=!0,this.Un(t)},bu.prototype.On=function(){},bu),hu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lu=(mu.prototype.Wn=function(t){this.Qn.push(t)},mu.prototype.jn=function(){this.Qn.forEach((function(t){return t()}))},mu),fu=(gu.prototype.Hn=function(t,e){var n=this;return this.Gn.Yn(t,e).next((function(r){return n.Jn(t,e,r)}))},gu.prototype.Jn=function(t,e,n){return this.Kn.Ln(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].mn(e,t);return t}))},gu.prototype.Xn=function(t,e,n){var r=qi;return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].mn(t,e);r=r.st(t,e)})),r},gu.prototype.Zn=function(t,e){var n=this;return this.Kn.getEntries(t,e).next((function(e){return n.ts(t,e)}))},gu.prototype.ts=function(t,e){var n=this;return this.Gn.es(t,e).next((function(r){var i=n.Xn(t,e,r),o=qi;return i.forEach((function(t,e){e=e||new ca(t,ni.min()),o=o.st(t,e)})),o}))},gu.prototype.ns=function(t,e,n){return r=e,ai.j(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ss(t,e.path):ba(e)?this.rs(t,e,n):this.os(t,e,n);var r},gu.prototype.ss=function(t,e){return this.Hn(t,new ai(e)).next((function(t){var e=$i;return t instanceof ua&&(e=e.st(t.key,t)),e}))},gu.prototype.rs=function(t,e,n){var r=this,i=e.collectionGroup,o=$i;return this.zn.hs(t,i).next((function(s){return uu.forEach(s,(function(s){var a=e.on(s.child(i));return r.os(t,a,n).next((function(t){t.forEach((function(t,e){o=o.st(t,e)}))}))})).next((function(){return o}))}))},gu.prototype.os=function(t,e,n){var r,i,o=this;return this.Kn.ns(t,e,n).next((function(n){return r=n,o.Gn.as(t,e)})).next((function(e){return i=e,o.us(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),l=Ps(u,h,h,o.Tn);r=l instanceof ua?r.st(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Sa(e,n)||(r=r.remove(t))})),r}))},gu.prototype.us=function(t,e,n){for(var r=Ki(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Fs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Kn.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ua&&(c=c.st(t,e))})),c}))},gu),pu=(yu._s=function(t,e){for(var n=Ki(),r=Ki(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new yu(t,e.fromCache,n,r)},yu),du=(vu.prototype.ds=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},vu.prototype.next=function(){var t=++this.previousValue;return this.ws&&this.ws(t),t},vu);function vu(t,e){var n=this;this.previousValue=t,e&&(e.fs=function(t){return n.ds(t)},this.ws=function(t){return e.Ts(t)})}function yu(t,e,n,r){this.targetId=t,this.fromCache=e,this.cs=n,this.ls=r}function gu(t,e,n){this.Kn=t,this.Gn=e,this.zn=n}function mu(){this.Qn=[]}function bu(){this.Fn=new Zr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.kn=!1}function wu(t){var e=this;this.gn=null,this.Vn=null,this.result=void 0,this.error=void 0,this.yn=!1,this.pn=!1,t((function(t){e.yn=!0,e.result=t,e.gn&&e.gn(t)}),(function(t){e.yn=!0,e.error=t,e.Vn&&e.Vn(t)}))}function Eu(t,e,n,r){this.batch=t,this.Rn=e,this.In=n,this.Pn=r}function Iu(t,e,n,r){this.batchId=t,this.Tn=e,this.baseMutations=n,this.mutations=r}function _u(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}du.Es=-1;var Tu,Au=(Lu.prototype.reset=function(){this.gs=0},Lu.prototype.ps=function(){this.gs=this.Ps},Lu.prototype.bs=function(t){var e=this;this.cancel();var n=Math.floor(this.gs+this.vs()),r=Math.max(0,Date.now()-this.ys),i=Math.max(0,n-r);0<i&&Lr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.gs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Vs=this.Is.Ss(this.ms,i,(function(){return e.ys=Date.now(),t()})),this.gs*=this.Rs,this.gs<this.As&&(this.gs=this.As),this.gs>this.Ps&&(this.gs=this.Ps)},Lu.prototype.Ds=function(){null!==this.Vs&&(this.Vs.Cs(),this.Vs=null)},Lu.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},Lu.prototype.vs=function(){return(Math.random()-.5)*this.gs},Lu),xu=(Du.delete=function(t){return Lr("SimpleDb","Removing database:",t),Uu(window.indexedDB.deleteDatabase(t)).Sn()},Du.ks=function(){if("undefined"==typeof indexedDB)return!1;if(Du.$s())return!0;var t=b(),e=Du.Fs(t),n=0<e&&e<10,r=Du.xs(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},Du.$s=function(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.Os)},Du.Ms=function(t,e){return t.store(e)},Du.Fs=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Du.xs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Du.prototype.Ls=function(){return c(this,void 0,void 0,(function(){var t,e=this;return h(this,(function(n){switch(n.label){case 0:return this.db?[3,2]:(Lr("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,n){var r=indexedDB.open(e.name,e.version);r.onsuccess=function(e){var n=e.target.result;t(n)},r.onblocked=function(){n(new Su("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){var e=t.target.error;"VersionError"===e.name?n(new ti(Jr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new Su(e))},r.onupgradeneeded=function(t){Lr("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;e.Ns.createOrUpgrade(n,r.transaction,t.oldVersion,e.version).next((function(){Lr("SimpleDb","Database upgrade to version "+e.version+" complete")}))}}))]);case 1:t.db=n.sent(),n.label=2;case 2:return[2,(this.qs&&(this.db.onversionchange=function(t){return e.qs(t)}),this.db)]}}))}))},Du.prototype.Bs=function(t){this.qs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},Du.prototype.runTransaction=function(t,e,n){return c(this,void 0,void 0,(function(){var r,i,o,s,a;return h(this,(function(u){switch(u.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,a,u,c;return h(this,(function(h){switch(h.label){case 0:++i,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.Ls()];case 2:return s.db=h.sent(),t=Pu.open(s.db,r?"readonly":"readwrite",e),o=n(t).catch((function(e){return t.abort(e),uu.reject(e)})).Sn(),a={},o.catch((function(){})),[4,t.Us];case 3:return[2,(a.value=(h.sent(),o),a)];case 4:return u=h.sent(),c="FirebaseError"!==u.name&&i<3,Lr("SimpleDb","Transaction failed with error: %s. Retrying: %s.",u.message,c),s.close(),c?[3,5]:[2,{value:Promise.reject(u)}];case 5:return[2]}}))},s=this,u.label=1;case 1:return[5,o()];case 2:if("object"==typeof(a=u.sent()))return[2,a.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},Du.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},Du),Nu=(Object.defineProperty(Ou.prototype,"yn",{get:function(){return this.Ws},enumerable:!1,configurable:!0}),Object.defineProperty(Ou.prototype,"Ks",{get:function(){return this.js},enumerable:!1,configurable:!0}),Object.defineProperty(Ou.prototype,"cursor",{set:function(t){this.Qs=t},enumerable:!1,configurable:!0}),Ou.prototype.done=function(){this.Ws=!0},Ou.prototype.Gs=function(t){this.js=t},Ou.prototype.delete=function(){return Uu(this.Qs.delete())},Ou),Su=(u(ku,Tu=ti),ku);function ku(t){var e=this;return(e=Tu.call(this,Jr.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function Ou(t){this.Qs=t,this.Ws=!1,this.js=null}function Du(t,e,n){this.name=t,this.version=e,this.Ns=n,12.2===Du.Fs(b())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Lu(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Is=t,this.ms=e,this.As=n,this.Rs=r,this.Ps=i,this.gs=0,this.Vs=null,this.ys=Date.now(),this.reset()}function Ru(t){return"IndexedDbTransactionError"===t.name}var Pu=(Mu.open=function(t,e,n){try{return new Mu(t.transaction(n,e))}catch(t){throw new Su(t)}},Object.defineProperty(Mu.prototype,"Us",{get:function(){return this.zs.promise},enumerable:!1,configurable:!0}),Mu.prototype.abort=function(t){t&&this.zs.reject(t),this.aborted||(Lr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Mu.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Cu(e)},Mu),Cu=(Vu.prototype.put=function(t,e){return Uu(void 0!==e?(Lr("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Lr("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},Vu.prototype.add=function(t){return Lr("SimpleDb","ADD",this.store.name,t,t),Uu(this.store.add(t))},Vu.prototype.get=function(t){var e=this;return Uu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Lr("SimpleDb","GET",e.store.name,t,n),n}))},Vu.prototype.delete=function(t){return Lr("SimpleDb","DELETE",this.store.name,t),Uu(this.store.delete(t))},Vu.prototype.count=function(){return Lr("SimpleDb","COUNT",this.store.name),Uu(this.store.count())},Vu.prototype.Hs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ys(n,(function(t,e){r.push(e)})).next((function(){return r}))},Vu.prototype.Js=function(t,e){Lr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Xs=!1;var r=this.cursor(n);return this.Ys(r,(function(t,e,n){return n.delete()}))},Vu.prototype.Zs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ys(r,e)},Vu.prototype.ti=function(t){var e=this.cursor({});return new uu((function(n,r){e.onerror=function(t){var e=Fu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},Vu.prototype.Ys=function(t,e){var n=[];return new uu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i,o,s,a=t.target.result;a?(i=new Nu(a),(o=e(a.primaryKey,a.value,i))instanceof uu&&(s=o.catch((function(t){return i.done(),uu.reject(t)})),n.push(s)),i.yn?r():null===i.Ks?a.continue():a.continue(i.Ks)):r()}})).next((function(){return uu.Cn(n)}))},Vu.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},Vu.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Xs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},Vu);function Vu(t){this.store=t}function Mu(t){var e=this;this.transaction=t,this.aborted=!1,this.zs=new _u,this.transaction.oncomplete=function(){e.zs.resolve()},this.transaction.onabort=function(){t.error?e.zs.reject(new Su(t.error)):e.zs.resolve()},this.transaction.onerror=function(t){var n=Fu(t.target.error);e.zs.reject(new Su(n))}}function Uu(t){return new uu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Fu(t.target.error);n(e)}}))}var ju=!1;function Fu(t){var e=xu.Fs(b());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new ti("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ju||(ju=!0,setTimeout((function(){throw r}),0)),r}}return t}function zu(){return"undefined"!=typeof window?window:null}function qu(){return"undefined"!=typeof document?document:null}var Bu=(Hu.ri=function(t,e,n,r,i){var o=new Hu(t,e,Date.now()+n,r,i);return o.start(n),o},Hu.prototype.start=function(t){var e=this;this.oi=setTimeout((function(){return e.hi()}),t)},Hu.prototype.Cs=function(){return this.hi()},Hu.prototype.cancel=function(t){null!==this.oi&&(this.clearTimeout(),this.ii.reject(new ti(Jr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Hu.prototype.hi=function(){var t=this;this.ei.ai((function(){return null!==t.oi?(t.clearTimeout(),t.op().then((function(e){return t.ii.resolve(e)}))):Promise.resolve()}))},Hu.prototype.clearTimeout=function(){null!==this.oi&&(this.si(this),clearTimeout(this.oi),this.oi=null)},Hu),Gu=(Object.defineProperty($u.prototype,"Ii",{get:function(){return this.li},enumerable:!1,configurable:!0}),$u.prototype.ai=function(t){this.enqueue(t)},$u.prototype.mi=function(t){this.Ai(),this.Ri(t)},$u.prototype.Pi=function(){var t;this.li||(this.li=!0,(t=qu())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ei))},$u.prototype.enqueue=function(t){return this.Ai(),this.li?new Promise((function(t){})):this.Ri(t)},$u.prototype.gi=function(t){var e=this;this.ci.push(t),this.ai((function(){return e.Vi()}))},$u.prototype.Vi=function(){return c(this,void 0,void 0,(function(){var t,e=this;return h(this,(function(n){switch(n.label){case 0:if(0===this.ci.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ci[0]()];case 2:return n.sent(),this.ci.shift(),this.Ti.reset(),[3,4];case 3:if(!Ru(t=n.sent()))throw t;return Lr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:0<this.ci.length&&this.Ti.bs((function(){return e.Vi()})),n.label=5;case 5:return[2]}}))}))},$u.prototype.Ri=function(t){var e=this,n=this.ui.then((function(){return e.di=!0,t().catch((function(t){throw e.fi=t,e.di=!1,Rr("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.di=!1,t}))}));return this.ui=n},$u.prototype.Ss=function(t,e,n){var r=this;this.Ai(),-1<this.wi.indexOf(t)&&(e=0);var i=Bu.ri(this,t,e,n,(function(t){return r.yi(t)}));return this._i.push(i),i},$u.prototype.Ai=function(){this.fi&&Vr()},$u.prototype.pi=function(){},$u.prototype.bi=function(){return c(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return[4,t=this.ui];case 1:e.sent(),e.label=2;case 2:if(t!==this.ui)return[3,0];e.label=3;case 3:return[2]}}))}))},$u.prototype.vi=function(t){for(var e=0,n=this._i;e<n.length;e++)if(n[e].ms===t)return!0;return!1},$u.prototype.Si=function(t){var e=this;return this.bi().then((function(){e._i.sort((function(t,e){return t.ni-e.ni}));for(var n=0,r=e._i;n<r.length;n++){var i=r[n];if(i.Cs(),"all"!==t&&i.ms===t)break}return e.bi()}))},$u.prototype.Di=function(t){this.wi.push(t)},$u.prototype.yi=function(t){var e=this._i.indexOf(t);this._i.splice(e,1)},$u);function $u(){var t=this;this.ui=Promise.resolve(),this.ci=[],this.li=!1,this._i=[],this.fi=null,this.di=!1,this.wi=[],this.Ti=new Au(this,"async_queue_retry"),this.Ei=function(){var e=qu();e&&Lr("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Ti.Ds()};var e=qu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ei)}function Hu(t,e,n,r,i){this.ei=t,this.ms=e,this.ni=n,this.op=r,this.si=i,this.ii=new _u,this.then=this.ii.promise.then.bind(this.ii.promise),this.ii.promise.catch((function(t){}))}function Wu(t,e){if(Rr("AsyncQueue",e+": "+t),Ru(t))return new ti(Jr.UNAVAILABLE,e+": "+t);throw t}function Ku(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Fr(n,i);return 0===s?Fr(r,o):s}var Yu=(Ju.prototype.Fi=function(){return++this.Ni},Ju.prototype.ki=function(t){var e,n=[t,this.Fi()];this.buffer.size<this.Ci?this.buffer=this.buffer.add(n):Ku(n,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(n))},Object.defineProperty(Ju.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),Ju),Xu={$i:!1,xi:0,Oi:0,Mi:0},Qu=(Zu.Ui=function(t){return new Zu(t,Zu.Qi,Zu.Wi)},Zu);function Zu(t,e,n){this.Li=t,this.qi=e,this.Bi=n}function Ju(t){this.Ci=t,this.buffer=new Fi(Ku),this.Ni=0}Qu.ji=-1,Qu.Ki=1048576,Qu.Gi=41943040,Qu.Qi=10,Qu.Wi=1e3,Qu.zi=new Qu(Qu.Gi,Qu.Qi,Qu.Wi),Qu.Hi=new Qu(Qu.ji,0,0);var tc=(rc.prototype.start=function(t){this.Yi.params.Li!==Qu.ji&&this.Zi(t)},rc.prototype.stop=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},Object.defineProperty(rc.prototype,"tr",{get:function(){return null!==this.Xi},enumerable:!1,configurable:!0}),rc.prototype.Zi=function(t){var e=this,n=this.Ji?3e5:6e4;Lr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Xi=this.ei.Ss("lru_garbage_collection",n,(function(){return c(e,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:this.Xi=null,this.Ji=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.er(this.Yi)];case 2:return n.sent(),[3,7];case 3:return Ru(e=n.sent())?(Lr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Lh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Zi(t)];case 8:return n.sent(),[2]}}))}))}))},rc),ec=(nc.prototype.sr=function(t,e){return this.nr.ir(t).next((function(t){return Math.floor(e/100*t)}))},nc.prototype.rr=function(t,e){var n=this;if(0===e)return uu.resolve(du.Es);var r=new Yu(e);return this.nr.be(t,(function(t){return r.ki(t.sequenceNumber)})).next((function(){return n.nr.or(t,(function(t){return r.ki(t)}))})).next((function(){return r.maxValue}))},nc.prototype.hr=function(t,e,n){return this.nr.hr(t,e,n)},nc.prototype.ar=function(t,e){return this.nr.ar(t,e)},nc.prototype.ur=function(t,e){var n=this;return this.params.Li===Qu.ji?(Lr("LruGarbageCollector","Garbage collection skipped; disabled"),uu.resolve(Xu)):this.cr(t).next((function(r){return r<n.params.Li?(Lr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Li),Xu):n.lr(t,e)}))},nc.prototype.cr=function(t){return this.nr.cr(t)},nc.prototype.lr=function(t,e){var n,r,o,s,a,u,c,h=this,l=Date.now();return this.sr(t,this.params.qi).next((function(e){return r=e>h.params.Bi?(Lr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Bi+" from "+e),h.params.Bi):e,s=Date.now(),h.rr(t,r)})).next((function(r){return n=r,a=Date.now(),h.hr(t,n,e)})).next((function(e){return o=e,u=Date.now(),h.ar(t,n)})).next((function(t){return c=Date.now(),Dr()<=i.DEBUG&&Lr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),uu.resolve({$i:!0,xi:r,Oi:o,Mi:t})}))},nc);function nc(t,e){this.nr=t,this.params=e}function rc(t,e){this.Yi=t,this.ei=e,this.Ji=!1,this.Xi=null}function ic(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=oc(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return oc(e)}function oc(t){return t+""}function sc(t){var e=t.length;if(Mr(2<=e),2===e)return Mr(""===t.charAt(0)&&""===t.charAt(1)),ii.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Vr(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Vr()}o=s+2}return new ii(r)}var ac=function(t){this._r=t};function uc(t,e){if(e.document)return n=t._r,r=e.document,i=!!e.hasCommittedMutations,o=Ho(n,r.name),s=qo(r.updateTime),a=new Zs({mapValue:{fields:r.fields}}),new ua(o,s,a,{hasCommittedMutations:!!i});var n,r,i,o,s,a;if(e.noDocument){var u=ai.K(e.noDocument.path),c=pc(e.noDocument.readTime);return new ca(u,c,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var h=ai.K(e.unknownDocument.path),l=pc(e.unknownDocument.version);return new ha(h,l)}return Vr()}function cc(t,e,n){var r,i,o=hc(n),s=e.key.path.p().N();if(e instanceof ua){var a={name:$o(r=t._r,(i=e).key),fields:i.tn().mapValue.fields,updateTime:Fo(r,i.version.A())},u=e.hasCommittedMutations;return new Hc(null,null,a,u,o,s)}if(e instanceof ca){var c=e.key.path.N(),h=fc(e.version),l=e.hasCommittedMutations;return new Hc(null,new Gc(c,h),null,l,o,s)}if(e instanceof ha){var f=e.key.path.N(),p=fc(e.version);return new Hc(new $c(f,p),null,null,!0,o,s)}return Vr()}function hc(t){var e=t.A();return[e.seconds,e.nanoseconds]}function lc(t){var e=new ei(t[0],t[1]);return ni.I(e)}function fc(t){var e=t.A();return new Cc(e.seconds,e.nanoseconds)}function pc(t){var e=new ei(t.seconds,t.nanoseconds);return ni.I(e)}function dc(t,e){var n=(e.baseMutations||[]).map((function(e){return Jo(t._r,e)})),r=e.mutations.map((function(e){return Jo(t._r,e)})),i=ei.fromMillis(e.localWriteTimeMs);return new su(e.batchId,i,n,r)}function vc(t){var e,n=pc(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?pc(t.lastLimboFreeSnapshotVersion):ni.min(),i=void 0!==t.query.documents?(Mr(1===(e=t.query).documents.length),Ea(ma(Ko(e.documents[0])))):function(t){var e,n=Ko(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,o=null;0<i&&(Mr(1===i),(e=r.from[0]).allDescendants?o=e.collectionId:n=n.child(e.collectionId));var s=[];r.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=os(t.unaryFilter.field);return Da.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=os(t.unaryFilter.field);return Da.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=os(t.unaryFilter.field);return Da.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=os(t.unaryFilter.field);return Da.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Vr()}}(e)]:void 0!==e.fieldFilter?[(n=e,Da.create(os(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Vr()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce((function(t,e){return t.concat(e)})):Vr():[];var n}(r.where));var a=[];r.orderBy&&(a=r.orderBy.map((function(t){return new ou(os((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})));var u,c,h=null;r.limit&&(h=yi(c="object"==typeof(u=r.limit)?u.value:u)?null:c);var l=null;r.startAt&&(l=rs(r.startAt));var f=null;return r.endAt&&(f=rs(r.endAt)),Ea(ga(n,o,a,s,h,"F",l,f))}(t.query);return new ki(i,t.targetId,0,t.lastListenSequenceNumber,n,r,Ti.fromBase64String(t.resumeToken))}function yc(t,e){var n=fc(e.Z),r=fc(e.lastLimboFreeSnapshotVersion),i=(_i(e.target)?ts:es)(t._r,e.target),o=e.resumeToken.toBase64();return new Kc(e.targetId,Ei(e.target),n,o,e.sequenceNumber,r,i)}var gc=(mc.Tr=function(t,e,n,r){return Mr(""!==t.uid),new mc(t.Er()?t.uid:"",e,n,r)},mc.prototype.Ir=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ec(t).Zs({index:zc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},mc.prototype.mr=function(t,e,n,r){var i=this,o=Ic(t),s=Ec(t);return s.add({}).next((function(a){Mr("number"==typeof a);for(var u,c,h,l,f,p=new su(a,e,n,r),d=(u=i.serializer,c=i.userId,l=(h=p).baseMutations.map((function(t){return Zo(u._r,t)})),f=h.mutations.map((function(t){return Zo(u._r,t)})),new zc(c,h.batchId,h.Tn.toMillis(),l,f)),v=[],y=new Fi((function(t,e){return Fr(t.F(),e.F())})),g=0,m=r;g<m.length;g++){var b=m[g],w=qc.key(i.userId,b.key.path,a);y=y.add(b.key.path.p()),v.push(s.put(d)),v.push(o.put(w,qc.PLACEHOLDER))}return y.forEach((function(e){v.push(i.zn.Ar(t,e))})),t.Wn((function(){i.wr[a]=p.keys()})),uu.Cn(v).next((function(){return p}))}))},mc.prototype.Rr=function(t,e){var n=this;return Ec(t).get(e).next((function(t){return t?(Mr(t.userId===n.userId),dc(n.serializer,t)):null}))},mc.prototype.Pr=function(t,e){var n=this;return this.wr[e]?uu.resolve(this.wr[e]):this.Rr(t,e).next((function(t){if(t){var r=t.keys();return n.wr[e]=r}return null}))},mc.prototype.gr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ec(t).Zs({index:zc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Mr(e.batchId>=r),o=dc(n.serializer,e)),i.done()})).next((function(){return o}))},mc.prototype.Vr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ec(t).Zs({index:zc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},mc.prototype.yr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ec(t).Hs(zc.userMutationsIndex,n).next((function(t){return t.map((function(t){return dc(e.serializer,t)}))}))},mc.prototype.Yn=function(t,e){var n=this,r=qc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ic(t).Zs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=sc(u);if(a===n.userId&&e.path.isEqual(h))return Ec(t).get(c).next((function(t){if(!t)throw Vr();Mr(t.userId===n.userId),o.push(dc(n.serializer,t))}));s.done()})).next((function(){return o}))},mc.prototype.es=function(t,e){var n=this,r=new Fi(Fr),i=[];return e.forEach((function(e){var o=qc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ic(t).Zs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=sc(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),uu.Cn(i).next((function(){return n.pr(t,r)}))},mc.prototype.as=function(t,e){var n=this,r=e.path,i=r.length+1,o=qc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Fi(Fr);return Ic(t).Zs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=sc(u);s===n.userId&&r.D(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.pr(t,a)}))},mc.prototype.pr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ec(t).get(e).next((function(t){if(null===t)throw Vr();Mr(t.userId===n.userId),r.push(dc(n.serializer,t))})))})),uu.Cn(i).next((function(){return r}))},mc.prototype.br=function(t,e){var n=this;return wc(t.vr,this.userId,e).next((function(r){return t.Wn((function(){n.Sr(e.batchId)})),uu.forEach(r,(function(e){return n.dr.Dr(t,e)}))}))},mc.prototype.Sr=function(t){delete this.wr[t]},mc.prototype.Cr=function(t){var e=this;return this.Ir(t).next((function(n){if(!n)return uu.resolve();var r=IDBKeyRange.lowerBound(qc.prefixForUser(e.userId)),i=[];return Ic(t).Zs({range:r},(function(t,n,r){var o;t[0]===e.userId?(o=sc(t[1]),i.push(o)):r.done()})).next((function(){Mr(0===i.length)}))}))},mc.prototype.Nr=function(t,e){return bc(t,this.userId,e)},mc.prototype.Fr=function(t){var e=this;return _c(t).get(this.userId).next((function(t){return t||new Fc(e.userId,-1,"")}))},mc);function mc(t,e,n,r){this.userId=t,this.serializer=e,this.zn=n,this.dr=r,this.wr={}}function bc(t,e,n){var r=qc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ic(t).Zs({range:o,Xs:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function wc(t,e,n){var r=t.store(zc.store),i=t.store(qc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Zs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Mr(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=qc.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return uu.Cn(o).next((function(){return c}))}function Ec(t){return dh.Ms(t,zc.store)}function Ic(t){return dh.Ms(t,qc.store)}function _c(t){return dh.Ms(t,Fc.store)}var Tc,Ac=(xc.prototype.xn=function(t,e,n){return Sc(t).put(kc(e),n)},xc.prototype.Mn=function(t,e){var n=Sc(t),r=kc(e);return n.delete(r)},xc.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},xc.prototype.Ln=function(t,e){var n=this;return Sc(t).get(kc(e)).next((function(t){return n.$r(t)}))},xc.prototype.xr=function(t,e){var n=this;return Sc(t).get(kc(e)).next((function(t){var e=n.$r(t);return e?{Or:e,size:Oc(t)}:null}))},xc.prototype.getEntries=function(t,e){var n=this,r=qi;return this.Mr(t,e,(function(t,e){var i=n.$r(e);r=r.st(t,i)})).next((function(){return r}))},xc.prototype.Lr=function(t,e){var n=this,r=qi,i=new Ri(ai.P);return this.Mr(t,e,(function(t,e){var o=n.$r(e);i=o?(r=r.st(t,o),i.st(t,Oc(e))):(r=r.st(t,null),i.st(t,0))})).next((function(){return{qr:r,Br:i}}))},xc.prototype.Mr=function(t,e,n){if(e._())return uu.resolve();var r=IDBKeyRange.bound(e.first().path.N(),e.last().path.N()),i=e.ut(),o=i.wt();return Sc(t).Zs({range:r},(function(t,e,r){for(var s=ai.K(t);o&&ai.P(o,s)<0;)n(o,null),o=i.wt();o&&o.isEqual(s)&&(n(o,e),o=i.Tt()?i.wt():null),o?r.Gs(o.path.N()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Tt()?i.wt():null}))},xc.prototype.ns=function(t,e,n){var r,i,o,s=this,a=$i,u=e.path.length+1,c={};return n.isEqual(ni.min())?(r=e.path.N(),c.range=IDBKeyRange.lowerBound(r)):(i=e.path.N(),o=hc(n),c.range=IDBKeyRange.lowerBound([i,o],!0),c.index=Hc.collectionReadTimeIndex),Sc(t).Zs(c,(function(t,n,r){var i;t.length===u&&(i=uc(s.serializer,n),e.path.D(i.key.path)?i instanceof ua&&Sa(e,i)&&(a=a.st(i.key,i)):r.done())})).next((function(){return a}))},xc.prototype.Ur=function(t,e){var n=this,r=qi,i=hc(e),o=Sc(t),s=IDBKeyRange.lowerBound(i,!0);return o.Zs({index:Hc.readTimeIndex,range:s},(function(t,e){var o=uc(n.serializer,e);r=r.st(o.key,o),i=e.readTime})).next((function(){return{Qr:r,readTime:lc(i)}}))},xc.prototype.Wr=function(t){var e=Sc(t),n=ni.min();return e.Zs({index:Hc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=lc(e.readTime)),r.done()})).next((function(){return n}))},xc.prototype.jr=function(t){return new xc.Kr(this,!!t&&t.Gr)},xc.prototype.zr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},xc.prototype.getMetadata=function(t){return Nc(t).get(Wc.key).next((function(t){return Mr(!!t),t}))},xc.prototype.kr=function(t,e){return Nc(t).put(Wc.key,e)},xc.prototype.$r=function(t){if(t){var e=uc(this.serializer,t);return e instanceof ca&&e.version.isEqual(ni.min())?null:e}return null},xc);function xc(t,e){this.serializer=t,this.zn=e}function Nc(t){return dh.Ms(t,Wc.store)}function Sc(t){return dh.Ms(t,Hc.store)}function kc(t){return t.path.N()}function Oc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Vr();e=t.noDocument}return JSON.stringify(e).length}function Dc(t,e){var n=this;return(n=Tc.call(this)||this).Hr=t,n.Gr=e,n.Yr=new Zr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),n}Ac.Kr=(u(Dc,Tc=cu),Dc.prototype.Un=function(t){var e=this,n=[],r=0,i=new Fi((function(t,e){return Fr(t.F(),e.F())}));return this.Fn.forEach((function(o,s){var a,u,c,h=e.Yr.get(o);s?(a=cc(e.Hr.serializer,s,e.readTime),i=i.add(o.path.p()),u=Oc(a),r+=u-h,n.push(e.Hr.xn(t,o,a))):(r-=h,e.Gr?(c=cc(e.Hr.serializer,new ca(o,ni.min()),e.readTime),n.push(e.Hr.xn(t,o,c))):n.push(e.Hr.Mn(t,o)))})),i.forEach((function(r){n.push(e.Hr.zn.Ar(t,r))})),n.push(this.Hr.updateMetadata(t,r)),uu.Cn(n)},Dc.prototype.qn=function(t,e){var n=this;return this.Hr.xr(t,e).next((function(t){return null===t?(n.Yr.set(e,0),null):(n.Yr.set(e,t.size),t.Or)}))},Dc.prototype.Bn=function(t,e){var n=this;return this.Hr.Lr(t,e).next((function(t){var e=t.qr;return t.Br.forEach((function(t,e){n.Yr.set(t,e)})),e}))},Dc);var Lc=(jc.prototype.Ar=function(t,e){return this.Jr.add(e),uu.resolve()},jc.prototype.hs=function(t,e){return uu.resolve(this.Jr.getEntries(e))},jc),Rc=(Uc.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new Fi(ii.P),i=!r.has(n);return this.index[e]=r.add(n),i},Uc.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},Uc.prototype.getEntries=function(t){return(this.index[t]||new Fi(ii.P)).N()},Uc),Pc=(Mc.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Mr(n<r&&0<=n&&r<=10);var o,s=new Pu(e);n<1&&1<=r&&(t.createObjectStore(Vc.store),(o=t).createObjectStore(Fc.store,{keyPath:Fc.keyPath}),o.createObjectStore(zc.store,{keyPath:zc.keyPath,autoIncrement:!0}).createIndex(zc.userMutationsIndex,zc.userMutationsKeyPath,{unique:!0}),o.createObjectStore(qc.store),Zc(t),t.createObjectStore(Hc.store));var a,u=uu.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(Yc.store),a.deleteObjectStore(Kc.store),a.deleteObjectStore(Xc.store),Zc(t)),u=u.next((function(){return t=s.store(Xc.store),e=new Xc(0,0,ni.min().A(),0),t.put(Xc.key,e);var t,e}))),n<4&&4<=r&&(0!==n&&(u=u.next((function(){return e=t,(n=s).store(zc.store).Hs().next((function(t){e.deleteObjectStore(zc.store),e.createObjectStore(zc.store,{keyPath:zc.keyPath,autoIncrement:!0}).createIndex(zc.userMutationsIndex,zc.userMutationsKeyPath,{unique:!0});var r=n.store(zc.store),i=t.map((function(t){return r.put(t)}));return uu.Cn(i)}));var e,n}))),u=u.next((function(){t.createObjectStore(Jc.store,{keyPath:Jc.keyPath})}))),n<5&&5<=r&&(u=u.next((function(){return i.removeAcknowledgedMutations(s)}))),n<6&&6<=r&&(u=u.next((function(){return t.createObjectStore(Wc.store),i.addDocumentGlobal(s)}))),n<7&&7<=r&&(u=u.next((function(){return i.ensureSequenceNumbers(s)}))),n<8&&8<=r&&(u=u.next((function(){return i.createCollectionParentIndex(t,s)}))),n<9&&9<=r&&(u=u.next((function(){var n,r;(r=t).objectStoreNames.contains("remoteDocumentChanges")&&r.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(Hc.store)).createIndex(Hc.readTimeIndex,Hc.readTimeIndexPath,{unique:!1}),n.createIndex(Hc.collectionReadTimeIndex,Hc.collectionReadTimeIndexPath,{unique:!1})}))),n<10&&10<=r&&(u=u.next((function(){return i.rewriteCanonicalIds(s)}))),u},Mc.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Hc.store).Zs((function(t,n){e+=Oc(n)})).next((function(){var n=new Wc(e);return t.store(Wc.store).put(Wc.key,n)}))},Mc.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Fc.store),r=t.store(zc.store);return n.Hs().next((function(n){return uu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Hs(zc.userMutationsIndex,i).next((function(r){return uu.forEach(r,(function(r){Mr(r.userId===n.userId);var i=dc(e.serializer,r);return wc(t,n.userId,i).next((function(){}))}))}))}))}))},Mc.prototype.ensureSequenceNumbers=function(t){var e=t.store(Yc.store),n=t.store(Hc.store);return t.store(Xc.store).get(Xc.key).next((function(t){var r=[];return n.Zs((function(n,i){var o=new ii(n),s=[0,ic(o)];r.push(e.get(s).next((function(n){return n?uu.resolve():e.put(new Yc(0,ic(o),t.highestListenSequenceNumber))})))})).next((function(){return uu.Cn(r)}))}))},Mc.prototype.createCollectionParentIndex=function(t,e){function n(t){if(i.add(t)){var e=t.S(),n=t.p();return r.put({collectionId:e,parent:ic(n)})}}t.createObjectStore(Qc.store,{keyPath:Qc.keyPath});var r=e.store(Qc.store),i=new Rc;return e.store(Hc.store).Zs({Xs:!0},(function(t,e){return n(new ii(t).p())})).next((function(){return e.store(qc.store).Zs({Xs:!0},(function(t,e){t[0];var r=t[1];return n((t[2],sc(r)).p())}))}))},Mc.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Kc.store);return n.Zs((function(t,r){var i=vc(r),o=yc(e.serializer,i);return n.put(o)}))},Mc),Cc=function(t,e){this.seconds=t,this.nanoseconds=e},Vc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function Mc(t){this.serializer=t}function Uc(){this.index={}}function jc(){this.Jr=new Rc}Vc.store="owner",Vc.key="owner";var Fc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Fc.store="mutationQueues",Fc.keyPath="userId";var zc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};zc.store="mutations",zc.keyPath="batchId",zc.userMutationsIndex="userMutationsIndex",zc.userMutationsKeyPath=["userId","batchId"];var qc=(Bc.prefixForUser=function(t){return[t]},Bc.prefixForPath=function(t,e){return[t,ic(e)]},Bc.key=function(t,e,n){return[t,ic(e),n]},Bc);function Bc(){}qc.store="documentMutations",qc.PLACEHOLDER=new qc;var Gc=function(t,e){this.path=t,this.readTime=e},$c=function(t,e){this.path=t,this.version=e},Hc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Hc.store="remoteDocuments",Hc.readTimeIndex="readTimeIndex",Hc.readTimeIndexPath="readTime",Hc.collectionReadTimeIndex="collectionReadTimeIndex",Hc.collectionReadTimeIndexPath=["parentPath","readTime"];var Wc=function(t){this.byteSize=t};Wc.store="remoteDocumentGlobal",Wc.key="remoteDocumentGlobalKey";var Kc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Kc.store="targets",Kc.keyPath="targetId",Kc.queryTargetsIndexName="queryTargetsIndex",Kc.queryTargetsKeyPath=["canonicalId","targetId"];var Yc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Yc.store="targetDocuments",Yc.keyPath=["targetId","path"],Yc.documentTargetsIndex="documentTargetsIndex",Yc.documentTargetsKeyPath=["path","targetId"];var Xc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Xc.key="targetGlobalKey",Xc.store="targetGlobal";var Qc=function(t,e){this.collectionId=t,this.parent=e};function Zc(t){t.createObjectStore(Yc.store,{keyPath:Yc.keyPath}).createIndex(Yc.documentTargetsIndex,Yc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Kc.store,{keyPath:Kc.keyPath}).createIndex(Kc.queryTargetsIndexName,Kc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Xc.store)}Qc.store="collectionParents",Qc.keyPath=["collectionId","parent"];var Jc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Jc.store="clientMetadata",Jc.keyPath="clientId";var th=l(l(l([Fc.store,zc.store,qc.store,Hc.store,Kc.store,Vc.store,Xc.store,Yc.store],[Jc.store]),[Wc.store]),[Qc.store]),eh=(nh.prototype.Ar=function(t,e){var n=this;if(this.Xr.has(e))return uu.resolve();var r=e.S(),i=e.p();t.Wn((function(){n.Xr.add(e)}));var o={collectionId:r,parent:ic(i)};return rh(t).put(o)},nh.prototype.hs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[qr(e),""],!1,!0);return rh(t).Hs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(sc(o.parent))}return n}))},nh);function nh(){this.Xr=new Rc}function rh(t){return dh.Ms(t,Qc.store)}var ih=(ah.prototype.next=function(){return this.Zr+=2,this.Zr},ah.to=function(){return new ah(0)},ah.eo=function(){return new ah(-1)},ah),oh=(sh.prototype.no=function(t){var e=this;return this.so(t).next((function(n){var r=new ih(n.highestTargetId);return n.highestTargetId=r.next(),e.io(t,n).next((function(){return n.highestTargetId}))}))},sh.prototype.ro=function(t){return this.so(t).next((function(t){return ni.I(new ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},sh.prototype.oo=function(t){return this.so(t).next((function(t){return t.highestListenSequenceNumber}))},sh.prototype.ho=function(t,e,n){var r=this;return this.so(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.io(t,i)}))},sh.prototype.ao=function(t,e){var n=this;return this.uo(t,e).next((function(){return n.so(t).next((function(r){return r.targetCount+=1,n.co(e,r),n.io(t,r)}))}))},sh.prototype.lo=function(t,e){return this.uo(t,e)},sh.prototype._o=function(t,e){var n=this;return this.fo(t,e.targetId).next((function(){return uh(t).delete(e.targetId)})).next((function(){return n.so(t)})).next((function(e){return Mr(0<e.targetCount),--e.targetCount,n.io(t,e)}))},sh.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return uh(t).Zs((function(s,a){var u=vc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r._o(t,u)))})).next((function(){return uu.Cn(o)})).next((function(){return i}))},sh.prototype.be=function(t,e){return uh(t).Zs((function(t,n){var r=vc(n);e(r)}))},sh.prototype.so=function(t){return ch(t).get(Xc.key).next((function(t){return Mr(null!==t),t}))},sh.prototype.io=function(t,e){return ch(t).put(Xc.key,e)},sh.prototype.uo=function(t,e){return uh(t).put(yc(this.serializer,e))},sh.prototype.co=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},sh.prototype.do=function(t){return this.so(t).next((function(t){return t.targetCount}))},sh.prototype.wo=function(t,e){var n=Ei(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return uh(t).Zs({range:r,index:Kc.queryTargetsIndexName},(function(t,n,r){var o=vc(n);Ii(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},sh.prototype.To=function(t,e,n){var r=this,i=[],o=hh(t);return e.forEach((function(e){var s=ic(e.path);i.push(o.put(new Yc(n,s))),i.push(r.dr.Eo(t,n,e))})),uu.Cn(i)},sh.prototype.Io=function(t,e,n){var r=this,i=hh(t);return uu.forEach(e,(function(e){var o=ic(e.path);return uu.Cn([i.delete([n,o]),r.dr.mo(t,n,e)])}))},sh.prototype.fo=function(t,e){var n=hh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},sh.prototype.Ao=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=hh(t),i=Ki();return r.Zs({range:n,Xs:!0},(function(t,e,n){var r=sc(t[1]),o=new ai(r);i=i.add(o)})).next((function(){return i}))},sh.prototype.Nr=function(t,e){var n=ic(e.path),r=IDBKeyRange.bound([n],[qr(n)],!1,!0),i=0;return hh(t).Zs({index:Yc.documentTargetsIndex,Xs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},sh.prototype.Me=function(t,e){return uh(t).get(e).next((function(t){return t?vc(t):null}))},sh);function sh(t,e){this.dr=t,this.serializer=e}function ah(t){this.Zr=t}function uh(t){return dh.Ms(t,Kc.store)}function ch(t){return dh.Ms(t,Xc.store)}function hh(t){return dh.Ms(t,Yc.store)}var lh,fh="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ph=(u(yh,lh=lu),yh),dh=(vh.Ms=function(t,e){if(t instanceof ph)return xu.Ms(t.vr,e);throw Vr()},vh.prototype.start=function(){var t=this;return this.xo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ti(Jr.FAILED_PRECONDITION,fh);return t.Oo(),t.Mo(),t.Lo(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ko.oo(e)}))})).then((function(e){t.yo=new du(e,t.Po)})).then((function(){t.po=!0})).catch((function(e){return t.Fo&&t.Fo.close(),Promise.reject(e)}))},vh.prototype.qo=function(t){var e=this;return this.Co=function(n){return c(e,void 0,void 0,(function(){return h(this,(function(e){return this.tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},vh.prototype.Bo=function(t){var e=this;this.Fo.Bs((function(n){return c(e,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},vh.prototype.Uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Is.ai((function(){return c(e,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.tr?[4,this.xo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},vh.prototype.xo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return mh(e).put(new Jc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Qo(e).next((function(e){e||(t.isPrimary=!1,t.Is.gi((function(){return t.Co(!1)})))}))})).next((function(){return t.Wo(e)})).next((function(n){return t.isPrimary&&!n?t.jo(e).next((function(){return!1})):!!n&&t.Ko(e).next((function(){return!0}))}))})).catch((function(e){if(Ru(e))return Lr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Lr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Is.gi((function(){return t.Co(e)})),t.isPrimary=e}))},vh.prototype.Qo=function(t){var e=this;return gh(t).get(Vc.key).next((function(t){return uu.resolve(e.Go(t))}))},vh.prototype.zo=function(t){return mh(t).delete(this.clientId)},vh.prototype.Ho=function(){return c(this,void 0,void 0,(function(){var t,e,n,r,i=this;return h(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Yo(this.Do,18e5)?[3,2]:(this.Do=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=vh.Ms(t,Jc.store);return e.Hs().next((function(t){var n=i.Jo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return uu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.$o)for(e=0,n=t;e<n.length;e++)r=n[e],this.$o.removeItem(this.Xo(r.clientId));o.label=2;case 2:return[2]}}))}))},vh.prototype.Lo=function(){var t=this;this.So=this.Is.Ss("client_metadata_refresh",4e3,(function(){return t.xo().then((function(){return t.Ho()})).then((function(){return t.Lo()}))}))},vh.prototype.Go=function(t){return!!t&&t.ownerId===this.clientId},vh.prototype.Wo=function(t){var e=this;return this.Vo?uu.resolve(!0):gh(t).get(Vc.key).next((function(n){if(null!==n&&e.Yo(n.leaseTimestampMs,5e3)&&!e.Zo(n.ownerId)){if(e.Go(n)&&e.networkEnabled)return!0;if(!e.Go(n)){if(!n.allowTabSynchronization)throw new ti(Jr.FAILED_PRECONDITION,fh);return!1}}return!(!e.networkEnabled||!e.inForeground)||mh(t).Hs().next((function(t){return void 0===e.Jo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Lr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},vh.prototype.th=function(){return c(this,void 0,void 0,(function(){var t=this;return h(this,(function(e){switch(e.label){case 0:return this.po=!1,this.eh(),this.So&&(this.So.cancel(),this.So=null),this.nh(),this.sh(),[4,this.Fo.runTransaction("readwrite",[Vc.store,Jc.store],(function(e){var n=new ph(e,du.Es);return t.jo(n).next((function(){return t.zo(n)}))}))];case 1:return e.sent(),this.Fo.close(),this.ih(),[2]}}))}))},vh.prototype.Jo=function(t,e){var n=this;return t.filter((function(t){return n.Yo(t.updateTimeMs,e)&&!n.Zo(t.clientId)}))},vh.prototype.rh=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return mh(e).Hs().next((function(e){return t.Jo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(vh.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),vh.prototype.oh=function(t){return gc.Tr(t,this.serializer,this.zn,this.dr)},vh.prototype.hh=function(){return this.ko},vh.prototype.ah=function(){return this.Kn},vh.prototype.uh=function(){return this.zn},vh.prototype.runTransaction=function(t,e,n){var r=this;Lr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Fo.runTransaction(o,th,(function(o){return i=new ph(o,r.yo?r.yo.next():du.Es),"readwrite-primary"===e?r.Qo(i).next((function(t){return!!t||r.Wo(i)})).next((function(e){if(!e)throw Rr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Is.gi((function(){return r.Co(!1)})),new ti(Jr.FAILED_PRECONDITION,hu);return n(i)})).next((function(t){return r.Ko(i).next((function(){return t}))})):r.lh(i).next((function(){return n(i)}))})).then((function(t){return i.jn(),t}))},vh.prototype.lh=function(t){var e=this;return gh(t).get(Vc.key).next((function(t){if(null!==t&&e.Yo(t.leaseTimestampMs,5e3)&&!e.Zo(t.ownerId)&&!e.Go(t)&&!(e.Vo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ti(Jr.FAILED_PRECONDITION,fh)}))},vh.prototype.Ko=function(t){var e=new Vc(this.clientId,this.allowTabSynchronization,Date.now());return gh(t).put(Vc.key,e)},vh.ks=function(){return xu.ks()},vh.prototype.jo=function(t){var e=this,n=gh(t);return n.get(Vc.key).next((function(t){return e.Go(t)?(Lr("IndexedDbPersistence","Releasing primary lease."),n.delete(Vc.key)):uu.resolve()}))},vh.prototype.Yo=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Rr("Detected an update time that is in the future: "+t+" > "+n),1))},vh.prototype.Oo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.vo=function(){t.Is.ai((function(){return t.inForeground="visible"===t.document.visibilityState,t.xo()}))},this.document.addEventListener("visibilitychange",this.vo),this.inForeground="visible"===this.document.visibilityState)},vh.prototype.nh=function(){this.vo&&(this.document.removeEventListener("visibilitychange",this.vo),this.vo=null)},vh.prototype.Mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.bo=function(){e.eh(),e.Is.ai((function(){return e.th()}))},this.window.addEventListener("unload",this.bo))},vh.prototype.sh=function(){this.bo&&(this.window.removeEventListener("unload",this.bo),this.bo=null)},vh.prototype.Zo=function(t){var e;try{var n=null!==(null===(e=this.$o)||void 0===e?void 0:e.getItem(this.Xo(t)));return Lr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Rr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},vh.prototype.eh=function(){if(this.$o)try{this.$o.setItem(this.Xo(this.clientId),String(Date.now()))}catch(t){Rr("Failed to set zombie client id.",t)}},vh.prototype.ih=function(){if(this.$o)try{this.$o.removeItem(this.Xo(this.clientId))}catch(t){}},vh.prototype.Xo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},vh);function vh(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Is=i,this.window=o,this.document=s,this.Po=u,this.Vo=c,this.yo=null,this.po=!1,this.isPrimary=!1,this.networkEnabled=!0,this.bo=null,this.inForeground=!1,this.vo=null,this.So=null,this.Do=Number.NEGATIVE_INFINITY,this.Co=function(t){return Promise.resolve()},!vh.ks())throw new ti(Jr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.dr=new bh(this,r),this.No=e+"main",this.serializer=new ac(a),this.Fo=new xu(this.No,10,new Pc(this.serializer)),this.ko=new oh(this.dr,this.serializer),this.zn=new eh,this.Kn=new Ac(this.serializer,this.zn),this.window&&this.window.localStorage?this.$o=this.window.localStorage:(this.$o=null,!1===c&&Rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function yh(t,e){var n=this;return(n=lh.call(this)||this).vr=t,n.Ro=e,n}function gh(t){return dh.Ms(t,Vc.store)}function mh(t){return dh.Ms(t,Jc.store)}var bh=(wh.prototype.ir=function(t){var e=this._h(t);return this.db.hh().do(t).next((function(t){return e.next((function(e){return t+e}))}))},wh.prototype._h=function(t){var e=0;return this.or(t,(function(t){e++})).next((function(){return e}))},wh.prototype.be=function(t,e){return this.db.hh().be(t,e)},wh.prototype.or=function(t,e){return this.fh(t,(function(t,n){return e(n)}))},wh.prototype.Eo=function(t,e,n){return Eh(t,n)},wh.prototype.mo=function(t,e,n){return Eh(t,n)},wh.prototype.hr=function(t,e,n){return this.db.hh().hr(t,e,n)},wh.prototype.Dr=Eh,wh.prototype.dh=function(t,e){return r=e,i=!1,_c(n=t).ti((function(t){return bc(n,t,r).next((function(t){return t&&(i=!0),uu.resolve(!t)}))})).next((function(){return i}));var n,r,i},wh.prototype.ar=function(t,e){var n=this,r=this.db.ah().jr(),i=[],o=0;return this.fh(t,(function(s,a){var u;a<=e&&(u=n.dh(t,s).next((function(e){if(!e)return o++,r.Ln(t,s).next((function(){return r.Mn(s),hh(t).delete([0,ic(s.path)])}))})),i.push(u))})).next((function(){return uu.Cn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},wh.prototype.removeTarget=function(t,e){var n=e.tt(t.Ro);return this.db.hh().lo(t,n)},wh.prototype.wh=Eh,wh.prototype.fh=function(t,e){var n,r=hh(t),i=du.Es;return r.Zs({index:Yc.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==du.Es&&e(new ai(sc(n)),i),i=a,n=s):i=du.Es})).next((function(){i!==du.Es&&e(new ai(sc(n)),i)}))},wh.prototype.cr=function(t){return this.db.ah().zr(t)},wh);function wh(t,e){this.db=t,this.Yi=new ec(this,e)}function Eh(t,e){return hh(t).put((n=t.Ro,new Yc(0,ic(e.path),n)));var n}function Ih(t,e){var n=t.projectId;return t.i||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var _h=(Th.prototype.er=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.ur(n,e.Eh)}))},Th);function Th(t,e,n){this.persistence=t,this.Th=e,this.Eh=new Ri(Fr),this.Ih=new Zr(Ei,Ii),this.mh=ni.min(),this.Gn=t.oh(n),this.Ah=t.ah(),this.ko=t.hh(),this.Rh=new fu(this.Ah,this.Gn,this.persistence.uh()),this.Th.Ph(this.Rh)}function Ah(t,e){var n=t;return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,h=e.batch.keys(),l=n.Ah.jr({Gr:!0});return r=n,i=t,s=l,u=(a=(o=e).batch).keys(),c=uu.resolve(),u.forEach((function(t){c=c.next((function(){return s.Ln(i,t)})).next((function(e){var n=e,r=o.Pn.get(t);Mr(null!==r),(!n||n.version.o(r)<0)&&(n=a.En(t,n,o))&&s.xn(n,o.Rn)}))})),c.next((function(){return r.Gn.br(i,a)})).next((function(){return l.apply(t)})).next((function(){return n.Gn.Cr(t)})).next((function(){return n.Rh.Zn(t,h)}))}))}function xh(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ko.ro(t)}))}function Nh(t,e){var n=t,r=e.Z,i=n.Eh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ah.jr({Gr:!0});i=n.Eh;var s=[];e.Wt.forEach((function(e,o){var a,u,c,h,l,f=i.get(o);f&&(s.push(n.ko.Io(t,e.Zt,o).next((function(){return n.ko.To(t,e.Jt,o)}))),0<(a=e.resumeToken).Y()&&(u=f.et(a,r).tt(t.Ro),i=i.st(o,u),c=f,l=e,Mr(0<(h=u).resumeToken.Y()),(0===c.resumeToken.Y()||3e8<=h.Z.m()-c.Z.m()||0<l.Jt.size+l.Xt.size+l.Zt.size)&&s.push(n.ko.lo(t,u))))}));var a,u=qi,c=Ki();return e.Kt.forEach((function(t,e){c=c.add(t)})),s.push(o.getEntries(t,c).next((function(i){e.Kt.forEach((function(a,c){var h=i.get(a);c instanceof ca&&c.version.isEqual(ni.min())?(o.Mn(a,r),u=u.st(a,c)):null==h||0<c.version.o(h.version)||0===c.version.o(h.version)&&h.hasPendingWrites?(o.xn(c,r),u=u.st(a,c)):Lr("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version),e.Gt.has(a)&&s.push(n.persistence.dr.wh(t,a))}))}))),r.isEqual(ni.min())||(a=n.ko.ro(t).next((function(e){return n.ko.ho(t,t.Ro,r)})),s.push(a)),uu.Cn(s).next((function(){return o.apply(t)})).next((function(){return n.Rh.ts(t,u)}))})).then((function(t){return n.Eh=i,t}))}function Sh(t,e){var n=t;return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ko.wo(t,e).next((function(i){return i?(r=i,uu.resolve(r)):n.ko.no(t).next((function(i){return r=new ki(e,i,0,t.Ro),n.ko.ao(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Eh.get(t.targetId);return(null===r||0<t.Z.o(r.Z))&&(n.Eh=n.Eh.st(t.targetId,t),n.Ih.set(e,t.targetId)),t}))}function kh(t,e,n){return c(this,void 0,void 0,(function(){var r,i,o,s;return h(this,(function(a){switch(a.label){case 0:i=(r=t).Eh.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.dr.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ru(s=a.sent()))throw s;return Lr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Eh=r.Eh.remove(e),r.Ih.delete(i.target),[2]}}))}))}function Oh(t,e,n){var r=t,i=ni.min(),o=Ki();return r.persistence.runTransaction("Execute query","readonly",(function(t){return s=r,a=t,u=Ea(e),(void 0!==(h=(c=s).Ih.get(u))?uu.resolve(c.Eh.get(h)):c.ko.wo(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ko.Ao(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Th.ns(t,e,n?i:ni.min(),n?o:Ki())})).next((function(t){return{documents:t,gh:o}}));var s,a,u,c,h}))}function Dh(t,e){var n=t,r=n.ko,i=n.Eh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Me(t,e).next((function(t){return t?t.target:null}))}))}function Lh(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){if(t.code!==Jr.FAILED_PRECONDITION||t.message!==hu)throw t;return Lr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Rh=(Uh.prototype._=function(){return this.Vh._()},Uh.prototype.Eo=function(t,e){var n=new Ph(t,e);this.Vh=this.Vh.add(n),this.ph=this.ph.add(n)},Uh.prototype.vh=function(t,e){var n=this;t.forEach((function(t){return n.Eo(t,e)}))},Uh.prototype.mo=function(t,e){this.Sh(new Ph(t,e))},Uh.prototype.Dh=function(t,e){var n=this;t.forEach((function(t){return n.mo(t,e)}))},Uh.prototype.Ch=function(t){var e=this,n=new ai(new ii([])),r=new Ph(n,t),i=new Ph(n,t+1),o=[];return this.ph.St([r,i],(function(t){e.Sh(t),o.push(t.key)})),o},Uh.prototype.Nh=function(){var t=this;this.Vh.forEach((function(e){return t.Sh(e)}))},Uh.prototype.Sh=function(t){this.Vh=this.Vh.delete(t),this.ph=this.ph.delete(t)},Uh.prototype.Fh=function(t){var e=new ai(new ii([])),n=new Ph(e,t),r=new Ph(e,t+1),i=Ki();return this.ph.St([n,r],(function(t){i=i.add(t.key)})),i},Uh.prototype.Nr=function(t){var e=new Ph(t,0),n=this.Vh.Ct(e);return null!==n&&t.isEqual(n.key)},Uh),Ph=(Mh.yh=function(t,e){return ai.P(t.key,e.key)||Fr(t.kh,e.kh)},Mh.bh=function(t,e){return Fr(t.kh,e.kh)||ai.P(t.key,e.key)},Mh),Ch=(Vh.prototype.Er=function(){return null!=this.uid},Vh.prototype.$h=function(){return this.Er()?"uid:"+this.uid:"anonymous-user"},Vh.prototype.isEqual=function(t){return t.uid===this.uid},Vh);function Vh(t){this.uid=t}function Mh(t,e){this.key=t,this.kh=e}function Uh(){this.Vh=new Fi(Ph.yh),this.ph=new Fi(Ph.bh)}function jh(t,e){this.user=e,this.type="OAuth",this.Mh={},this.Mh.Authorization="Bearer "+t}Ch.UNAUTHENTICATED=new Ch(null),Ch.xh=new Ch("google-credentials-uid"),Ch.Oh=new Ch("first-party-uid");var Fh,zh,qh,Bh=(ul.prototype.getToken=function(){return Promise.resolve(null)},ul.prototype.qh=function(){},ul.prototype.Bh=function(t){(this.Lh=t)(Ch.UNAUTHENTICATED)},ul.prototype.Uh=function(){this.Lh=null},ul),Gh=(al.prototype.getToken=function(){var t=this,e=this.jh,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.jh!==e?(Lr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Mr("string"==typeof n.accessToken),new jh(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},al.prototype.qh=function(){this.forceRefresh=!0},al.prototype.Bh=function(t){this.Lh=t,this.Wh&&t(this.currentUser)},al.prototype.Uh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Qh),this.Qh=null,this.Lh=null},al.prototype.Kh=function(){var t=this.auth&&this.auth.getUid();return Mr(null===t||"string"==typeof t),new Ch(t)},al),$h=(Object.defineProperty(sl.prototype,"Mh",{get:function(){var t={"X-Goog-AuthUser":this.zh},e=this.Gh.auth.Hh([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),sl),Hh=(ol.prototype.getToken=function(){return Promise.resolve(new $h(this.Gh,this.zh))},ol.prototype.Bh=function(t){t(Ch.Oh)},ol.prototype.Uh=function(){},ol.prototype.qh=function(){},ol),Wh=(il.prototype.ea=function(){return 1===this.state||2===this.state||4===this.state},il.prototype.na=function(){return 2===this.state},il.prototype.start=function(){3!==this.state?this.auth():this.sa()},il.prototype.stop=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.ea()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},il.prototype.ia=function(){this.state=0,this.Ti.reset()},il.prototype.ra=function(){var t=this;this.na()&&null===this.ta&&(this.ta=this.Is.Ss(this.Yh,6e4,(function(){return t.oa()})))},il.prototype.ha=function(t){this.aa(),this.stream.send(t)},il.prototype.oa=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){return this.na()?[2,this.close(0)]:[2]}))}))},il.prototype.aa=function(){this.ta&&(this.ta.cancel(),this.ta=null)},il.prototype.close=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return this.aa(),this.Ti.cancel(),this.Zh++,3!==t?this.Ti.reset():e&&e.code===Jr.RESOURCE_EXHAUSTED?(Rr(e.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.Ti.ps()):e&&e.code===Jr.UNAUTHENTICATED&&this.Xh.qh(),null!==this.stream&&(this.ua(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ca(e)];case 1:return n.sent(),[2]}}))}))},il.prototype.ua=function(){},il.prototype.auth=function(){var t=this;this.state=1;var e=this.la(this.Zh),n=this.Zh;this.Xh.getToken().then((function(e){t.Zh===n&&t._a(e)}),(function(n){e((function(){var e=new ti(Jr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fa(e)}))}))},il.prototype._a=function(t){var e=this,n=this.la(this.Zh);this.stream=this.da(t),this.stream.wa((function(){n((function(){return e.state=2,e.listener.wa()}))})),this.stream.ca((function(t){n((function(){return e.fa(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},il.prototype.sa=function(){var t=this;this.state=4,this.Ti.bs((function(){return c(t,void 0,void 0,(function(){return h(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},il.prototype.fa=function(t){return Lr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},il.prototype.la=function(t){var e=this;return function(n){e.Is.ai((function(){return e.Zh===t?n():(Lr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},il),Kh=(u(rl,qh=Wh),rl.prototype.da=function(t){return this.Jh.Ta("Listen",t)},rl.prototype.onMessage=function(t){this.Ti.reset();var e=function(t,e){var n,r,i,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Vr(),a=e.targetChange.targetIds||[],u=(i=e.targetChange.resumeToken,t.Le?(Mr(void 0===i||"string"==typeof i),Ti.fromBase64String(i||"")):(Mr(void 0===i||i instanceof Uint8Array),Ti.fromUint8Array(i||new Uint8Array))),c=e.targetChange.cause,h=new Zi(s,a,u,c&&(r=void 0===(n=c).code?Jr.UNKNOWN:Li(n.code),new ti(r,n.message||""))||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var f=Ho(t,l.document.name),p=qo(l.document.updateTime),d=new Zs({mapValue:{fields:l.document.fields}}),v=new ua(f,p,d,{});h=new Xi(l.targetIds||[],l.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var g=Ho(t,y.document),m=y.readTime?qo(y.readTime):ni.min(),b=new ca(g,m);h=new Xi([],y.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var E=Ho(t,w.document);h=new Xi([],w.removedTargetIds||[],E,null)}else{if(!("filter"in e))return Vr();e.filter;var I=e.filter;I.targetId;var _=new xi(I.count||0);h=new Qi(I.targetId,_)}return h}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ni.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?ni.min():qo(e.readTime)}(t);return this.listener.Ea(e,n)},rl.prototype.Ia=function(t){var e,n,r,i,o={};o.database=Yo(this.serializer),o.addTarget=(e=this.serializer,(r=_i(i=(n=t).target)?{documents:ts(e,i)}:{query:es(e,i)}).targetId=n.targetId,0<n.resumeToken.Y()&&(r.resumeToken=zo(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.X){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vr()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.ha(o)},rl.prototype.ma=function(t){var e={};e.database=Yo(this.serializer),e.removeTarget=t,this.ha(e)},rl),Yh=(u(nl,zh=Wh),Object.defineProperty(nl.prototype,"Ra",{get:function(){return this.Aa},enumerable:!1,configurable:!0}),nl.prototype.start=function(){this.Aa=!1,this.lastStreamToken=void 0,zh.prototype.start.call(this)},nl.prototype.ua=function(){this.Aa&&this.Pa([])},nl.prototype.da=function(t){return this.Jh.Ta("Write",t)},nl.prototype.onMessage=function(t){if(Mr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Aa){this.Ti.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(Mr(void 0!==i),r.map((function(t){return function(t,e){var n=t.updateTime?qo(t.updateTime):qo(e);n.isEqual(ni.min())&&(n=qo(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new Ss(n,r)}(t,i)}))):[]),n=qo(t.commitTime);return this.listener.ga(n,e)}var r,i;return Mr(!t.writeResults||0===t.writeResults.length),this.Aa=!0,this.listener.Va()},nl.prototype.ya=function(){var t={};t.database=Yo(this.serializer),this.ha(t)},nl.prototype.Pa=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Zo(e.serializer,t)}))};this.ha(n)},nl),Xh=(u(el,Fh=function(){}),el.prototype.ba=function(){if(this.pa)throw new ti(Jr.FAILED_PRECONDITION,"The client has already been terminated.")},el.prototype.va=function(t,e,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.va(t,e,n,i)})).catch((function(t){throw t.code===Jr.UNAUTHENTICATED&&r.credentials.qh(),t}))},el.prototype.Sa=function(t,e,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.Sa(t,e,n,i)})).catch((function(t){throw t.code===Jr.UNAUTHENTICATED&&r.credentials.qh(),t}))},el.prototype.terminate=function(){this.pa=!1},el),Qh=(tl.prototype.ka=function(){var t=this;0===this.Ca&&(this.$a("Unknown"),this.Na=this.ei.Ss("online_state_timeout",1e4,(function(){return t.Na=null,t.xa("Backend didn't respond within 10 seconds."),t.$a("Offline"),Promise.resolve()})))},tl.prototype.Oa=function(t){"Online"===this.state?this.$a("Unknown"):(this.Ca++,1<=this.Ca&&(this.Ma(),this.xa("Connection failed 1 times. Most recent error: "+t.toString()),this.$a("Offline")))},tl.prototype.set=function(t){this.Ma(),this.Ca=0,"Online"===t&&(this.Fa=!1),this.$a(t)},tl.prototype.$a=function(t){t!==this.state&&(this.state=t,this.Da(t))},tl.prototype.xa=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fa?(Rr(e),this.Fa=!1):Lr("OnlineStateTracker",e)},tl.prototype.Ma=function(){null!==this.Na&&(this.Na.cancel(),this.Na=null)},tl),Zh=(Jh.prototype.start=function(){return this.enableNetwork()},Jh.prototype.enableNetwork=function(){return this.Wa.delete(0),this.iu()},Jh.prototype.iu=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.Ga()?(this.ru()?this.ou():this.Ha.set("Unknown"),[4,this.hu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Jh.prototype.disableNetwork=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.Wa.add(0),[4,this.au()];case 1:return t.sent(),this.Ha.set("Offline"),[2]}}))}))},Jh.prototype.au=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.tu.stop()];case 1:return t.sent(),[4,this.Ya.stop()];case 2:return t.sent(),0<this.Ba.length&&(Lr("RemoteStore","Stopping write stream with "+this.Ba.length+" pending writes"),this.Ba=[]),this.uu(),[2]}}))}))},Jh.prototype.th=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return Lr("RemoteStore","RemoteStore shutting down."),this.Wa.add(5),[4,this.au()];case 1:return t.sent(),this.ja.th(),this.Ha.set("Unknown"),[2]}}))}))},Jh.prototype.listen=function(t){this.Ua.has(t.targetId)||(this.Ua.set(t.targetId,t),this.ru()?this.ou():this.Ya.na()&&this.cu(t))},Jh.prototype.lu=function(t){this.Ua.delete(t),this.Ya.na()&&this._u(t),0===this.Ua.size&&(this.Ya.na()?this.Ya.ra():this.Ga()&&this.Ha.set("Unknown"))},Jh.prototype.Me=function(t){return this.Ua.get(t)||null},Jh.prototype.Oe=function(t){return this.fu.Oe(t)},Jh.prototype.cu=function(t){this.Qa.we(t.targetId),this.Ya.Ia(t)},Jh.prototype._u=function(t){this.Qa.we(t),this.Ya.ma(t)},Jh.prototype.ou=function(){this.Qa=new oo(this),this.Ya.start(),this.Ha.ka()},Jh.prototype.ru=function(){return this.Ga()&&!this.Ya.ea()&&0<this.Ua.size},Jh.prototype.Ga=function(){return 0===this.Wa.size},Jh.prototype.uu=function(){this.Qa=null},Jh.prototype.Ja=function(){return c(this,void 0,void 0,(function(){var t=this;return h(this,(function(e){return this.Ua.forEach((function(e,n){t.cu(e)})),[2]}))}))},Jh.prototype.Xa=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return this.uu(),this.ru()?(this.Ha.Oa(t),this.ou()):this.Ha.set("Unknown"),[2]}))}))},Jh.prototype.Za=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(o){switch(o.label){case 0:if(this.Ha.set("Online"),!(t instanceof Zi&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.du(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),Lr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.wu(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Xi?this.Qa.ge(t):t instanceof Qi?this.Qa.Ce(t):this.Qa.pe(t),e.isEqual(ni.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,xh(this.La)];case 8:return r=o.sent(),0<=e.o(r)?[4,this.Tu(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Lr("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.wu(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},Jh.prototype.wu=function(t,e){return c(this,void 0,void 0,(function(){var n=this;return h(this,(function(r){switch(r.label){case 0:if(!Ru(t))throw t;return this.Wa.add(1),[4,this.au()];case 1:return r.sent(),this.Ha.set("Offline"),e=e||function(){return xh(n.La)},this.ei.gi((function(){return c(n,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return Lr("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.Wa.delete(1),[4,this.iu()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},Jh.prototype.Eu=function(t){var e=this;return t().catch((function(n){return e.wu(n,t)}))},Jh.prototype.Tu=function(t){var e=this,n=this.Qa.ke(t);return n.Wt.forEach((function(n,r){var i;0<n.resumeToken.Y()&&(i=e.Ua.get(r))&&e.Ua.set(r,i.et(n.resumeToken,t))})),n.jt.forEach((function(t){var n,r=e.Ua.get(t);r&&(e.Ua.set(t,r.et(Ti.J,r.Z)),e._u(t),n=new ki(r.target,t,1,r.sequenceNumber),e.cu(n))})),this.fu.Iu(n)},Jh.prototype.du=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i;return h(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Ua.has(i)?[4,this.fu.mu(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Ua.delete(i),this.Qa.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},Jh.prototype.hu=function(){return c(this,void 0,void 0,(function(){var t,e,n;return h(this,(function(r){switch(r.label){case 0:t=0<this.Ba.length?this.Ba[this.Ba.length-1].batchId:-1,r.label=1;case 1:if(!this.Au())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,(i=this.La,o=t,(s=i).persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===o&&(o=-1),s.Gn.gr(t,o)})))];case 3:return null===(e=r.sent())?(0===this.Ba.length&&this.tu.ra(),[3,7]):(t=e.batchId,this.Ru(e),[3,6]);case 4:return n=r.sent(),[4,this.wu(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Pu()&&this.gu(),[2]}var i,o,s}))}))},Jh.prototype.Au=function(){return this.Ga()&&this.Ba.length<10},Jh.prototype.Vu=function(){return this.Ba.length},Jh.prototype.Ru=function(t){this.Ba.push(t),this.tu.na()&&this.tu.Ra&&this.tu.Pa(t.mutations)},Jh.prototype.Pu=function(){return this.Ga()&&!this.tu.ea()&&0<this.Ba.length},Jh.prototype.gu=function(){this.tu.start()},Jh.prototype.eu=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){return this.tu.ya(),[2]}))}))},Jh.prototype.su=function(){return c(this,void 0,void 0,(function(){var t,e,n;return h(this,(function(r){for(t=0,e=this.Ba;t<e.length;t++)n=e[t],this.tu.Pa(n.mutations);return[2]}))}))},Jh.prototype.ga=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i=this;return h(this,(function(o){switch(o.label){case 0:return n=this.Ba.shift(),r=au.from(n,t,e),[4,this.Eu((function(){return i.fu.yu(r)}))];case 1:return o.sent(),[4,this.hu()];case 2:return o.sent(),[2]}}))}))},Jh.prototype.nu=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return t&&this.tu.Ra?[4,this.pu(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Pu()&&this.gu(),[2]}}))}))},Jh.prototype.pu=function(t){return c(this,void 0,void 0,(function(){var e,n,r=this;return h(this,(function(i){switch(i.label){case 0:return Di(n=t.code)&&n!==Jr.ABORTED?(e=this.Ba.shift(),this.tu.ia(),[4,this.Eu((function(){return r.fu.bu(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.hu()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},Jh.prototype.za=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.Wa.add(4),[4,this.au()];case 1:return t.sent(),this.Ha.set("Unknown"),this.tu.ia(),this.Ya.ia(),this.Wa.delete(4),[4,this.iu()];case 2:return t.sent(),[2]}}))}))},Jh.prototype.vu=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.ei.pi(),Lr("RemoteStore","RemoteStore received new credentials"),this.Wa.add(3),[4,this.au()];case 1:return e.sent(),this.Ha.set("Unknown"),[4,this.fu.vu(t)];case 2:return e.sent(),this.Wa.delete(3),[4,this.iu()];case 3:return e.sent(),[2]}}))}))},Jh.prototype.Su=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return t?(this.Wa.delete(2),[4,this.iu()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.Wa.add(2),[4,this.au()]);case 3:e.sent(),this.Ha.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},Jh);function Jh(t,e,n,r,i){var o,s,a,u,l,f,p,d,v=this;this.La=t,this.qa=e,this.ei=n,this.Ba=[],this.Ua=new Map,this.Qa=null,this.Wa=new Set,this.ja=i,this.ja.Ka((function(t){n.ai((function(){return c(v,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.Ga()?(Lr("RemoteStore","Restarting streams for network reachability change."),[4,this.za()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Ha=new Qh(n,r),this.Ya=(l=this.qa,f=n,p={wa:this.Ja.bind(this),ca:this.Xa.bind(this),Ea:this.Za.bind(this)},(d=l).ba(),new Kh(f,d.Jh,d.credentials,d.serializer,p)),this.tu=(o=this.qa,s=n,a={wa:this.eu.bind(this),ca:this.nu.bind(this),Va:this.su.bind(this),ga:this.ga.bind(this)},(u=o).ba(),new Yh(s,u.Jh,u.credentials,u.serializer,a))}function tl(t,e){this.ei=t,this.Da=e,this.state="Unknown",this.Ca=0,this.Na=null,this.Fa=!0}function el(t,e,n){var r=this;return(r=Fh.call(this)||this).credentials=t,r.Jh=e,r.serializer=n,r.pa=!1,r}function nl(t,e,n,r,i){var o=this;return(o=zh.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Aa=!1,o}function rl(t,e,n,r,i){var o=this;return(o=qh.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function il(t,e,n,r,i,o){this.Is=t,this.Yh=n,this.Jh=r,this.Xh=i,this.listener=o,this.state=0,this.Zh=0,this.ta=null,this.stream=null,this.Ti=new Au(t,e)}function ol(t,e){this.Gh=t,this.zh=e}function sl(t,e){this.Gh=t,this.zh=e,this.type="FirstParty",this.user=Ch.Oh}function al(t){var e=this;this.Qh=null,this.currentUser=Ch.UNAUTHENTICATED,this.Wh=!1,this.jh=0,this.Lh=null,this.forceRefresh=!1,this.Qh=function(){e.jh++,e.currentUser=e.Kh(),e.Wh=!0,e.Lh&&e.Lh(e.currentUser)},this.jh=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Qh):(this.Qh(null),t.get().then((function(t){e.auth=t,e.Qh&&e.auth.addAuthTokenListener(e.Qh)}),(function(){})))}function ul(){this.Lh=null}function cl(t,e){return"firestore_clients_"+t+"_"+e}function hl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Er()&&(r+="_"+e.uid),r}function ll(t,e){return"firestore_targets_"+t+"_"+e}function fl(t){this.key=t}function pl(t){this.key=t}function dl(t,e,n){this.query=t,this.targetId=e,this.view=n}function vl(t){this.key=t,this.qc=!1}var yl=(Rl.Du=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new ti(r.error.code,r.error.message)),i?new Rl(t,e,r.state,o):(Rr("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},Rl.prototype.Cu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Rl),gl=(Ll.Du=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new ti(n.error.code,n.error.message)),r?new Ll(t,n.state,i):(Rr("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},Ll.prototype.Cu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Ll),ml=(Dl.Du=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Yi,o=0;r&&o<n.activeTargetIds.length;++o)r=mi(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Dl(t,i):(Rr("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},Dl),bl=(Ol.Du=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Ol(e.clientId,e.onlineState):(Rr("SharedClientState","Failed to parse online state: "+t),null)},Ol),wl=(kl.prototype.Nu=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},kl.prototype.Fu=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},kl.prototype.Cu=function(){var t={activeTargetIds:this.activeTargetIds.N(),updateTimeMs:Date.now()};return JSON.stringify(t)},kl),El=(Sl.ks=function(t){return!(!t||!t.localStorage)},Sl.prototype.start=function(){return c(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,f=this;return h(this,(function(h){switch(h.label){case 0:return[4,this.fu.rh()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.ku&&(i=this.getItem(cl(this.persistenceKey,r)))&&(o=ml.Du(r,i))&&(this.Ou=this.Ou.st(o.clientId,o));for(this.ju(),(s=this.storage.getItem(this.Wu))&&(a=this.Ku(s))&&this.Gu(a),u=0,c=this.Mu;u<c.length;u++)l=c[u],this.xu(l);return this.Mu=[],this.window.addEventListener("unload",(function(){return f.th()})),this.tr=!0,[2]}}))}))},Sl.prototype.Ts=function(t){this.setItem(this.qu,JSON.stringify(t))},Sl.prototype.zu=function(){return this.Hu(this.Ou)},Sl.prototype.Yu=function(t){var e=!1;return this.Ou.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},Sl.prototype.Ju=function(t){this.Xu(t,"pending")},Sl.prototype.Zu=function(t,e,n){this.Xu(t,e,n),this.tc(t)},Sl.prototype.ec=function(t){var e,n,r="not-current";return this.Yu(t)&&(!(e=this.storage.getItem(ll(this.persistenceKey,t)))||(n=gl.Du(t,e))&&(r=n.state)),this.nc.Nu(t),this.ju(),r},Sl.prototype.sc=function(t){this.nc.Fu(t),this.ju()},Sl.prototype.ic=function(t){return this.nc.activeTargetIds.has(t)},Sl.prototype.rc=function(t){this.removeItem(ll(this.persistenceKey,t))},Sl.prototype.oc=function(t,e,n){this.hc(t,e,n)},Sl.prototype.ac=function(t,e,n){var r=this;e.forEach((function(t){r.tc(t)})),this.currentUser=t,n.forEach((function(t){r.Ju(t)}))},Sl.prototype.uc=function(t){this.cc(t)},Sl.prototype.th=function(){this.tr&&(this.window.removeEventListener("storage",this.$u),this.removeItem(this.Lu),this.tr=!1)},Sl.prototype.getItem=function(t){var e=this.storage.getItem(t);return Lr("SharedClientState","READ",t,e),e},Sl.prototype.setItem=function(t,e){Lr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},Sl.prototype.removeItem=function(t){Lr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},Sl.prototype.xu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Lr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Lu)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Is.gi((function(){return c(e,void 0,void 0,(function(){var t,e,r,i,o,s;return h(this,(function(a){if(this.tr){if(null!==n.key)if(this.Bu.test(n.key)){if(null==n.newValue)return t=this.lc(n.key),[2,this._c(t,null)];if(e=this.fc(n.key,n.newValue))return[2,this._c(e.clientId,e)]}else if(this.Uu.test(n.key)){if(null!==n.newValue&&(r=this.dc(n.key,n.newValue)))return[2,this.wc(r)]}else if(this.Qu.test(n.key)){if(null!==n.newValue&&(i=this.Tc(n.key,n.newValue)))return[2,this.Ec(i)]}else if(n.key===this.Wu){if(null!==n.newValue&&(o=this.Ku(n.newValue)))return[2,this.Gu(o)]}else n.key===this.qu&&(s=function(t){var e=du.Es;if(null!=t)try{var n=JSON.parse(t);Mr("number"==typeof n),e=n}catch(t){Rr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==du.Es&&this.fs(s)}else this.Mu.push(n);return[2]}))}))}))}},Object.defineProperty(Sl.prototype,"nc",{get:function(){return this.Ou.get(this.ku)},enumerable:!1,configurable:!0}),Sl.prototype.ju=function(){this.setItem(this.Lu,this.nc.Cu())},Sl.prototype.Xu=function(t,e,n){var r=new yl(this.currentUser,t,e,n),i=hl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Cu())},Sl.prototype.tc=function(t){var e=hl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},Sl.prototype.cc=function(t){var e={clientId:this.ku,onlineState:t};this.storage.setItem(this.Wu,JSON.stringify(e))},Sl.prototype.hc=function(t,e,n){var r=ll(this.persistenceKey,t),i=new gl(t,e,n);this.setItem(r,i.Cu())},Sl.prototype.lc=function(t){var e=this.Bu.exec(t);return e?e[1]:null},Sl.prototype.fc=function(t,e){var n=this.lc(t);return ml.Du(n,e)},Sl.prototype.dc=function(t,e){var n=this.Uu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yl.Du(new Ch(i),r,e)},Sl.prototype.Tc=function(t,e){var n=this.Qu.exec(t),r=Number(n[1]);return gl.Du(r,e)},Sl.prototype.Ku=function(t){return bl.Du(t)},Sl.prototype.wc=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fu.Ic(t.batchId,t.state,t.error)]:(Lr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},Sl.prototype.Ec=function(t){return this.fu.mc(t.targetId,t.state,t.error)},Sl.prototype._c=function(t,e){var n=this,r=e?this.Ou.st(t,e):this.Ou.remove(t),i=this.Hu(this.Ou),o=this.Hu(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fu.Ac(s,a).then((function(){n.Ou=r}))},Sl.prototype.Gu=function(t){this.Ou.get(t.clientId)&&this.Da(t.onlineState)},Sl.prototype.Hu=function(t){var e=Yi;return t.forEach((function(t,n){e=e.Nt(n.activeTargetIds)})),e},Sl),Il=(Nl.prototype.Ju=function(t){},Nl.prototype.Zu=function(t,e,n){},Nl.prototype.ec=function(t){return this.Rc.Nu(t),this.Pc[t]||"not-current"},Nl.prototype.oc=function(t,e,n){this.Pc[t]=e},Nl.prototype.sc=function(t){this.Rc.Fu(t)},Nl.prototype.ic=function(t){return this.Rc.activeTargetIds.has(t)},Nl.prototype.rc=function(t){delete this.Pc[t]},Nl.prototype.zu=function(){return this.Rc.activeTargetIds},Nl.prototype.Yu=function(t){return this.Rc.activeTargetIds.has(t)},Nl.prototype.start=function(){return this.Rc=new wl,Promise.resolve()},Nl.prototype.ac=function(t,e,n){},Nl.prototype.uc=function(t){},Nl.prototype.th=function(){},Nl.prototype.Ts=function(t){},Nl),_l=(Object.defineProperty(xl.prototype,"vc",{get:function(){return this.gc},enumerable:!1,configurable:!0}),xl.prototype.Sc=function(t,e){var n=this,r=e?e.Dc:new to,i=e?e.bc:this.bc,o=e?e.qt:this.qt,s=i,a=!1,u=this.query.an()&&i.size===this.query.limit?i.last():null,c=this.query.un()&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var h=i.get(t),l=(l=e instanceof ua?e:null)&&(Sa(n.query,l)?l:null),f=!!h&&n.qt.has(h.key),p=!!l&&(l.Ge||n.qt.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.Cc(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&0<n.pc(l,u)||c&&n.pc(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(o=l?(s=s.add(l),p?o.add(t):o.delete(t)):(s=s.delete(t),o.delete(t)))})),this.query.an()||this.query.un())for(;s.size>this.query.limit;){var h=this.query.an()?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{bc:s,Dc:r,Nc:a,qt:o}},xl.prototype.Cc=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},xl.prototype.Un=function(t,e,n){var r=this,i=this.bc;this.bc=t.bc,this.qt=t.qt;var o=t.Dc.Mt();o.sort((function(t,e){return i=t.type,o=e.type,n(i)-n(o)||r.pc(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vr()}}var i,o})),this.Fc(n);var s=e?this.kc():[],a=0===this.yc.size&&this.Yt?1:0,u=a!==this.Vc;return this.Vc=a,0!==o.length||u?{snapshot:new eo(this.query,t.bc,i,o,t.qt,0==a,u,!1),$c:s}:{$c:s}},xl.prototype.xc=function(t){return this.Yt&&"Offline"===t?(this.Yt=!1,this.Un({bc:this.bc,Dc:new to,qt:this.qt,Nc:!1},!1)):{$c:[]}},xl.prototype.Oc=function(t){return!this.gc.has(t)&&!!this.bc.has(t)&&!this.bc.get(t).Ge},xl.prototype.Fc=function(t){var e=this;t&&(t.Jt.forEach((function(t){return e.gc=e.gc.add(t)})),t.Xt.forEach((function(t){})),t.Zt.forEach((function(t){return e.gc=e.gc.delete(t)})),this.Yt=t.Yt)},xl.prototype.kc=function(){var t=this;if(!this.Yt)return[];var e=this.yc;this.yc=Ki(),this.bc.forEach((function(e){t.Oc(e.key)&&(t.yc=t.yc.add(e.key))}));var n=[];return e.forEach((function(e){t.yc.has(e)||n.push(new pl(e))})),this.yc.forEach((function(t){e.has(t)||n.push(new fl(t))})),n},xl.prototype.Mc=function(t){this.gc=t.gh,this.yc=Ki();var e=this.Sc(t.documents);return this.Un(e,!0)},xl.prototype.Lc=function(){return eo.Qt(this.query,this.bc,this.qt,0===this.Vc)},xl),Tl=(Object.defineProperty(Al.prototype,"el",{get:function(){return!0===this.tl},enumerable:!1,configurable:!0}),Al.prototype.subscribe=function(t){this.Wc=t},Al.prototype.listen=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i,o;return h(this,(function(s){switch(s.label){case 0:return this.nl("listen()"),(r=this.jc.get(t))?(e=r.targetId,this.Uc.ec(e),n=r.view.Lc(),[3,4]):[3,1];case 1:return[4,Sh(this.La,Ea(t))];case 2:return i=s.sent(),o=this.Uc.ec(i.targetId),e=i.targetId,[4,this.sl(t,e,"current"===o)];case 3:n=s.sent(),this.el&&this.Bc.listen(i),s.label=4;case 4:return[2,n]}}))}))},Al.prototype.sl=function(t,e,n){return c(this,void 0,void 0,(function(){var r,i,o,s,a,u;return h(this,(function(c){switch(c.label){case 0:return[4,Oh(this.La,t,!0)];case 1:return r=c.sent(),i=new _l(t,r.gh),o=i.Sc(r.documents),s=ro.Ht(e,n&&"Offline"!==this.onlineState),a=i.Un(o,this.el,s),this.il(e,a.$c),u=new dl(t,e,i),[2,(this.jc.set(t,u),this.Kc.has(e)?this.Kc.get(e).push(t):this.Kc.set(e,[t]),a.snapshot)]}}))}))},Al.prototype.lu=function(t){return c(this,void 0,void 0,(function(){var e,n,r=this;return h(this,(function(i){switch(i.label){case 0:return this.nl("unlisten()"),e=this.jc.get(t),1<(n=this.Kc.get(e.targetId)).length?[2,(this.Kc.set(e.targetId,n.filter((function(e){return!Aa(e,t)}))),void this.jc.delete(t))]:this.el?(this.Uc.sc(e.targetId),this.Uc.Yu(e.targetId)?[3,2]:[4,kh(this.La,e.targetId,!1).then((function(){r.Uc.rc(e.targetId),r.Bc.lu(e.targetId),r.rl(e.targetId)})).catch(Lh)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.rl(e.targetId),[4,kh(this.La,e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},Al.prototype.write=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(o){switch(o.label){case 0:this.nl("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,(s=this.La,a=t,c=s,h=ei.now(),l=a.reduce((function(t,e){return t.add(e.key)}),Ki()),c.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return c.Rh.Zn(t,l).next((function(e){u=e;for(var n,r,i=[],o=0,s=a;o<s.length;o++){var l=s[o],f=(n=l,r=u.get(l.key),n instanceof $s?function(t){for(var e=null,r=0,i=n.fieldTransforms;r<i.length;r++){var o=i[r],s=t instanceof ua?t.field(o.field):void 0,a=us(o.transform,s||null);null!=a&&(e=null==e?(new Js).set(o.field,a):e.set(o.field,a))}return e?e.ze():null}(r):null);null!=f&&i.push(new Fs(l.key,f,function t(e){var n=[];return Wr(e.fields||{},(function(e,r){var i=new si([e]);if(Ro(r)){var o=t(r.mapValue).fields;if(0===o.length)n.push(i);else for(var s=0,a=o;s<a.length;s++){var u=a[s];n.push(i.child(u))}}else n.push(i)})),new As(n)}(f.proto.mapValue),ks.exists(!0)))}return c.Gn.mr(t,h,i,a)}))})).then((function(t){var e=t.An(u);return{batchId:t.batchId,Fn:e}})))];case 2:return n=o.sent(),this.Uc.Ju(n.batchId),this.ol(n.batchId,e),[4,this.hl(n.Fn)];case 3:return o.sent(),[4,this.Bc.hu()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=Wu(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}var s,a,u,c,h,l}))}))},Al.prototype.Iu=function(t){return c(this,void 0,void 0,(function(){var e,n=this;return h(this,(function(r){switch(r.label){case 0:this.nl("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Nh(this.La,t)];case 2:return e=r.sent(),t.Wt.forEach((function(t,e){var r=n.Hc.get(e);r&&(Mr(t.Jt.size+t.Xt.size+t.Zt.size<=1),0<t.Jt.size?r.qc=!0:0<t.Xt.size?Mr(r.qc):0<t.Zt.size&&(Mr(r.qc),r.qc=!1))})),[4,this.hl(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Lh(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Al.prototype.xc=function(t,e){var n;(this.el&&0===e||!this.el&&1===e)&&(this.nl("applyOnlineStateChange()"),n=[],this.jc.forEach((function(e,r){var i=r.view.xc(t);i.snapshot&&n.push(i.snapshot)})),this.Wc.al(t),this.Wc.Ea(n),this.onlineState=t,this.el&&this.Uc.uc(t))},Al.prototype.mu=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return h(this,(function(u){switch(u.label){case 0:return this.nl("rejectListens()"),this.Uc.oc(t,"rejected",e),n=this.Hc.get(t),(r=n&&n.key)?(i=(i=new Ri(ai.P)).st(r,new ca(r,ni.min())),o=Ki().add(r),s=new no(ni.min(),new Map,new Fi(Fr),i,o),[4,this.Iu(s)]):[3,2];case 1:return u.sent(),this.zc=this.zc.remove(r),this.Hc.delete(t),this.ul(),[3,4];case 2:return[4,kh(this.La,t,!1).then((function(){return a.rl(t,e)})).catch(Lh)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},Al.prototype.yu=function(t){return c(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:this.nl("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ah(this.La,t)];case 2:return n=r.sent(),this.cl(e,null),this.ll(e),this.Uc.Zu(e,"acknowledged"),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Lh(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Al.prototype.bu=function(t,e){return c(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:this.nl("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,(i=this.La,o=t,(s=i).persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return s.Gn.Rr(t,o).next((function(n){return Mr(null!==n),e=n.keys(),s.Gn.br(t,n)})).next((function(){return s.Gn.Cr(t)})).next((function(){return s.Rh.Zn(t,e)}))})))];case 2:return n=r.sent(),this.cl(t,e),this.ll(t),this.Uc.Zu(t,"rejected",e),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Lh(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}var i,o,s}))}))},Al.prototype._l=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i;return h(this,(function(o){switch(o.label){case 0:this.Bc.Ga()||Lr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(s=this.La,(a=s).persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return a.Gn.Vr(t)})))];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.Xc.get(e)||[]).push(t),this.Xc.set(e,n),[3,4]);case 3:return r=o.sent(),i=Wu(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}var s,a}))}))},Al.prototype.ll=function(t){(this.Xc.get(t)||[]).forEach((function(t){t.resolve()})),this.Xc.delete(t)},Al.prototype.fl=function(t){this.Xc.forEach((function(e){e.forEach((function(e){e.reject(new ti(Jr.CANCELLED,t))}))})),this.Xc.clear()},Al.prototype.ol=function(t,e){var n=this.Jc[this.currentUser.$h()];n=(n=n||new Ri(Fr)).st(t,e),this.Jc[this.currentUser.$h()]=n},Al.prototype.cl=function(t,e){var n,r=this.Jc[this.currentUser.$h()];r&&((n=r.get(t))&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this.Jc[this.currentUser.$h()]=r)},Al.prototype.rl=function(t,e){var n=this;void 0===e&&(e=null),this.Uc.sc(t);for(var r=0,i=this.Kc.get(t);r<i.length;r++){var o=i[r];this.jc.delete(o),e&&this.Wc.dl(o,e)}this.Kc.delete(t),this.el&&this.Yc.Ch(t).forEach((function(t){n.Yc.Nr(t)||n.wl(t)}))},Al.prototype.wl=function(t){var e=this.zc.get(t);null!==e&&(this.Bc.lu(e),this.zc=this.zc.remove(t),this.Hc.delete(e),this.ul())},Al.prototype.il=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof fl?(this.Yc.Eo(i.key,t),this.Tl(i)):i instanceof pl?(Lr("SyncEngine","Document no longer in limbo: "+i.key),this.Yc.mo(i.key,t),this.Yc.Nr(i.key)||this.wl(i.key)):Vr()}},Al.prototype.Tl=function(t){var e=t.key;this.zc.get(e)||(Lr("SyncEngine","New document in limbo: "+e),this.Gc.push(e),this.ul())},Al.prototype.ul=function(){for(;0<this.Gc.length&&this.zc.size<this.Qc;){var t=this.Gc.shift(),e=this.Zc.next();this.Hc.set(e,new vl(t)),this.zc=this.zc.st(t,e),this.Bc.listen(new ki(Ea(ma(t.path)),e,2,du.Es))}},Al.prototype.El=function(){return this.zc},Al.prototype.Il=function(){return this.Gc},Al.prototype.hl=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o=this;return h(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.jc.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Sc(t);return e.Nc?Oh(o.La,a.query,!1).then((function(t){var n=t.documents;return a.view.Sc(n,e)})):e})).then((function(t){var i,s=e&&e.Wt.get(a.targetId),u=a.view.Un(t,o.el,s);o.il(a.targetId,u.$c),u.snapshot&&(o.el&&o.Uc.oc(a.targetId,u.snapshot.fromCache?"not-current":"current"),n.push(u.snapshot),i=pu._s(a.targetId,u.snapshot),r.push(i))})))})),[4,Promise.all(i)];case 1:return s.sent(),this.Wc.Ea(n),[4,function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return h(this,(function(h){switch(h.label){case 0:n=t,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return uu.forEach(e,(function(e){return uu.forEach(e.cs,(function(r){return n.persistence.dr.Eo(t,e.targetId,r)})).next((function(){return uu.forEach(e.ls,(function(r){return n.persistence.dr.mo(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Ru(r=h.sent()))throw r;return Lr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Eh.get(a),c=u.Z,l=u.nt(c),n.Eh=n.Eh.st(a,l));return[2]}}))}))}(this.La,r)];case 2:return s.sent(),[2]}}))}))},Al.prototype.nl=function(t){},Al.prototype.vu=function(t){return c(this,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(Lr("SyncEngine","User change. New user:",t.$h()),[4,function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o;return h(this,(function(s){switch(s.label){case 0:return r=(n=t).Gn,i=n.Rh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Gn.yr(t).next((function(s){return o=s,r=n.persistence.oh(e),i=new fu(n.Ah,r,n.persistence.uh()),r.yr(t)})).next((function(e){for(var n=[],r=[],s=Ki(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Zn(t,s).next((function(t){return{ml:t,Al:n,Rl:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Gn=r,n.Rh=i,n.Th.Ph(n.Rh),o)]}}))}))}(this.La,t)]);case 1:return e=n.sent(),this.currentUser=t,this.fl("'waitForPendingWrites' promise is rejected due to a user change."),this.Uc.ac(t,e.Al,e.Rl),[4,this.hl(e.ml)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},Al.prototype.Oe=function(t){var e=this.Hc.get(t);if(e&&e.qc)return Ki().add(e.key);var n=Ki(),r=this.Kc.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.jc.get(s);n=n.Nt(a.view.vc)}return n},Al);function Al(t,e,n,r,i,o){this.La=t,this.Bc=e,this.qa=n,this.Uc=r,this.currentUser=i,this.Qc=o,this.Wc=null,this.jc=new Zr(xa,Aa),this.Kc=new Map,this.Gc=[],this.zc=new Ri(ai.P),this.Hc=new Map,this.Yc=new Rh,this.Jc={},this.Xc=new Map,this.Zc=ih.eo(),this.onlineState="Unknown",this.tl=void 0}function xl(t,e){this.query=t,this.gc=e,this.Vc=null,this.Yt=!1,this.yc=Ki(),this.qt=Ki(),this.pc=ka(t),this.bc=new Ji(this.pc)}function Nl(){this.Rc=new wl,this.Pc={},this.Da=null,this.fs=null}function Sl(t,e,n,r,i){this.window=t,this.Is=e,this.persistenceKey=n,this.ku=r,this.fu=null,this.Da=null,this.fs=null,this.$u=this.xu.bind(this),this.Ou=new Ri(Fr),this.tr=!1,this.Mu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Lu=cl(this.persistenceKey,this.ku),this.qu="firestore_sequence_number_"+this.persistenceKey,this.Ou=this.Ou.st(this.ku,new wl),this.Bu=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Uu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Qu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Wu="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.$u)}function kl(){this.activeTargetIds=Yi}function Ol(t,e){this.clientId=t,this.onlineState=e}function Dl(t,e){this.clientId=t,this.activeTargetIds=e}function Ll(t,e,n){this.targetId=t,this.state=e,this.error=n}function Rl(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function Pl(t,e,n,r){return c(this,void 0,void 0,(function(){var i,o;return h(this,(function(s){switch(s.label){case 0:return(i=t).nl("applyBatchState()"),[4,(a=i.La,u=e,h=(c=a).Gn,c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return h.Pr(t,u).next((function(e){return e?c.Rh.Zn(t,e):uu.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,i.Bc.hu()];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(i.cl(e,r||null),i.La.Gn.Sr(e)):Vr(),s.label=4;case 4:return[4,i.hl(o)];case 5:return s.sent(),[3,7];case 6:Lr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,h}))}))}function Cl(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return h(this,(function(h){switch(h.label){case 0:return n=t,!0!==e||!0===n.tl?[3,3]:(r=n.Uc.zu(),[4,Vl(n,r.N())]);case 1:return i=h.sent(),n.tl=!0,[4,n.Bc.Su(!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],n.Bc.listen(a);return[3,7];case 3:return!1!==e||!1===n.tl?[3,7]:(u=[],c=Promise.resolve(),n.Kc.forEach((function(t,e){n.Uc.ic(e)?u.push(e):c=c.then((function(){return n.rl(e),kh(n.La,e,!0)})),n.Bc.lu(e)})),[4,c]);case 4:return h.sent(),[4,Vl(n,u)];case 5:return h.sent(),(l=n).Hc.forEach((function(t,e){l.Bc.lu(e)})),l.Yc.Nh(),l.Hc=new Map,l.zc=new Ri(ai.P),n.tl=!1,[4,n.Bc.Su(!1)];case 6:h.sent(),h.label=7;case 7:return[2]}var l}))}))}function Vl(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,l,f,p,d,v,y,g;return h(this,(function(m){switch(m.label){case 0:n=t,r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(l=n.Kc.get(a))&&0!==l.length?[4,Sh(n.La,Ea(l[0]))]:[3,7]):[3,13];case 2:u=m.sent(),f=0,p=l,m.label=3;case 3:return f<p.length?(d=p[f],v=n.jc.get(d),[4,function(t,e){return c(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(o){switch(o.label){case 0:return[4,Oh((n=t).La,e.query,!0)];case 1:return r=o.sent(),i=e.view.Mc(r),[2,(n.el&&n.il(e.targetId,i.$c),i)]}}))}))}(n,v)]):[3,6];case 4:(y=m.sent()).snapshot&&i.push(y.snapshot),m.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Dh(n.La,a)];case 8:return g=m.sent(),[4,Sh(n.La,g)];case 9:return u=m.sent(),[4,n.sl(Ml(g),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Wc.Ea(i),r)]}}))}))}function Ml(t){return ga(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ul(t,e,n,r){return c(this,void 0,void 0,(function(){var i,o,s;return h(this,(function(a){switch(a.label){case 0:return(i=t).tl?(Lr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Kc.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,(u=i.La,c=u.Ah,u.persistence.runTransaction("Get new document changes","readonly",(function(t){return c.Ur(t,u.mh)})).then((function(t){var e=t.Qr,n=t.readTime;return u.mh=n,e})))];case 3:return o=a.sent(),s=no.zt(e,"current"===n),[4,i.hl(o,s)];case 4:return a.sent(),[3,8];case 5:return[4,kh(i.La,e,!0)];case 6:return a.sent(),i.rl(e,r),[3,8];case 7:Vr(),a.label=8;case 8:return[2]}var u,c}))}))}function jl(){this.Pl=void 0,this.listeners=[]}var Fl,zl=(Xl.prototype.listen=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i,o,s;return h(this,(function(a){switch(a.label){case 0:if(e=t.query,n=!1,(r=this.gl.get(e))||(n=!0,r=new jl),!n)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,this.fu.listen(e)];case 2:return i.Pl=a.sent(),[3,4];case 3:return o=a.sent(),s=Wu(o,"Initialization of query '"+Na(t.query)+"' failed"),[2,void t.onError(s)];case 4:return this.gl.set(e,r),r.listeners.push(t),t.xc(this.onlineState),r.Pl&&t.yl(r.Pl)&&this.pl(),[2]}}))}))},Xl.prototype.lu=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i;return h(this,(function(o){return e=t.query,n=!1,(r=this.gl.get(e))&&0<=(i=r.listeners.indexOf(t))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.gl.delete(e),this.fu.lu(e))]:[2]}))}))},Xl.prototype.Ea=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.gl.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].yl(i)&&(e=!0);s.Pl=i}}e&&this.pl()},Xl.prototype.dl=function(t,e){var n=this.gl.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.gl.delete(t)},Xl.prototype.al=function(t){this.onlineState=t;var e=!1;this.gl.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].xc(t)&&(e=!0)})),e&&this.pl()},Xl.prototype.bl=function(t){this.Vl.add(t),t.next()},Xl.prototype.vl=function(t){this.Vl.delete(t)},Xl.prototype.pl=function(){this.Vl.forEach((function(t){t.next()}))},Xl),ql=(Yl.prototype.yl=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new eo(t.query,t.docs,t.Lt,e,t.qt,t.fromCache,t.Bt,!0)}var o=!1;return this.Dl?this.Nl(t)&&(this.Sl.next(t),o=!0):this.Fl(t,this.onlineState)&&(this.kl(t),o=!0),this.Cl=t,o},Yl.prototype.onError=function(t){this.Sl.error(t)},Yl.prototype.xc=function(t){this.onlineState=t;var e=!1;return this.Cl&&!this.Dl&&this.Fl(this.Cl,t)&&(this.kl(this.Cl),e=!0),e},Yl.prototype.Fl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.$l&&n||t.docs._()&&"Offline"!==e)},Yl.prototype.Nl=function(t){if(0<t.docChanges.length)return!0;var e=this.Cl&&this.Cl.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},Yl.prototype.kl=function(t){t=eo.Qt(t.query,t.docs,t.qt,t.fromCache),this.Dl=!0,this.Sl.next(t)},Yl),Bl=(Kl.prototype.Ph=function(t){this.xl=t},Kl.prototype.ns=function(t,e,n,r){var o=this;return e.hn()||n.isEqual(ni.min())?this.Ol(t,e):this.xl.Zn(t,r).next((function(s){var a=o.Ml(e,s);return(e.an()||e.un())&&o.Nc(e.nn,a,r,n)?o.Ol(t,e):(Dr()<=i.DEBUG&&Lr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Na(e)),o.xl.ns(t,e,n).next((function(t){return a.forEach((function(e){t=t.st(e.key,e)})),t})))}))},Kl.prototype.Ml=function(t,e){var n=new Fi(ka(t));return e.forEach((function(e,r){r instanceof ua&&Sa(t,r)&&(n=n.add(r))})),n},Kl.prototype.Nc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.o(r))},Kl.prototype.Ol=function(t,e){return Dr()<=i.DEBUG&&Lr("IndexFreeQueryEngine","Using full collection scan to execute query:",Na(e)),this.xl.ns(t,e,ni.min())},Kl),Gl=(Wl.prototype.Ir=function(t){return uu.resolve(0===this.Gn.length)},Wl.prototype.mr=function(t,e,n,r){var i=this.Ll;this.Ll++,0<this.Gn.length&&this.Gn[this.Gn.length-1];var o=new su(i,e,n,r);this.Gn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.ql=this.ql.add(new Ph(u.key,i)),this.zn.Ar(t,u.key.path.p())}return uu.resolve(o)},Wl.prototype.Rr=function(t,e){return uu.resolve(this.Bl(e))},Wl.prototype.gr=function(t,e){var n=e+1,r=this.Ul(n),i=r<0?0:r;return uu.resolve(this.Gn.length>i?this.Gn[i]:null)},Wl.prototype.Vr=function(){return uu.resolve(0===this.Gn.length?-1:this.Ll-1)},Wl.prototype.yr=function(t){return uu.resolve(this.Gn.slice())},Wl.prototype.Yn=function(t,e){var n=this,r=new Ph(e,0),i=new Ph(e,Number.POSITIVE_INFINITY),o=[];return this.ql.St([r,i],(function(t){var e=n.Bl(t.kh);o.push(e)})),uu.resolve(o)},Wl.prototype.es=function(t,e){var n=this,r=new Fi(Fr);return e.forEach((function(t){var e=new Ph(t,0),i=new Ph(t,Number.POSITIVE_INFINITY);n.ql.St([e,i],(function(t){r=r.add(t.kh)}))})),uu.resolve(this.Ql(r))},Wl.prototype.as=function(t,e){var n=e.path,r=n.length+1,i=n;ai.j(i)||(i=i.child(""));var o=new Ph(new ai(i),0),s=new Fi(Fr);return this.ql.Dt((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.kh)),!0)}),o),uu.resolve(this.Ql(s))},Wl.prototype.Ql=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Bl(t);null!==r&&n.push(r)})),n},Wl.prototype.br=function(t,e){var n=this;Mr(0===this.Wl(e.batchId,"removed")),this.Gn.shift();var r=this.ql;return uu.forEach(e.mutations,(function(i){var o=new Ph(i.key,e.batchId);return r=r.delete(o),n.dr.Dr(t,i.key)})).next((function(){n.ql=r}))},Wl.prototype.Sr=function(t){},Wl.prototype.Nr=function(t,e){var n=new Ph(e,0),r=this.ql.Ct(n);return uu.resolve(e.isEqual(r&&r.key))},Wl.prototype.Cr=function(t){return this.Gn.length,uu.resolve()},Wl.prototype.Wl=function(t,e){return this.Ul(t)},Wl.prototype.Ul=function(t){return 0===this.Gn.length?0:t-this.Gn[0].batchId},Wl.prototype.Bl=function(t){var e=this.Ul(t);return e<0||e>=this.Gn.length?null:this.Gn[e]},Wl),$l=(Hl.prototype.xn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jl(e);return this.docs=this.docs.st(r,{Or:e,size:s,readTime:n}),this.size+=s-o,this.zn.Ar(t,r.path.p())},Hl.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Hl.prototype.Ln=function(t,e){var n=this.docs.get(e);return uu.resolve(n?n.Or:null)},Hl.prototype.getEntries=function(t,e){var n=this,r=qi;return e.forEach((function(t){var e=n.docs.get(t);r=r.st(t,e?e.Or:null)})),uu.resolve(r)},Hl.prototype.ns=function(t,e,n){for(var r=$i,i=new ai(e.path.child("")),o=this.docs.ct(i);o.Tt();){var s=o.wt(),a=s.key,u=s.value,c=u.Or,h=u.readTime;if(!e.path.D(a.path))break;h.o(n)<=0||c instanceof ua&&Sa(e,c)&&(r=r.st(c.key,c))}return uu.resolve(r)},Hl.prototype.Kl=function(t,e){return uu.forEach(this.docs,(function(t){return e(t)}))},Hl.prototype.jr=function(t){return new Hl.Kr(this)},Hl.prototype.zr=function(t){return uu.resolve(this.size)},Hl);function Hl(t,e){this.zn=t,this.jl=e,this.docs=new Ri(ai.P),this.size=0}function Wl(t,e){this.zn=t,this.dr=e,this.Gn=[],this.Ll=1,this.ql=new Fi(Ph.yh)}function Kl(){}function Yl(t,e,n){this.query=t,this.Sl=e,this.Dl=!1,this.Cl=null,this.onlineState="Unknown",this.options=n||{}}function Xl(t){this.fu=t,this.gl=new Zr(xa,Aa),this.onlineState="Unknown",this.Vl=new Set,this.fu.subscribe(this)}function Ql(t){var e=this;return(e=Fl.call(this)||this).Hr=t,e}$l.Kr=(u(Ql,Fl=cu),Ql.prototype.Un=function(t){var e=this,n=[];return this.Fn.forEach((function(r,i){i?n.push(e.Hr.xn(t,i,e.readTime)):e.Hr.Mn(r)})),uu.Cn(n)},Ql.prototype.qn=function(t,e){return this.Hr.Ln(t,e)},Ql.prototype.Bn=function(t,e){return this.Hr.getEntries(t,e)},Ql);var Zl,Jl,tf=(mf.prototype.be=function(t,e){return this.Gl.forEach((function(t,n){return e(n)})),uu.resolve()},mf.prototype.ro=function(t){return uu.resolve(this.lastRemoteSnapshotVersion)},mf.prototype.oo=function(t){return uu.resolve(this.zl)},mf.prototype.no=function(t){return this.highestTargetId=this.Yl.next(),uu.resolve(this.highestTargetId)},mf.prototype.ho=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zl&&(this.zl=e),uu.resolve()},mf.prototype.uo=function(t){this.Gl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yl=new ih(e),this.highestTargetId=e),t.sequenceNumber>this.zl&&(this.zl=t.sequenceNumber)},mf.prototype.ao=function(t,e){return this.uo(e),this.targetCount+=1,uu.resolve()},mf.prototype.lo=function(t,e){return this.uo(e),uu.resolve()},mf.prototype._o=function(t,e){return this.Gl.delete(e.target),this.Hl.Ch(e.targetId),--this.targetCount,uu.resolve()},mf.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return this.Gl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gl.delete(s),o.push(r.fo(t,a.targetId)),i++)})),uu.Cn(o).next((function(){return i}))},mf.prototype.do=function(t){return uu.resolve(this.targetCount)},mf.prototype.wo=function(t,e){var n=this.Gl.get(e)||null;return uu.resolve(n)},mf.prototype.To=function(t,e,n){return this.Hl.vh(e,n),uu.resolve()},mf.prototype.Io=function(t,e,n){this.Hl.Dh(e,n);var r=this.persistence.dr,i=[];return r&&e.forEach((function(e){i.push(r.Dr(t,e))})),uu.Cn(i)},mf.prototype.fo=function(t,e){return this.Hl.Ch(e),uu.resolve()},mf.prototype.Ao=function(t,e){var n=this.Hl.Fh(e);return uu.resolve(n)},mf.prototype.Nr=function(t,e){return uu.resolve(this.Hl.Nr(e))},mf),ef=(gf.prototype.start=function(){return Promise.resolve()},gf.prototype.th=function(){return this.po=!1,Promise.resolve()},Object.defineProperty(gf.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),gf.prototype.Bo=function(){},gf.prototype.Uo=function(){},gf.prototype.uh=function(){return this.zn},gf.prototype.oh=function(t){var e=this.Jl[t.$h()];return e||(e=new Gl(this.zn,this.dr),this.Jl[t.$h()]=e),e},gf.prototype.hh=function(){return this.ko},gf.prototype.ah=function(){return this.Kn},gf.prototype.runTransaction=function(t,e,n){var r=this;Lr("MemoryPersistence","Starting transaction:",t);var i=new nf(this.yo.next());return this.dr.Zl(),n(i).next((function(t){return r.dr.t_(i).next((function(){return t}))})).Sn().then((function(t){return i.jn(),t}))},gf.prototype.e_=function(t,e){return uu.Nn(Object.values(this.Jl).map((function(n){return function(){return n.Nr(t,e)}})))},gf),nf=(u(yf,Jl=lu),yf),rf=(vf.i_=function(t){return new vf(t)},Object.defineProperty(vf.prototype,"r_",{get:function(){if(this.s_)return this.s_;throw Vr()},enumerable:!1,configurable:!0}),vf.prototype.Eo=function(t,e,n){return this.n_.Eo(n,e),this.r_.delete(n.toString()),uu.resolve()},vf.prototype.mo=function(t,e,n){return this.n_.mo(n,e),this.r_.add(n.toString()),uu.resolve()},vf.prototype.Dr=function(t,e){return this.r_.add(e.toString()),uu.resolve()},vf.prototype.removeTarget=function(t,e){var n=this;this.n_.Ch(e.targetId).forEach((function(t){return n.r_.add(t.toString())}));var r=this.persistence.hh();return r.Ao(t,e.targetId).next((function(t){t.forEach((function(t){return n.r_.add(t.toString())}))})).next((function(){return r._o(t,e)}))},vf.prototype.Zl=function(){this.s_=new Set},vf.prototype.t_=function(t){var e=this,n=this.persistence.ah().jr();return uu.forEach(this.r_,(function(r){var i=ai.B(r);return e.o_(t,i).next((function(t){t||n.Mn(i)}))})).next((function(){return e.s_=null,n.apply(t)}))},vf.prototype.wh=function(t,e){var n=this;return this.o_(t,e).next((function(t){t?n.r_.delete(e.toString()):n.r_.add(e.toString())}))},vf.prototype.Xl=function(t){return 0},vf.prototype.o_=function(t,e){var n=this;return uu.Nn([function(){return uu.resolve(n.n_.Nr(e))},function(){return n.persistence.hh().Nr(t,e)},function(){return n.persistence.e_(t,e)}])},vf),of=(df.prototype.wa=function(t){this.u_=t},df.prototype.ca=function(t){this.c_=t},df.prototype.onMessage=function(t){this.l_=t},df.prototype.close=function(){this.a_()},df.prototype.send=function(t){this.h_(t)},df.prototype.__=function(){this.u_()},df.prototype.f_=function(t){this.c_(t)},df.prototype.d_=function(t){this.l_(t)},df),sf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},af=(pf.prototype.va=function(t,e,n,r){var i=this.I_(t,e);Lr("RestConnection","Sending: ",i,n);var o={};return this.m_(o,r),this.A_(t,i,o,n).then((function(t){return Lr("RestConnection","Received: ",t),t}),(function(e){throw Pr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},pf.prototype.Sa=function(t,e,n,r){return this.va(t,e,n,r)},pf.prototype.m_=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.19.1",t["Content-Type"]="text/plain",e)for(var n in e.Mh)e.Mh.hasOwnProperty(n)&&(t[n]=e.Mh[n])},pf.prototype.I_=function(t,e){var n=sf[t];return this.T_+"/v1/"+e+":"+n},u(ff,Zl=pf),ff.prototype.A_=function(t,e,n,r){return new Promise((function(i,o){var s=new Nr;s.listenOnce(Ar.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Tr.NO_ERROR:var e=s.getResponseJson();Lr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Tr.TIMEOUT:Lr("Connection",'RPC "'+t+'" timed out'),o(new ti(Jr.DEADLINE_EXCEEDED,"Request time out"));break;case Tr.HTTP_ERROR:var n,r,a=s.getStatus();Lr("Connection",'RPC "'+t+'" failed with status:',a,"response text:",s.getResponseText()),0<a?(n=s.getResponseJson().error)&&n.status&&n.message?(u=n.status.toLowerCase().replace("_","-"),r=0<=Object.values(Jr).indexOf(u)?u:Jr.UNKNOWN,o(new ti(r,n.message))):o(new ti(Jr.UNKNOWN,"Server responded with status "+s.getStatus())):o(new ti(Jr.UNAVAILABLE,"Connection failed."));break;default:Vr()}}finally{Lr("Connection",'RPC "'+t+'" completed.')}var u}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},ff.prototype.Ta=function(t,e){var n,r,i=[this.T_,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=_r(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.m_(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=b().indexOf("Electron/")||0<=(r=b()).indexOf("MSIE ")||0<=r.indexOf("Trident/")||0<=b().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");function u(t,e){c.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))}Lr("Connection","Creating WebChannel: "+a,s);var c=o.createWebChannel(a,s),h=!1,l=!1,f=new of({h_:function(t){l?Lr("Connection","Not sending because WebChannel is closed:",t):(h||(Lr("Connection","Opening WebChannel transport."),c.open(),h=!0),Lr("Connection","WebChannel sending:",t),c.send(t))},a_:function(){return c.close()}});return u(xr.EventType.OPEN,(function(){l||Lr("Connection","WebChannel transport opened.")})),u(xr.EventType.CLOSE,(function(){l||(l=!0,Lr("Connection","WebChannel transport closed"),f.f_())})),u(xr.EventType.ERROR,(function(t){l||(l=!0,Pr("Connection","WebChannel transport errored:",t),f.f_(new ti(Jr.UNAVAILABLE,"The operation could not be completed")))})),u(xr.EventType.MESSAGE,(function(t){var e,n,r,i,o,s;l||(Mr(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(Lr("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=Ni[i];if(void 0!==t)return Li(t)}(),s=r.message,void 0===o&&(o=Jr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.f_(new ti(o,s)),c.close()):(Lr("Connection","WebChannel received:",n),f.d_(n)))})),setTimeout((function(){f.__()}),0),f},ff),uf=(lf.prototype.Ka=function(t){this.y_.push(t)},lf.prototype.th=function(){window.removeEventListener("online",this.R_),window.removeEventListener("offline",this.g_)},lf.prototype.p_=function(){window.addEventListener("online",this.R_),window.addEventListener("offline",this.g_)},lf.prototype.P_=function(){Lr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(0)},lf.prototype.V_=function(){Lr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(1)},lf.ks=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},lf),cf=(hf.prototype.Ka=function(t){},hf.prototype.th=function(){},hf);function hf(){}function lf(){var t=this;this.R_=function(){return t.P_()},this.g_=function(){return t.V_()},this.y_=[],this.p_()}function ff(t){var e=this;return(e=Zl.call(this,t)||this).forceLongPolling=t.forceLongPolling,e}function pf(t){this.w_=t,this.s=t.s;var e=t.ssl?"https":"http";this.T_=e+"://"+t.host,this.E_="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}function df(t){this.h_=t.h_,this.a_=t.a_}function vf(t){this.persistence=t,this.n_=new Rh,this.s_=null}function yf(t){var e=this;return(e=Jl.call(this)||this).Ro=t,e}function gf(t){var e=this;this.Jl={},this.yo=new du(0),this.po=!1,this.po=!0,this.dr=t(this),this.ko=new tf(this),this.zn=new Lc,this.Kn=new $l(this.zn,(function(t){return e.dr.Xl(t)}))}function mf(t){this.persistence=t,this.Gl=new Zr(Ei,Ii),this.lastRemoteSnapshotVersion=ni.min(),this.highestTargetId=0,this.zl=0,this.Hl=new Rh,this.targetCount=0,this.Yl=ih.to()}function bf(t){return new Vo(t,!0)}var wf,Ef,If="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",_f=(kf.prototype.initialize=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.Uc=this.b_(t),this.persistence=this.v_(t),[4,this.persistence.start()];case 1:return e.sent(),this.S_=this.D_(t),this.La=this.C_(t),[2]}}))}))},kf.prototype.D_=function(t){return null},kf.prototype.C_=function(t){return e=this.persistence,n=new Bl,r=t.N_,new _h(e,n,r);var e,n,r},kf.prototype.v_=function(t){if(t.k_.F_)throw new ti(Jr.FAILED_PRECONDITION,If);return new ef(rf.i_)},kf.prototype.b_=function(t){return new Il},kf.prototype.terminate=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.S_&&this.S_.stop(),[4,this.Uc.th()];case 1:return t.sent(),[4,this.persistence.th()];case 2:return t.sent(),[2]}}))}))},kf.prototype.clearPersistence=function(t,e){throw new ti(Jr.FAILED_PRECONDITION,If)},kf),Tf=(u(Sf,Ef=_f),Sf.prototype.initialize=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,Ef.prototype.initialize.call(this,t)];case 1:return e.sent(),[4,function(t){return c(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){return n=(e=t).Ah,[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return n.Wr(t)})).then((function(t){e.mh=t}))]}))}))}(this.La)];case 2:return e.sent(),[2]}}))}))},Sf.prototype.D_=function(t){var e=this.persistence.dr.Yi;return new tc(e,t.ei)},Sf.prototype.v_=function(t){var e=Ih(t.w_.s,t.w_.persistenceKey),n=bf(t.w_.s);return new dh(t.k_.synchronizeTabs,e,t.clientId,Qu.Ui(t.k_.cacheSizeBytes),t.ei,zu(),qu(),n,this.Uc,t.k_.Vo)},Sf.prototype.b_=function(t){return new Il},Sf.prototype.clearPersistence=function(t,e){return function(t){return c(this,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:return xu.ks()?(e=t+"main",[4,xu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ih(t,e))},u(Nf,wf=Sf),Nf.prototype.initialize=function(t){return c(this,void 0,void 0,(function(){var e,n=this;return h(this,(function(r){switch(r.label){case 0:return[4,wf.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,this.x_.initialize(this,t)];case 2:return r.sent(),e=this.x_.fu,this.Uc instanceof El?(this.Uc.fu={Ic:Pl.bind(null,e),mc:Ul.bind(null,e),Ac:function(t,e,n){return c(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,p;return h(this,(function(d){switch(d.label){case 0:if(!(r=t).tl)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Kc.has(s)?(Lr("SyncEngine","Adding an already active target "+s),[3,5]):[4,Dh(r.La,s)]):[3,6];case 2:return a=d.sent(),[4,Sh(r.La,a)];case 3:return u=d.sent(),[4,r.sl(Ml(a),u.targetId,!1)];case 4:d.sent(),r.Bc.listen(u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return h(this,(function(e){switch(e.label){case 0:return r.Kc.has(t)?[4,kh(r.La,t,!1).then((function(){r.Bc.lu(t),r.rl(t)})).catch(Lh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,c(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}.bind(null,e),rh:function(t){return t.La.persistence.rh()}.bind(null,e)},[4,this.Uc.start()]):[3,4];case 3:r.sent(),r.label=4;case 4:return[4,this.persistence.qo((function(t){return c(n,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,Cl(this.x_.fu,t)];case 1:return e.sent(),this.S_&&(t&&!this.S_.tr?this.S_.start(this.La):t||this.S_.stop()),[2]}}))}))}))];case 5:return r.sent(),[2]}}))}))},Nf.prototype.b_=function(t){if(t.k_.F_&&t.k_.synchronizeTabs){var e=zu();if(!El.ks(e))throw new ti(Jr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ih(t.w_.s,t.w_.persistenceKey);return new El(e,t.ei,n,t.clientId,t.N_)}return new Il},Nf),Af=(xf.prototype.initialize=function(t,e){return c(this,void 0,void 0,(function(){var n=this;return h(this,(function(r){switch(r.label){case 0:return this.La?[3,3]:(this.La=t.La,this.Uc=t.Uc,this.qa=this.O_(e),this.Bc=this.M_(e),this.fu=this.L_(e),this.q_=this.B_(e),this.Uc.Da=function(t){return n.fu.xc(t,1)},this.Bc.fu=this.fu,[4,this.Bc.start()]);case 1:return r.sent(),[4,this.Bc.Su(this.fu.el)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},xf.prototype.B_=function(t){return new zl(this.fu)},xf.prototype.O_=function(t){var e,n,r=bf(t.w_.s),i=(e=t.w_,new af(e));return n=t.credentials,new Xh(n,i,r)},xf.prototype.M_=function(t){var e=this;return new Zh(this.La,this.qa,t.ei,(function(t){return e.fu.xc(t,0)}),new(uf.ks()?uf:cf))},xf.prototype.L_=function(t){return e=this.La,n=this.Bc,r=this.qa,i=this.Uc,o=t.N_,s=t.Qc,a=!t.k_.F_||!t.k_.synchronizeTabs,u=new Tl(e,n,r,i,o,s),a&&(u.tl=!0),u;var e,n,r,i,o,s,a,u},xf.prototype.terminate=function(){return this.Bc.th()},xf);function xf(){}function Nf(t){var e=this;return(e=wf.call(this)||this).x_=t,e}function Sf(){return null!==Ef&&Ef.apply(this,arguments)||this}function kf(){}function Of(t){return function(){if("object"==typeof t&&null!==t)for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}}()}var Df=(Lf.prototype.next=function(t){this.observer.next&&this.U_(this.observer.next,t)},Lf.prototype.error=function(t){this.observer.error?this.U_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Lf.prototype.Q_=function(){this.muted=!0},Lf.prototype.U_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},Lf);function Lf(t){this.observer=t,this.muted=!1}function Rf(t,e){if(0!==e.length)throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Qf(e.length,"argument")+".")}function Pf(t,e,n){if(e.length!==n)throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires "+Qf(n,"argument")+", but was called with "+Qf(e.length,"argument")+".")}function Cf(t,e,n){if(e.length<n)throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Qf(n,"argument")+", but was called with "+Qf(e.length,"argument")+".")}function Vf(t,e,n,r){if(e.length<n||e.length>r)throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Qf(e.length,"argument")+".")}function Mf(t,e,n,r){Bf(t,e,Xf(n)+" argument",r)}function Uf(t,e,n,r){void 0!==r&&Mf(t,e,n,r)}function jf(t,e,n,r){Bf(t,e,n+" option",r)}function Ff(t,e,n,r){void 0!==r&&jf(t,e,n,r)}function zf(t,e,n,r,i){void 0!==r&&function(t,e,n){for(var r=[],o=0,s=i;o<s.length;o++){var a=s[o];if(a===n)return;r.push($f(a))}var u=$f(n);throw new ti(Jr.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function qf(t,e,n,r){if(!e.some((function(t){return t===r})))throw new ti(Jr.INVALID_ARGUMENT,"Invalid value "+$f(r)+" provided to function "+t+"() for its "+Xf(n)+" argument. Acceptable values: "+e.join(", "));return r}function Bf(t,e,n,r){if(!("object"===e?Gf(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=$f(r);throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Gf(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function $f(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Vr();if(t instanceof Array)return"an array";var e=function(){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}();return e?"a custom "+e+" object":"an object"}function Hf(t,e,n){if(void 0===n)throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Xf(e)+" argument, but it was undefined.")}function Wf(t,e,n){Wr(e,(function(e,r){if(n.indexOf(e)<0)throw new ti(Jr.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Kf(t,e,n,r){var i=$f(r);return new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires its "+Xf(n)+" argument to be a "+e+", but it was: "+i)}function Yf(t,e,n){if(n<=0)throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires its "+Xf(e)+" argument to be a positive number, but it was: "+n+".")}function Xf(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Qf(t,e){return t+" "+e+(1===t?"":"s")}function Zf(){if("undefined"==typeof Uint8Array)throw new ti(Jr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Jf(){if("undefined"==typeof atob)throw new ti(Jr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var tp,ep,np=(hp.fromBase64String=function(t){Pf("Blob.fromBase64String",arguments,1),Mf("Blob.fromBase64String","string",1,t),Jf();try{return new hp(Ti.fromBase64String(t))}catch(t){throw new ti(Jr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},hp.fromUint8Array=function(t){if(Pf("Blob.fromUint8Array",arguments,1),Zf(),!(t instanceof Uint8Array))throw Kf("Blob.fromUint8Array","Uint8Array",1,t);return new hp(Ti.fromUint8Array(t))},hp.prototype.toBase64=function(){return Pf("Blob.toBase64",arguments,0),Jf(),this.W_.toBase64()},hp.prototype.toUint8Array=function(){return Pf("Blob.toUint8Array",arguments,0),Zf(),this.W_.toUint8Array()},hp.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},hp.prototype.isEqual=function(t){return this.W_.isEqual(t.W_)},hp),rp=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new ti(Jr.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(Mf("FieldPath","string",e,t[e]),0===t[e].length)throw new ti(Jr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new si(t)},ip=(u(cp,ep=rp),cp.documentId=function(){return new cp(si.L().F())},cp.prototype.isEqual=function(t){if(!(t instanceof cp))throw Kf("isEqual","FieldPath",1,t);return this.j_.isEqual(t.j_)},cp),op=new RegExp("[~\\*/\\[\\]]"),sp=function(){this.K_=this},ap=(u(up,tp=sp),up.prototype.z_=function(t){if(2!==t.H_)throw 1===t.H_?t.Y_(this.G_+"() can only appear at the top level of your update data"):t.Y_(this.G_+"() cannot be used with set() unless you pass {merge:true}");return t.qe.push(t.path),null},up.prototype.isEqual=function(t){return t instanceof up},up);function up(t){var e=this;return(e=tp.call(this)||this).G_=t,e}function cp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ep.call(this,t)||this}function hp(t){Jf(),this.W_=t}function lp(t,e,n){return new jp({H_:3,J_:e.settings.J_,methodName:t.G_,X_:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var fp,pp,dp,vp,yp,gp,mp=(u(Mp,gp=sp),Mp.prototype.z_=function(t){return new xs(t.path,new ls)},Mp.prototype.isEqual=function(t){return t instanceof Mp},Mp),bp=(u(Vp,yp=sp),Vp.prototype.z_=function(t){var e=lp(this,t,!0),n=this.Z_.map((function(t){return Wp(t,e)})),r=new fs(n);return new xs(t.path,r)},Vp.prototype.isEqual=function(t){return this===t},Vp),wp=(u(Cp,vp=sp),Cp.prototype.z_=function(t){var e=lp(this,t,!0),n=this.Z_.map((function(t){return Wp(t,e)})),r=new gs(n);return new xs(t.path,r)},Cp.prototype.isEqual=function(t){return this===t},Cp),Ep=(u(Pp,dp=sp),Pp.prototype.z_=function(t){var e=new Es(t.serializer,jo(t.serializer,this.tf));return new xs(t.path,e)},Pp.prototype.isEqual=function(t){return this===t},Pp),Ip=(u(Rp,pp=sp),Rp.delete=function(){return Rf("FieldValue.delete",arguments),new _p(new ap("FieldValue.delete"))},Rp.serverTimestamp=function(){return Rf("FieldValue.serverTimestamp",arguments),new _p(new mp("FieldValue.serverTimestamp"))},Rp.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Cf("FieldValue.arrayUnion",arguments,1),new _p(new bp("FieldValue.arrayUnion",t))},Rp.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Cf("FieldValue.arrayRemove",arguments,1),new _p(new wp("FieldValue.arrayRemove",t))},Rp.increment=function(t){return Mf("FieldValue.increment","number",1,t),Pf("FieldValue.increment",arguments,1),new _p(new Ep("FieldValue.increment",t))},Rp),_p=(u(Lp,fp=Ip),Lp.prototype.z_=function(t){return this.K_.z_(t)},Lp.prototype.isEqual=function(t){return t instanceof Lp&&this.K_.isEqual(t.K_)},Lp),Tp=(Object.defineProperty(Dp.prototype,"latitude",{get:function(){return this.ef},enumerable:!1,configurable:!0}),Object.defineProperty(Dp.prototype,"longitude",{get:function(){return this.nf},enumerable:!1,configurable:!0}),Dp.prototype.isEqual=function(t){return this.ef===t.ef&&this.nf===t.nf},Dp.prototype.toJSON=function(){return{latitude:this.ef,longitude:this.nf}},Dp.prototype.T=function(t){return Fr(this.ef,t.ef)||Fr(this.nf,t.nf)},Dp),Ap=/^__.*__$/,xp=function(t,e,n){this.sf=t,this.if=e,this.rf=n},Np=(Op.prototype.hf=function(t,e){var n=[];return null!==this.qe?n.push(new Fs(t,this.data,this.qe,e)):n.push(new js(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new $s(t,this.fieldTransforms)),n},Op),Sp=(kp.prototype.hf=function(t,e){var n=[new Fs(t,this.data,this.qe,e)];return 0<this.fieldTransforms.length&&n.push(new $s(t,this.fieldTransforms)),n},kp);function kp(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}function Op(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}function Dp(t,e){if(Pf("GeoPoint",arguments,2),Mf("GeoPoint","number",1,t),Mf("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new ti(Jr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new ti(Jr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.ef=t,this.nf=e}function Lp(t){var e=this;return(e=fp.call(this)||this).K_=t,e.G_=t.G_,e}function Rp(){return pp.call(this)||this}function Pp(t,e){var n=this;return(n=dp.call(this)||this).G_=t,n.tf=e,n}function Cp(t,e){var n=this;return(n=vp.call(this)||this).G_=t,n.Z_=e,n}function Vp(t,e){var n=this;return(n=yp.call(this)||this).G_=t,n.Z_=e,n}function Mp(t){var e=this;return(e=gp.call(this)||this).G_=t,e}function Up(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Vr()}}var jp=(Object.defineProperty(qp.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(qp.prototype,"H_",{get:function(){return this.settings.H_},enumerable:!1,configurable:!0}),qp.prototype.uf=function(t){return new qp(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.qe)},qp.prototype.cf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.uf({path:n,X_:!1});return r.lf(t),r},qp.prototype._f=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.uf({path:n,X_:!1});return r.af(),r},qp.prototype.ff=function(t){return this.uf({path:void 0,X_:!0})},qp.prototype.Y_=function(t){return Jp(t,this.settings.methodName,this.settings.df||!1,this.path,this.settings.J_)},qp.prototype.contains=function(t){return void 0!==this.qe.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},qp.prototype.af=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.lf(this.path.get(t))},qp.prototype.lf=function(t){if(0===t.length)throw this.Y_("Document fields must not be empty");if(Up(this.H_)&&Ap.test(t))throw this.Y_('Document fields cannot begin and end with "__"')},qp),Fp=(zp.prototype.wf=function(t,e,n,r){return void 0===r&&(r=!1),new jp({H_:t,methodName:e,J_:n,path:si.$(),X_:!1,df:r},this.s,this.serializer,this.ignoreUndefinedProperties)},zp);function zp(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||bf(t)}function qp(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.af(),this.fieldTransforms=i||[],this.qe=o||[]}function Bp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.wf(o.merge||o.mergeFields?2:0,e,n,i);Xp("Data must be an object, but it was:",s,r);var a,u,c=Kp(r,s);if(o.merge)a=new As(s.qe),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=f[l],d=void 0;if(p instanceof rp)d=p.j_;else{if("string"!=typeof p)throw Vr();d=Zp(e,p,n)}if(!s.contains(d))throw new ti(Jr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");td(h,d)||h.push(d)}a=new As(h),u=s.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,u=s.fieldTransforms;return new Np(new Zs(c),a,u)}function Gp(t,e,n,r){var i=t.wf(1,e,n);Xp("Data must be an object, but it was:",i,r);var o=[],s=new Js;Wr(r,(function(t,r){var a,u=Zp(e,t,n),c=i._f(u);r instanceof sp&&r.K_ instanceof ap?o.push(u):null!=(a=Wp(r,c))&&(o.push(u),s.set(u,a))}));var a=new As(o);return new Sp(s.ze(),a,i.fieldTransforms)}function $p(t,e,n,r,i,o){var s=t.wf(1,e,n),a=[Qp(e,r,n)],u=[i];if(o.length%2!=0)throw new ti(Jr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Qp(e,o[c])),u.push(o[c+1]);for(var h,l,f,p,d=[],v=new Js,y=a.length-1;0<=y;--y)td(d,a[y])||(h=a[y],l=u[y],f=s._f(h),l instanceof sp&&l.K_ instanceof ap?d.push(h):null!=(p=Wp(l,f))&&(d.push(h),v.set(h,p)));var g=new As(d);return new Sp(v.ze(),g,s.fieldTransforms)}function Hp(t,e,n,r){return void 0===r&&(r=!1),Wp(n,t.wf(r?4:3,e))}function Wp(t,e){if(Yp(t))return Xp("Unsupported field value:",e,t),Kp(t,e);if(t instanceof sp)return function(t,e){if(!Up(e.H_))throw e.Y_(t.G_+"() can only be used with update() and set()");if(!e.path)throw e.Y_(t.G_+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.qe.push(e.path),t instanceof Array){if(e.settings.X_&&4!==e.H_)throw e.Y_("Nested arrays are not supported");return function(e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Wp(o[i],e.ff(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jo(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ei.fromDate(t);return{timestampValue:Fo(e.serializer,n)}}if(t instanceof ei){var r=new ei(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Fo(e.serializer,r)}}if(t instanceof Tp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof np)return{bytesValue:zo(e.serializer,t)};if(t instanceof xp){var i=e.s,o=t.sf;if(!o.isEqual(i))throw e.Y_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Bo(t.sf||e.s,t.if.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Y_("Unsupported field value: "+$f(t))}(t,e)}function Kp(t,e){var n={};return Kr(t)?e.path&&0<e.path.length&&e.qe.push(e.path):Wr(t,(function(t,r){var i=Wp(r,e.cf(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Yp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ei||t instanceof Tp||t instanceof np||t instanceof xp||t instanceof sp)}function Xp(t,e,n){if(!Yp(n)||!Gf(n)){var r=$f(n);throw"an object"===r?e.Y_(t+" a custom object"):e.Y_(t+" "+r)}}function Qp(t,e,n){if(e instanceof rp)return e.j_;if("string"==typeof e)return Zp(t,e);throw Jp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Zp(t,e,n){try{return function(t){if(0<=t.search(op))throw new ti(Jr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ip.bind.apply(ip,l([void 0],t.split("."))))}catch(e){throw new ti(Jr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).j_}catch(e){throw Jp(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function Jp(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ti(Jr.INVALID_ARGUMENT,(a+=". ")+t+u)}function td(t,e){return t.some((function(t){return t.isEqual(e)}))}var ed=(sd.prototype.Af=function(t){return c(this,void 0,void 0,(function(){var e,n=this;return h(this,(function(r){switch(r.label){case 0:if(this.Rf(),0<this.mutations.length)throw new ti(Jr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a;return h(this,(function(u){switch(u.label){case 0:return r=Yo((n=t).serializer)+"/documents",i={documents:e.map((function(t){return $o(n.serializer,t)}))},[4,n.Sa("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.serializer,"found"in(r=t)?function(t,e){Mr(!!e.found),e.found.name,e.found.updateTime;var n=Ho(t,e.found.name),r=qo(e.found.updateTime),i=new Zs({mapValue:{fields:e.found.fields}});return new ua(n,r,i,{})}(e,r):"missing"in r?function(t,e){Mr(!!e.missing),Mr(!!e.readTime);var n=Ho(t,e.missing),r=qo(e.readTime);return new ca(n,r)}(e,r):Vr());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Mr(!!e),a.push(e)})),a)]}}))}))}(this.qa,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof ca||t instanceof ua?n.Pf(t):Vr()})),e)]}}))}))},sd.prototype.set=function(t,e){this.write(e.hf(t,this.Qe(t))),this.mf.add(t.toString())},sd.prototype.update=function(t,e){try{this.write(e.hf(t,this.gf(t)))}catch(t){this.If=t}this.mf.add(t.toString())},sd.prototype.delete=function(t){this.write([new Xs(t,this.Qe(t))]),this.mf.add(t.toString())},sd.prototype.commit=function(){return c(this,void 0,void 0,(function(){var t,e=this;return h(this,(function(n){switch(n.label){case 0:if(this.Rf(),this.If)throw this.If;return t=this.Tf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ai.B(n);e.mutations.push(new Qs(r,e.Qe(r)))})),[4,function(t,e){return c(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(o){switch(o.label){case 0:return r=Yo((n=t).serializer)+"/documents",i={writes:e.map((function(t){return Zo(n.serializer,t)}))},[4,n.va("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.qa,this.mutations)];case 1:return n.sent(),this.Ef=!0,[2]}}))}))},sd.prototype.Pf=function(t){var e;if(t instanceof ua)e=t.version;else{if(!(t instanceof ca))throw Vr();e=ni.min()}var n=this.Tf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ti(Jr.ABORTED,"Document version changed between two reads.")}else this.Tf.set(t.key.toString(),e)},sd.prototype.Qe=function(t){var e=this.Tf.get(t.toString());return!this.mf.has(t.toString())&&e?ks.updateTime(e):ks.We()},sd.prototype.gf=function(t){var e=this.Tf.get(t.toString());if(this.mf.has(t.toString())||!e)return ks.exists(!0);if(e.isEqual(ni.min()))throw new ti(Jr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ks.updateTime(e)},sd.prototype.write=function(t){this.Rf(),this.mutations=this.mutations.concat(t)},sd.prototype.Rf=function(){},sd),nd=(od.prototype.run=function(){this.yf()},od.prototype.yf=function(){var t=this;this.Ti.bs((function(){return c(t,void 0,void 0,(function(){var t,e,n=this;return h(this,(function(r){return t=new ed(this.qa),(e=this.pf(t))&&e.then((function(e){n.ei.ai((function(){return t.commit().then((function(){n.ii.resolve(e)})).catch((function(t){n.bf(t)}))}))})).catch((function(t){n.bf(t)})),[2]}))}))}))},od.prototype.pf=function(t){try{var e=this.updateFunction(t);return!yi(e)&&e.catch&&e.then?e:(this.ii.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ii.reject(t),null}},od.prototype.bf=function(t){var e=this;0<this.Vf&&this.vf(t)?(--this.Vf,this.ei.ai((function(){return e.yf(),Promise.resolve()}))):this.ii.reject(t)},od.prototype.vf=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!Di(e)},od),rd=(id.prototype.start=function(t,e,n,r){var i=this;this.Df(),this.w_=t;var o=new _u,s=!1;return this.credentials.Bh((function(t){return s?void i.ei.gi((function(){return i.Bc.vu(t)})):(s=!0,Lr("FirestoreClient","Initializing. user=",t.uid),i.Cf(e,n,r,t,o).then(i.Sf.resolve,i.Sf.reject))})),this.ei.ai((function(){return i.Sf.promise})),o.promise},id.prototype.enableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!0),t.Bc.enableNetwork()}))},id.prototype.Cf=function(t,e,n,r,i){return c(this,void 0,void 0,(function(){var o,s,a=this;return h(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),o={ei:this.ei,w_:this.w_,clientId:this.clientId,credentials:this.credentials,N_:r,Qc:100,k_:n},[4,t.initialize(o)];case 1:return u.sent(),[4,e.initialize(t,o)];case 2:return u.sent(),this.persistence=t.persistence,this.Uc=t.Uc,this.La=t.La,this.S_=t.S_,this.qa=e.qa,this.Bc=e.Bc,this.fu=e.fu,this.Nf=e.q_,this.persistence.Bo((function(){return c(a,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(s=u.sent(),i.reject(s),!this.Ff(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.Cf(new _f,new Af,{F_:!1},r,i))];case 4:return[2]}}))}))},id.prototype.Ff=function(t){return"FirebaseError"===t.name?t.code===Jr.FAILED_PRECONDITION||t.code===Jr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},id.prototype.Df=function(){if(this.ei.Ii)throw new ti(Jr.FAILED_PRECONDITION,"The client has already been terminated.")},id.prototype.disableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!1),t.Bc.disableNetwork()}))},id.prototype.terminate=function(){var t=this;this.ei.Pi();var e=new _u;return this.ei.mi((function(){return c(t,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.S_&&this.S_.stop(),[4,this.Bc.th()];case 1:return r.sent(),[4,this.Uc.th()];case 2:return r.sent(),[4,this.persistence.th()];case 3:return r.sent(),this.credentials.Uh(),e.resolve(),[3,5];case 4:return t=r.sent(),n=Wu(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},id.prototype.waitForPendingWrites=function(){var t=this;this.Df();var e=new _u;return this.ei.ai((function(){return t.fu._l(e)})),e.promise},id.prototype.listen=function(t,e,n){var r=this;this.Df();var i=new Df(n),o=new ql(t,i,e);return this.ei.ai((function(){return r.Nf.listen(o)})),function(){i.Q_(),r.ei.ai((function(){return r.Nf.lu(o)}))}},id.prototype.kf=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,n){return c(this,void 0,void 0,(function(){var r,i=this;return h(this,(function(o){switch(o.label){case 0:return r=new _u,[4,t.enqueue((function(){return c(i,void 0,void 0,(function(){var t,i,o;return h(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(a=n,(u=e).persistence.runTransaction("read document","readonly",(function(t){return u.Rh.Hn(t,a)})))];case 1:return(t=s.sent())instanceof ua?r.resolve(t):t instanceof ca?r.resolve(null):r.reject(new ti(Jr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=Wu(i,"Failed to get document '"+n+" from cache"),r.reject(o),[3,3];case 3:return[2]}var a,u}))}))}))];case 1:return[2,(o.sent(),r.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},id.prototype.$f=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),r=this.ei,i=this.Nf,o=t,s=e,a=new _u,u=ad(r,i,ma(o.path),{includeMetadataChanges:!0,$l:!0},{next:function(t){u();var e=t.docs.has(o);!e&&t.fromCache?a.reject(new ti(Jr.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&s&&"server"===s.source?a.reject(new ti(Jr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(t)},error:function(t){return a.reject(t)}}),a.promise)]}var r,i,o,s,a,u}))}))},id.prototype.xf=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,n){return c(this,void 0,void 0,(function(){var r,i=this;return h(this,(function(o){switch(o.label){case 0:return r=new _u,[4,t.enqueue((function(){return c(i,void 0,void 0,(function(){var t,i,o,s,a,u;return h(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,Oh(e,n,!0)];case 1:return t=c.sent(),i=new _l(n,t.gh),o=i.Sc(t.documents),s=i.Un(o,!1),r.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=Wu(a,"Failed to execute query '"+n+" against cache"),r.reject(u),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(o.sent(),r.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},id.prototype.Of=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),r=this.ei,i=this.Nf,o=t,s=e,a=new _u,u=ad(r,i,o,{includeMetadataChanges:!0,$l:!0},{next:function(t){u(),t.fromCache&&s&&"server"===s.source?a.reject(new ti(Jr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(t)},error:function(t){return a.reject(t)}}),a.promise)]}var r,i,o,s,a,u}))}))},id.prototype.write=function(t){var e=this;this.Df();var n=new _u;return this.ei.ai((function(){return e.fu.write(t,n)})),n.promise},id.prototype.s=function(){return this.w_.s},id.prototype.bl=function(t){var e=this;this.Df();var n=new Df(t);return this.ei.ai((function(){return c(e,void 0,void 0,(function(){return h(this,(function(t){return[2,this.Nf.bl(n)]}))}))})),function(){n.Q_(),e.ei.ai((function(){return c(e,void 0,void 0,(function(){return h(this,(function(t){return[2,this.Nf.vl(n)]}))}))}))}},Object.defineProperty(id.prototype,"Mf",{get:function(){return this.ei.Ii},enumerable:!1,configurable:!0}),id.prototype.transaction=function(t){var e=this;this.Df();var n=new _u;return this.ei.ai((function(){return new nd(e.ei,e.qa,t,n).run(),Promise.resolve()})),n.promise},id);function id(t,e){this.credentials=t,this.ei=e,this.clientId=Ur.t(),this.Sf=new _u}function od(t,e,n,r){this.ei=t,this.qa=e,this.updateFunction=n,this.ii=r,this.Vf=5,this.Ti=new Au(this.ei,"transaction_retry")}function sd(t){this.qa=t,this.Tf=new Map,this.mutations=[],this.Ef=!1,this.If=null,this.mf=new Set}function ad(t,e,n,r,i){var o=new Df(i),s=new ql(n,o,r);return t.ai((function(){return e.listen(s)})),function(){o.Q_(),t.ai((function(){return e.lu(s)}))}}var ud,cd,hd=(Sd.prototype.Bf=function(t){switch(bo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xo(t.integerValue||t.doubleValue);case 3:return this.Uf(t.timestampValue);case 4:return this.Qf(t);case 5:return t.stringValue;case 6:return new np(No(t.bytesValue));case 7:return this.Wf(t.referenceValue);case 8:return this.jf(t.geoPointValue);case 9:return this.Kf(t.arrayValue);case 10:return this.Gf(t.mapValue);default:throw Vr()}},Sd.prototype.Gf=function(t){var e=this,n={};return Wr(t.fields||{},(function(t,r){n[t]=e.Bf(r)})),n},Sd.prototype.jf=function(t){return new Tp(xo(t.latitude),xo(t.longitude))},Sd.prototype.Kf=function(t){var e=this;return(t.values||[]).map((function(t){return e.Bf(t)}))},Sd.prototype.Qf=function(t){switch(this.Lf){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return yo(n)?t(n):n}(t);return null==e?null:this.Bf(e);case"estimate":return this.Uf(go(t));default:return null}},Sd.prototype.Uf=function(t){var e=Ao(t),n=new ei(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},Sd.prototype.Wf=function(t){var e=ii.k(t);Mr(ss(e));var n=new Gr(e.get(1),e.get(3)),r=new ai(e.V(5));return n.isEqual(this.s)||Rr("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.qf(r)},Sd),ld=Qu.ji,fd=(Nd.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},Nd),pd=(Object.defineProperty(xd.prototype,"rd",{get:function(){return this.od||(this.od=new Fp(this.sf,this.sd.ignoreUndefinedProperties)),this.od},enumerable:!1,configurable:!0}),xd.prototype.settings=function(t){Pf("Firestore.settings",arguments,1),Mf("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.sd),t)).merge;var e=new fd(t);if(this.Zf&&!this.sd.isEqual(e))throw new ti(Jr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.sd=e).credentials&&(this.nd=function(t){if(!t)return new Bh;switch(t.type){case"gapi":var e=t.hd;return Mr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Hh(e,t.zh||"0");case"provider":return t.hd;default:throw new ti(Jr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},xd.prototype.enableNetwork=function(){return this.Xf(),this.Zf.enableNetwork()},xd.prototype.disableNetwork=function(){return this.Xf(),this.Zf.disableNetwork()},xd.prototype.enablePersistence=function(t){var e,n;if(this.Zf)throw new ti(Jr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Rr("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new ti(Jr.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.ad(this.zf,this.Hf,{F_:!0,cacheSizeBytes:this.sd.cacheSizeBytes,synchronizeTabs:r,Vo:i})},xd.prototype.clearPersistence=function(){return c(this,void 0,void 0,(function(){var t,e=this;return h(this,(function(n){if(void 0!==this.Zf&&!this.Zf.Mf)throw new ti(Jr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new _u,[2,(this.Jf.mi((function(){return c(e,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.zf.clearPersistence(this.sf,this.ed)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},xd.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(xd.prototype,"ud",{get:function(){return this.Xf(),this.Zf.Mf},enumerable:!1,configurable:!0}),xd.prototype.waitForPendingWrites=function(){return this.Xf(),this.Zf.waitForPendingWrites()},xd.prototype.onSnapshotsInSync=function(t){if(this.Xf(),Of(t))return this.Zf.bl(t);Mf("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Zf.bl(e)},xd.prototype.Xf=function(){return this.Zf||this.ad(new _f,new Af,{F_:!1}),this.Zf},xd.prototype.ld=function(){return new Br(this.sf,this.ed,this.sd.host,this.sd.ssl,this.sd.experimentalForceLongPolling)},xd.prototype.ad=function(t,e,n){var r=this.ld();return this.Zf=new rd(this.nd,this.Jf),this.Zf.start(r,t,e,n)},xd.td=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new ti(Jr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new ti(Jr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Gr(n)},Object.defineProperty(xd.prototype,"app",{get:function(){if(!this.Yf)throw new ti(Jr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yf},enumerable:!1,configurable:!0}),xd.prototype.collection=function(t){return Pf("Firestore.collection",arguments,1),Mf("Firestore.collection","non-empty string",1,t),this.Xf(),new Vd(ii.k(t),this,null)},xd.prototype.doc=function(t){return Pf("Firestore.doc",arguments,1),Mf("Firestore.doc","non-empty string",1,t),this.Xf(),yd._d(ii.k(t),this,null)},xd.prototype.collectionGroup=function(t){if(Pf("Firestore.collectionGroup",arguments,1),Mf("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new ti(Jr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Xf(),new Pd((e=t,new va(ii.$(),e)),this,null);var e},xd.prototype.runTransaction=function(t){var e=this;return Pf("Firestore.runTransaction",arguments,1),Mf("Firestore.runTransaction","function",1,t),this.Xf().transaction((function(n){return t(new dd(e,n))}))},xd.prototype.batch=function(){return this.Xf(),new vd(this)},Object.defineProperty(xd,"logLevel",{get:function(){switch(Dr()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";case i.WARN:return"warn";case i.INFO:return"info";case i.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),xd.setLogLevel=function(t){Pf("Firestore.setLogLevel",arguments,1),qf("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),Or.setLogLevel(t)},xd.prototype.fd=function(){return this.sd.timestampsInSnapshots},xd.prototype.dd=function(){return this.sd},xd),dd=(Ad.prototype.get=function(t){var e=this;Pf("Transaction.get",arguments,1);var n=Bd("Transaction.get",t,this.wd);return this.Td.Af([n.if]).then((function(t){if(!t||1!==t.length)return Vr();var r=t[0];if(r instanceof ca)return new md(e.wd,n.if,null,!1,!1,n.rf);if(r instanceof ua)return new md(e.wd,n.if,r,!1,!1,n.rf);throw Vr()}))},Ad.prototype.set=function(t,e,n){Vf("Transaction.set",arguments,2,3);var r=Bd("Transaction.set",t,this.wd);n=Fd("Transaction.set",n);var i=Gd(r.rf,e,n),o=Bp(this.wd.rd,"Transaction.set",r.if,i,null!==r.rf,n);return this.Td.set(r.if,o),this},Ad.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof ip?(Cf("Transaction.update",arguments,3),r=Bd("Transaction.update",t,this.wd),$p(this.wd.rd,"Transaction.update",r.if,e,n,o)):(Pf("Transaction.update",arguments,2),r=Bd("Transaction.update",t,this.wd),Gp(this.wd.rd,"Transaction.update",r.if,e)),this.Td.update(r.if,i),this},Ad.prototype.delete=function(t){Pf("Transaction.delete",arguments,1);var e=Bd("Transaction.delete",t,this.wd);return this.Td.delete(e.if),this},Ad),vd=(Td.prototype.set=function(t,e,n){Vf("WriteBatch.set",arguments,2,3),this.md();var r=Bd("WriteBatch.set",t,this.wd);n=Fd("WriteBatch.set",n);var i=Gd(r.rf,e,n),o=Bp(this.wd.rd,"WriteBatch.set",r.if,i,null!==r.rf,n);return this.Ed=this.Ed.concat(o.hf(r.if,ks.We())),this},Td.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.md(),i="string"==typeof e||e instanceof ip?(Cf("WriteBatch.update",arguments,3),r=Bd("WriteBatch.update",t,this.wd),$p(this.wd.rd,"WriteBatch.update",r.if,e,n,o)):(Pf("WriteBatch.update",arguments,2),r=Bd("WriteBatch.update",t,this.wd),Gp(this.wd.rd,"WriteBatch.update",r.if,e)),this.Ed=this.Ed.concat(i.hf(r.if,ks.exists(!0))),this},Td.prototype.delete=function(t){Pf("WriteBatch.delete",arguments,1),this.md();var e=Bd("WriteBatch.delete",t,this.wd);return this.Ed=this.Ed.concat(new Xs(e.if,ks.We())),this},Td.prototype.commit=function(){return this.md(),this.Id=!0,0<this.Ed.length?this.wd.Xf().write(this.Ed):Promise.resolve()},Td.prototype.md=function(){if(this.Id)throw new ti(Jr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Td),yd=(u(_d,cd=xp),_d._d=function(t,e,n){if(t.length%2!=0)throw new ti(Jr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.F()+" has "+t.length);return new _d(new ai(t),e,n)},Object.defineProperty(_d.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"parent",{get:function(){return new Vd(this.if.path.p(),this.firestore,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"path",{get:function(){return this.if.path.F()},enumerable:!1,configurable:!0}),_d.prototype.collection=function(t){if(Pf("DocumentReference.collection",arguments,1),Mf("DocumentReference.collection","non-empty string",1,t),!t)throw new ti(Jr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=ii.k(t);return new Vd(this.if.path.child(e),this.firestore,null)},_d.prototype.isEqual=function(t){if(!(t instanceof _d))throw Kf("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.if.isEqual(t.if)&&this.rf===t.rf},_d.prototype.set=function(t,e){Vf("DocumentReference.set",arguments,1,2),e=Fd("DocumentReference.set",e);var n=Gd(this.rf,t,e),r=Bp(this.firestore.rd,"DocumentReference.set",this.if,n,null!==this.rf,e);return this.Zf.write(r.hf(this.if,ks.We()))},_d.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof ip?(Cf("DocumentReference.update",arguments,2),$p(this.firestore.rd,"DocumentReference.update",this.if,t,e,r)):(Pf("DocumentReference.update",arguments,1),Gp(this.firestore.rd,"DocumentReference.update",this.if,t)),this.Zf.write(n.hf(this.if,ks.exists(!0)))},_d.prototype.delete=function(){return Pf("DocumentReference.delete",arguments,0),this.Zf.write([new Xs(this.if,ks.We())])},_d.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Vf("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Of(i[a])||(Wf("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),Ff("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u,c={includeMetadataChanges:s.includeMetadataChanges};Of(i[a])?(u=i[a],i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)):(Mf("DocumentReference.onSnapshot","function",a,i[a]),Uf("DocumentReference.onSnapshot","function",a+1,i[a+1]),Uf("DocumentReference.onSnapshot","function",a+2,i[a+2]));var h={next:function(t){i[a]&&i[a](r.Ad(t))},error:i[a+1],complete:i[a+2]};return this.Zf.listen(ma(this.if.path),c,h)},_d.prototype.get=function(t){var e=this;Vf("DocumentReference.get",arguments,0,1),qd("DocumentReference.get",t);var n=this.firestore.Xf();return t&&"cache"===t.source?n.kf(this.if).then((function(t){return new md(e.firestore,e.if,t,!0,t instanceof ua&&t.Ge,e.rf)})):n.$f(this.if,t).then((function(t){return e.Ad(t)}))},_d.prototype.withConverter=function(t){return new _d(this.if,this.firestore,t)},_d.prototype.Ad=function(t){var e=t.docs.get(this.if);return new md(this.firestore,this.if,e,t.fromCache,t.hasPendingWrites,this.rf)},_d),gd=(Id.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Id),md=(Ed.prototype.data=function(t){var e=this;if(Vf("DocumentSnapshot.data",arguments,0,1),t=zd("DocumentSnapshot.data",t),this.Rd){if(this.rf){var n=new bd(this.wd,this.if,this.Rd,this.Pd,this.gd,null);return this.rf.fromFirestore(n,t)}return new hd(this.wd.sf,this.wd.fd(),t.serverTimestamps||"none",(function(t){return new yd(t,e.wd,null)})).Bf(this.Rd.tn())}},Ed.prototype.get=function(t,e){var n=this;if(Vf("DocumentSnapshot.get",arguments,1,2),e=zd("DocumentSnapshot.get",e),this.Rd){var r=this.Rd.data().field(Qp("DocumentSnapshot.get",t,this.if));if(null!==r)return new hd(this.wd.sf,this.wd.fd(),e.serverTimestamps||"none",(function(t){return new yd(t,n.wd,n.rf)})).Bf(r)}},Object.defineProperty(Ed.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(Ed.prototype,"ref",{get:function(){return new yd(this.if,this.wd,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(Ed.prototype,"exists",{get:function(){return null!==this.Rd},enumerable:!1,configurable:!0}),Object.defineProperty(Ed.prototype,"metadata",{get:function(){return new gd(this.gd,this.Pd)},enumerable:!1,configurable:!0}),Ed.prototype.isEqual=function(t){if(!(t instanceof Ed))throw Kf("isEqual","DocumentSnapshot",1,t);return this.wd===t.wd&&this.Pd===t.Pd&&this.if.isEqual(t.if)&&(null===this.Rd?null===t.Rd:this.Rd.isEqual(t.Rd))&&this.rf===t.rf},Ed),bd=(u(wd,ud=md),wd.prototype.data=function(t){return ud.prototype.data.call(this,t)},wd);function wd(){return null!==ud&&ud.apply(this,arguments)||this}function Ed(t,e,n,r,i,o){this.wd=t,this.if=e,this.Rd=n,this.Pd=r,this.gd=i,this.rf=o}function Id(t,e){this.hasPendingWrites=t,this.fromCache=e}function _d(t,e,n){var r=this;return(r=cd.call(this,e.sf,t,n)||this).if=t,r.firestore=e,r.rf=n,r.Zf=r.firestore.Xf(),r}function Td(t){this.wd=t,this.Ed=[],this.Id=!1}function Ad(t,e){this.wd=t,this.Td=e}function xd(t,e,n,r){var i=this;if(void 0===n&&(n=new _f),void 0===r&&(r=new Af),this.zf=n,this.Hf=r,this.Yf=null,this.Jf=new Gu,this.INTERNAL={delete:function(){return c(i,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.Xf(),[4,this.Zf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof t.options){var o=t;this.Yf=o,this.sf=xd.td(o),this.ed=o.name,this.nd=new Gh(e)}else{var s=t;if(!s.projectId)throw new ti(Jr.INVALID_ARGUMENT,"Must provide projectId");this.sf=new Gr(s.projectId,s.database),this.ed="[DEFAULT]",this.nd=new Bh}this.sd=new fd({})}function Nd(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new ti(Jr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else jf("settings","non-empty string","host",t.host),this.host=t.host,Ff("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Wf("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Ff("settings","object","credentials",t.credentials),this.credentials=t.credentials,Ff("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Ff("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Rr("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Rr("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Ff("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Qu.Gi;else{if(t.cacheSizeBytes!==ld&&t.cacheSizeBytes<Qu.Ki)throw new ti(Jr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Qu.Ki);this.cacheSizeBytes=t.cacheSizeBytes}Ff("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function Sd(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Lf=n,this.qf=r}function kd(t,e,n){if("string"==typeof n){if(""===n)throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ba(e)&&-1!==n.indexOf("/"))throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ii.k(n));if(!ai.j(r))throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return So(t,new ai(r))}if(n instanceof xp)return So(t,n.if);throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$f(n)+".")}function Od(t,e){if(!Array.isArray(t)||0===t.length)throw new ti(Jr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new ti(Jr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(0<=t.indexOf(null))throw new ti(Jr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter((function(t){return Number.isNaN(t)})).length)throw new ti(Jr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function Dd(t,e,n){if(!n.isEqual(e))throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Ld(t){if(t.un()&&0===t.en.length)throw new ti(Jr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rd,Pd=(jd.prototype.where=function(t,e,n){var r;Pf("Query.where",arguments,3),Hf("Query.where",3,n),r="not-in"===e||"!="===e?e:qf("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e);var i,o,s=Qp("Query.where",t),a=function(t,e,n,r,i,o,s){var a;if(i.M()){if("array-contains"===o||"array-contains-any"===o)throw new ti(Jr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Od(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(kd(r,t,l))}a={arrayValue:{values:u}}}else a=kd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Od(s,o),a=Hp(n,"Query.where",s,"in"===o||"not-in"===o);var f=Da.create(i,o,a);return function(t,e){if(e._n()){var n=t.ln();if(null!==n&&!n.isEqual(e.field))throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=t.cn();null!==r&&Dd(0,e.field,r)}var i=t.fn(function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==i)throw i===e.op?new ti(Jr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ti(Jr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(this.Vd,0,this.firestore.rd,this.firestore.sf,s,r,n);return new jd((o=(i=this.Vd).filters.concat([a]),new va(i.path,i.collectionGroup,i.en.slice(),o,i.limit,i.nn,i.startAt,i.endAt)),this.firestore,this.rf)},jd.prototype.orderBy=function(t,e){var n;if(Vf("Query.orderBy",arguments,1,2),Uf("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new ti(Jr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r,i,o=Qp("Query.orderBy",t),s=function(t,e,n){if(null!==t.startAt)throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r,i,o,s=new ou(e,n);return i=s,null!==(r=t).cn()||null!==(o=r.ln())&&Dd(0,o,i.field),s}(this.Vd,o,n);return new jd((i=(r=this.Vd).en.concat([s]),new va(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.nn,r.startAt,r.endAt)),this.firestore,this.rf)},jd.prototype.limit=function(t){return Pf("Query.limit",arguments,1),Mf("Query.limit","number",1,t),Yf("Query.limit",1,t),new jd(Ia(this.Vd,t,"F"),this.firestore,this.rf)},jd.prototype.limitToLast=function(t){return Pf("Query.limitToLast",arguments,1),Mf("Query.limitToLast","number",1,t),Yf("Query.limitToLast",1,t),new jd(Ia(this.Vd,t,"L"),this.firestore,this.rf)},jd.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Cf("Query.startAt",arguments,1);var r=this.yd("Query.startAt",t,e,!0);return new jd(_a(this.Vd,r),this.firestore,this.rf)},jd.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Cf("Query.startAfter",arguments,1);var r=this.yd("Query.startAfter",t,e,!1);return new jd(_a(this.Vd,r),this.firestore,this.rf)},jd.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Cf("Query.endBefore",arguments,1);var r=this.yd("Query.endBefore",t,e,!0);return new jd(Ta(this.Vd,r),this.firestore,this.rf)},jd.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Cf("Query.endAt",arguments,1);var r=this.yd("Query.endAt",t,e,!1);return new jd(Ta(this.Vd,r),this.firestore,this.rf)},jd.prototype.isEqual=function(t){if(!(t instanceof jd))throw Kf("isEqual","Query",1,t);return this.firestore===t.firestore&&Aa(this.Vd,t.Vd)&&this.rf===t.rf},jd.prototype.withConverter=function(t){return new jd(this.Vd,this.firestore,t)},jd.prototype.yd=function(t,e,n,r){if(Hf(t,1,e),e instanceof md)return Pf(t,l([e],n),1),function(e,n,r,i){if(!r)throw new ti(Jr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var o=[],s=0,a=wa(e);s<a.length;s++){var u=a[s];if(u.field.M())o.push(So(n,r.key));else{var c=r.field(u.field);if(yo(c))throw new ti(Jr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.F();throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Qa(o,i)}(this.Vd,this.firestore.sf,e.Rd,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.en;if(i.length>s.length)throw new ti(Jr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.M()){if("string"!=typeof c)throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ba(t)&&-1!==c.indexOf("/"))throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ii.k(c));if(!ai.j(h))throw new ti(Jr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new ai(h);a.push(So(e,l))}else{var f=Hp(n,r,c);a.push(f)}}return new Qa(a,o)}(this.Vd,this.firestore.sf,this.firestore.rd,t,i,r)},jd.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Vf("Query.onSnapshot",arguments,1,4);var s,a={},u=0;"object"!=typeof i[u]||Of(i[u])||(Wf("Query.onSnapshot",a=i[u],["includeMetadataChanges"]),Ff("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),u++),Of(i[u])?(s=i[u],i[u]=null===(t=s.next)||void 0===t?void 0:t.bind(s),i[u+1]=null===(e=s.error)||void 0===e?void 0:e.bind(s),i[u+2]=null===(n=s.complete)||void 0===n?void 0:n.bind(s)):(Mf("Query.onSnapshot","function",u,i[u]),Uf("Query.onSnapshot","function",u+1,i[u+1]),Uf("Query.onSnapshot","function",u+2,i[u+2]));var c={next:function(t){i[u]&&i[u](new Cd(r.firestore,r.Vd,t,r.rf))},error:i[u+1],complete:i[u+2]};return Ld(this.Vd),this.firestore.Xf().listen(this.Vd,a,c)},jd.prototype.get=function(t){var e=this;Vf("Query.get",arguments,0,1),qd("Query.get",t),Ld(this.Vd);var n=this.firestore.Xf();return(t&&"cache"===t.source?n.xf(this.Vd):n.Of(this.Vd,t)).then((function(t){return new Cd(e.firestore,e.Vd,t,e.rf)}))},jd),Cd=(Object.defineProperty(Ud.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(Ud.prototype,"empty",{get:function(){return this.bd.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(Ud.prototype,"size",{get:function(){return this.bd.docs.size},enumerable:!1,configurable:!0}),Ud.prototype.forEach=function(t,e){var n=this;Vf("QuerySnapshot.forEach",arguments,1,2),Mf("QuerySnapshot.forEach","function",1,t),this.bd.docs.forEach((function(r){t.call(e,n.Dd(r,n.metadata.fromCache,n.bd.qt.has(r.key)))}))},Object.defineProperty(Ud.prototype,"query",{get:function(){return new Pd(this.pd,this.wd,this.rf)},enumerable:!1,configurable:!0}),Ud.prototype.docChanges=function(t){t&&(Wf("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Ff("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.bd.Ut)throw new ti(Jr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.vd&&this.Sd===e||(this.vd=function(t,e,n){if(t.Lt._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Lt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vr()}}(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.bd,e,this.Dd.bind(this)),this.Sd=e),this.vd},Ud.prototype.isEqual=function(t){if(!(t instanceof Ud))throw Kf("isEqual","QuerySnapshot",1,t);return this.wd===t.wd&&Aa(this.pd,t.pd)&&this.bd.isEqual(t.bd)&&this.rf===t.rf},Ud.prototype.Dd=function(t,e,n){return new bd(this.wd,t.key,t,e,n,this.rf)},Ud),Vd=(u(Md,Rd=Pd),Object.defineProperty(Md.prototype,"id",{get:function(){return this.Vd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(Md.prototype,"parent",{get:function(){var t=this.Vd.path.p();return t._()?null:new yd(new ai(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(Md.prototype,"path",{get:function(){return this.Vd.path.F()},enumerable:!1,configurable:!0}),Md.prototype.doc=function(t){Vf("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Ur.t()),Mf("CollectionReference.doc","non-empty string",1,t);var e=ii.k(t);return yd._d(this.Vd.path.child(e),this.firestore,this.rf)},Md.prototype.add=function(t){Pf("CollectionReference.add",arguments,1),Mf("CollectionReference.add","object",1,this.rf?this.rf.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},Md.prototype.withConverter=function(t){return new Md(this.Cd,this.firestore,t)},Md);function Md(t,e,n){var r=this;if(((r=Rd.call(this,ma(t),e,n)||this).Cd=t).length%2!=1)throw new ti(Jr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.F()+" has "+t.length);return r}function Ud(t,e,n,r){this.wd=t,this.pd=e,this.bd=n,this.rf=r,this.vd=null,this.Sd=null,this.metadata=new gd(n.hasPendingWrites,n.fromCache)}function jd(t,e,n){this.Vd=t,this.firestore=e,this.rf=n}function Fd(t,e){if(void 0===e)return{merge:!1};if(Wf(t,e,["merge","mergeFields"]),Ff(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+$f(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new ti(Jr.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+$f(n[i]))}(t,"mergeFields",n,(function(t){return"string"==typeof t||t instanceof ip})),void 0!==e.mergeFields&&void 0!==e.merge)throw new ti(Jr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function zd(t,e){return void 0===e?{}:(Wf(t,e,["serverTimestamps"]),zf(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function qd(t,e){Uf(t,"object",1,e),e&&(Wf(t,e,["source"]),zf(t,0,"source",e.source,["default","server","cache"]))}function Bd(t,e,n){if(e instanceof xp){if(e.firestore!==n)throw new ti(Jr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Kf(t,"DocumentReference",1,e)}function Gd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var $d,Hd={Firestore:pd,GeoPoint:Tp,Timestamp:ei,Blob:np,Transaction:dd,WriteBatch:vd,DocumentReference:yd,DocumentSnapshot:md,Query:Pd,QueryDocumentSnapshot:bd,QuerySnapshot:Cd,CollectionReference:Vd,FieldPath:ip,FieldValue:Ip,setLogLevel:pd.setLogLevel,CACHE_SIZE_UNLIMITED:ld};($d=s.default).INTERNAL.registerComponent(new Sr("firestore",(function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=new Af,i=new Tf(r),new pd(e,n,i,r);var e,n,r,i}),"PUBLIC").setServiceProps(Object.assign({},Hd))),$d.registerVersion("@firebase/firestore","1.16.6")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.")}}(n(2))}).call(this,n(4),n(8))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||h||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function r(){}n.r(e);const i=t=>t;function o(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function a(){return Object.create(null)}function u(t){t.forEach(s)}function c(t){return"function"==typeof t}function h(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t){return 0===Object.keys(t).length}function f(t,e,n,r){return t[1]&&r?o(n.ctx.slice(),t[1](r(e))):n.ctx}function p(t,e,n,r,i,o,s){const a=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(a){const i=f(e,n,r,s);t.p(i,a)}}const d="undefined"!=typeof window;let v=d?()=>window.performance.now():()=>Date.now(),y=d?t=>requestAnimationFrame(t):r;const g=new Set;function m(t){g.forEach(e=>{e.c(t)||(g.delete(e),e.f())}),0!==g.size&&y(m)}function b(t){let e;return 0===g.size&&y(m),{promise:new Promise(n=>{g.add(e={c:t,f:n})}),abort(){g.delete(e)}}}function w(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode.removeChild(t)}function _(t){return document.createElement(t)}function T(t){return document.createTextNode(t)}function A(){return T(" ")}function x(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e){t.value=null==e?"":e}function O(t,e,n){t.classList[n?"add":"remove"](e)}function D(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const L=new Set;let R,P=0;function C(t,e,n,r,i,o,s,a=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,l=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${a}`,f=t.ownerDocument;L.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(_("style")).sheet),d=f.__svelte_rules||(f.__svelte_rules={});d[l]||(d[l]=!0,p.insertRule(`@keyframes ${l} ${h}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${l} ${r}ms linear ${i}ms 1 both`,P+=1,l}function V(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),P-=i,P||y(()=>{P||(L.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),L.clear())}))}function M(t){R=t}function U(){if(!R)throw new Error("Function called outside component initialization");return R}const j=[],F=[],z=[],q=[],B=Promise.resolve();let G=!1;function $(){G||(G=!0,B.then(Y))}function H(t){z.push(t)}let W=!1;const K=new Set;function Y(){if(!W){W=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];M(e),X(e.$$)}for(j.length=0;F.length;)F.pop()();for(let t=0;t<z.length;t+=1){const e=z[t];K.has(e)||(K.add(e),e())}z.length=0}while(j.length);for(;q.length;)q.pop()();G=!1,W=!1,K.clear()}}function X(t){if(null!==t.fragment){t.update(),u(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}let Q;function Z(){return Q||(Q=Promise.resolve(),Q.then(()=>{Q=null})),Q}function J(t,e,n){t.dispatchEvent(D(`${e?"intro":"outro"}${n}`))}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function rt(){et.r||u(et.c),et=et.p}function it(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function ot(t,e,n,r){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push(()=>{tt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const st={duration:0};function at(t,e,n,o){let s=e(t,n),a=o?0:1,h=null,l=null,f=null;function p(){f&&V(t,f)}function d(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(e){const{delay:n=0,duration:o=300,easing:c=i,tick:y=r,css:g}=s||st,m={start:v()+n,b:e};e||(m.group=et,et.r+=1),h?l=m:(g&&(p(),f=C(t,a,e,o,n,c,g)),e&&y(0,1),h=d(m,o),H(()=>J(t,e,"start")),b(e=>{if(l&&e>l.start&&(h=d(l,o),l=null,J(t,h.b,"start"),g&&(p(),f=C(t,a,h.b,h.duration,0,c,s.css))),h)if(e>=h.end)y(a=h.b,1-a),J(t,h.b,"end"),l||(h.b?p():--h.group.r||u(h.group.c)),h=null;else if(e>=h.start){const t=e-h.start;a=h.a+h.d*c(t/h.duration),y(a,1-a)}return!(!h&&!l)}))}return{run(t){c(s)?Z().then(()=>{s=s(),y(t)}):y(t)},end(){p(),h=l=null}}}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ut(t,e){t.d(1),e.delete(t.key)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let ct;function ht(t){t&&t.c()}function lt(t,e,n){const{fragment:r,on_mount:i,on_destroy:o,after_update:a}=t.$$;r&&r.m(e,n),H(()=>{const e=i.map(s).filter(c);o?o.push(...e):u(e),t.$$.on_mount=[]}),a.forEach(H)}function ft(t,e){const n=t.$$;null!==n.fragment&&(u(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(t,e,n,i,o,s,c=[-1]){const h=R;M(t);const l=e.props||{},f=t.$$={fragment:null,ctx:null,props:s,update:r,not_equal:o,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:a(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=n?n(t,l,(e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&o(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&function(t,e){-1===t.$$.dirty[0]&&(j.push(t),$(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],f.update(),p=!0,u(f.before_update),f.fragment=!!i&&i(f.ctx),e.target){if(e.hydrate){const t=(d=e.target,Array.from(d.childNodes));f.fragment&&f.fragment.l(t),t.forEach(I)}else f.fragment&&f.fragment.c();e.intro&&it(t.$$.fragment),lt(t,e.target,e.anchor),Y()}var d;M(h)}"function"==typeof HTMLElement&&(ct=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){ft(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!l(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class dt{$destroy(){ft(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!l(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function vt(t){let e,n,r;const i=t[1].default,o=function(t,e,n,r){if(t){const i=f(t,e,n,r);return t[0](i)}}(i,t,t[0],null);return{c(){e=_("div"),n=_("div"),o&&o.c(),N(n,"class","modal-overlay svelte-3firan"),N(e,"class","modal svelte-3firan")},m(t,i){E(t,e,i),w(e,n),o&&o.m(n,null),r=!0},p(t,[e]){o&&o.p&&1&e&&p(o,i,t,t[0],e,null,null)},i(t){r||(it(o,t),r=!0)},o(t){ot(o,t),r=!1},d(t){t&&I(e),o&&o.d(t)}}}function yt(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=t=>{"$$scope"in t&&n(0,i=t.$$scope)},[i,r]}var gt=class extends dt{constructor(t){var e;super(),document.getElementById("svelte-3firan-style")||((e=_("style")).id="svelte-3firan-style",e.textContent=".modal.svelte-3firan{position:relative}.modal-overlay.svelte-3firan{background-color:rgba(0, 0, 0, 0.7);position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;z-index:8;cursor:pointer}",w(document.head,e)),pt(this,t,yt,vt,h,{})}};function mt(t){let e,n,i,o,s,a,u,c,h;return{c(){e=_("div"),n=_("div"),i=_("h2"),i.textContent="Compartir",o=A(),s=_("i"),a=A(),u=_("div"),u.innerHTML='<div class="share-facebook svelte-1s10b4d"><a href="https://www.facebook.com/sharer/sharer.php?&amp;u=https://rickinstagram.jeanpierregiovanni.vercel.app" target="_blank" class="svelte-1s10b4d"><i class="fab fa-facebook-square svelte-1s10b4d"></i>\n        Compartir en Facebook!</a></div> \n    <div class="share-whatsapp svelte-1s10b4d"><a href="https://api.whatsapp.com/send?&amp;text=mira%20este%20hermoso%20rick%20https://rickinstagram.jeanpierregiovanni.vercel.app/" target="_blank" class="svelte-1s10b4d"><i class="fab fa-whatsapp-square svelte-1s10b4d"></i>\n        Compartir en Whatsapp!</a></div>',N(i,"class","svelte-1s10b4d"),N(s,"class","fas fa-times-circle svelte-1s10b4d"),N(n,"class","share-head svelte-1s10b4d"),N(u,"class","share-content svelte-1s10b4d"),N(e,"class","share svelte-1s10b4d")},m(r,l){E(r,e,l),w(e,n),w(n,i),w(n,o),w(n,s),w(e,a),w(e,u),c||(h=x(s,"click",t[0]),c=!0)},p:r,i:r,o:r,d(t){t&&I(e),c=!1,h()}}}function bt(t){return[function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}]}var wt=class extends dt{constructor(t){var e;super(),document.getElementById("svelte-1s10b4d-style")||((e=_("style")).id="svelte-1s10b4d-style",e.textContent=".share.svelte-1s10b4d.svelte-1s10b4d{border:1px solid rgba(219, 219, 219, 1);border-radius:4px;background-color:white;margin:0 0 2em 0;width:300px;position:absolute;top:300px;left:30%;z-index:9;padding:1em}.share-head.svelte-1s10b4d.svelte-1s10b4d{display:flex;justify-content:space-between;align-items:center}.share-head.svelte-1s10b4d h2.svelte-1s10b4d{font-size:16px}.share-head.svelte-1s10b4d i.svelte-1s10b4d{cursor:pointer}.share-content.svelte-1s10b4d a.svelte-1s10b4d{display:flex;align-items:center;text-decoration:none;color:black;font-size:14px;margin:2em 0 0 0}.share-content.svelte-1s10b4d i.svelte-1s10b4d{margin:0 0.5em 0 0;font-size:20px}.share-facebook.svelte-1s10b4d i.svelte-1s10b4d{color:#3b5998}.share-whatsapp.svelte-1s10b4d i.svelte-1s10b4d{color:#1bd741}",w(document.head,e)),pt(this,t,bt,mt,h,{})}},Et=n(1),It=n.n(Et);n(7);It.a.initializeApp({apiKey:"APIKEY",authDomain:"AUTHDOMAIN",databaseURL:"DATABASE_URL",projectId:"PROJECT_ID",storageBucket:"STORAGEBUCKET",messagingSenderId:"MESSAGINSENDER_ID",appId:"APPID"});var _t=It.a.firestore();function Tt(t,e,n){const r=t.slice();return r[8]=e[n],r}function At(t,e){let n,r,i,o,s,a,u,h,l,f,p,d,v=e[8].name+"",y=e[8].comment+"";return{key:t,first:null,c(){n=_("div"),r=_("div"),i=_("h3"),o=T(v),s=A(),a=_("span"),u=T(y),h=A(),l=_("div"),f=_("i"),N(i,"class","svelte-c5ul3y"),N(a,"class","svelte-c5ul3y"),N(r,"class","comments-details svelte-c5ul3y"),N(f,"class","far fa-trash-alt svelte-c5ul3y"),N(l,"class","comments-remove"),N(n,"class","comments-users svelte-c5ul3y"),this.first=n},m(t,v){var y;E(t,n,v),w(n,r),w(r,i),w(i,o),w(r,s),w(r,a),w(a,u),w(n,h),w(n,l),w(l,f),p||(d=x(f,"click",(y=function(){c(e[4](e[8].id))&&e[4](e[8].id).apply(this,arguments)},function(t){return t.stopPropagation(),y.call(this,t)})),p=!0)},p(t,n){e=t,1&n&&v!==(v=e[8].name+"")&&S(o,v),1&n&&y!==(y=e[8].comment+"")&&S(u,y)},d(t){t&&I(n),p=!1,d()}}}function xt(t){let e,n,i,o,s,a,c,h,l,f,p,d=[],v=new Map,y=t[0];const g=t=>t[8].id;for(let e=0;e<y.length;e+=1){let n=Tt(t,y,e),r=g(n);v.set(r,d[e]=At(r,n))}return{c(){e=_("div"),n=_("div");for(let t=0;t<d.length;t+=1)d[t].c();i=A(),o=_("div"),s=_("form"),a=_("input"),c=A(),h=_("button"),l=T(t[2]),N(a,"type","text"),N(a,"class","comments-input svelte-c5ul3y"),N(a,"placeholder","Agregar Commentario..."),N(h,"type","submit"),N(h,"class","svelte-c5ul3y"),N(s,"class","svelte-c5ul3y"),N(o,"class","comments-add svelte-c5ul3y"),N(n,"class","comments-content svelte-c5ul3y"),N(e,"class","comments svelte-c5ul3y")},m(r,u){E(r,e,u),w(e,n);for(let t=0;t<d.length;t+=1)d[t].m(n,null);var v;w(n,i),w(n,o),w(o,s),w(s,a),k(a,t[1].comment),w(s,c),w(s,h),w(h,l),f||(p=[x(a,"input",t[6]),x(s,"submit",(v=t[3],function(t){return t.preventDefault(),v.call(this,t)}))],f=!0)},p(t,[e]){if(17&e){const r=t[0];d=function(t,e,n,r,i,o,s,a,u,c,h,l){let f=t.length,p=o.length,d=f;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=l(i,o,d),a=n(t);let u=s.get(a);u?r&&u.p(t,e):(u=c(a,t),u.c()),g.set(a,y[d]=u),a in v&&m.set(a,Math.abs(d-v[a]))}const b=new Set,w=new Set;function E(t){it(t,1),t.m(a,h),s.set(t.key,t),h=t.first,p--}for(;f&&p;){const e=y[p-1],n=t[f-1],r=e.key,i=n.key;e===n?(h=e.first,f--,p--):g.has(i)?!s.has(r)||b.has(r)?E(e):w.has(i)?f--:m.get(r)>m.get(i)?(w.add(r),E(e)):(b.add(i),f--):(u(n,s),f--)}for(;f--;){const e=t[f];g.has(e.key)||u(e,s)}for(;p;)E(y[p-1]);return y}(d,e,g,1,t,r,v,n,ut,At,i,Tt)}2&e&&a.value!==t[1].comment&&k(a,t[1].comment),4&e&&S(l,t[2])},i:r,o:r,d(t){t&&I(e);for(let t=0;t<d.length;t+=1)d[t].d();f=!1,u(p)}}}function Nt(t,e,n){let{character:r=[]}=e,i=[],o={name:r.name,comment:""};_t.collection("comentarios").onSnapshot(t=>{let e=[];t.forEach(t=>{e.push({...t.data(),id:t.id})}),n(0,i=[...e])});let s;return t.$$set=t=>{"character"in t&&n(5,r=t.character)},n(2,s="Post"),[i,o,s,()=>{(async()=>{try{await _t.collection("comentarios").doc().set({...o,fecha:Date.now()}),console.log("Agregando un nuevo comentario")}catch(t){console.log(t)}})(),n(1,o={name:"",comment:""})},async t=>{await _t.collection("comentarios").doc(t).delete(),console.log("Eliminado comentario...")},r,function(){o.comment=this.value,n(1,o)}]}var St=class extends dt{constructor(t){var e;super(),document.getElementById("svelte-c5ul3y-style")||((e=_("style")).id="svelte-c5ul3y-style",e.textContent=".comments.svelte-c5ul3y h3.svelte-c5ul3y{font-size:14px;color:black;font-weight:bold;margin:0;padding:0}.comments.svelte-c5ul3y span.svelte-c5ul3y{font-size:14px;margin:0 0 0 0.5em;font-weight:normal;color:rgba(black, 0.9)}.comments-add.svelte-c5ul3y.svelte-c5ul3y{padding:1em 1em 1em 1em;border-top:1px solid rgba(219, 219, 219, 0.8)}.comments-add.svelte-c5ul3y form.svelte-c5ul3y{display:flex;justify-content:space-between;align-items:center}.comments-content.svelte-c5ul3y.svelte-c5ul3y{padding:0 1em 0.5em 1em}.comments-users.svelte-c5ul3y.svelte-c5ul3y{margin:0 0 0.5em 0;display:flex;justify-content:space-between}.comments-details.svelte-c5ul3y.svelte-c5ul3y{display:grid;grid-template-columns:repeat(2, 1fr)}.comments-users.svelte-c5ul3y i.svelte-c5ul3y{margin:0 1em 0 0;cursor:pointer;font-size:17px}.comments-users.svelte-c5ul3y i.svelte-c5ul3y:last-child{margin:0}input.svelte-c5ul3y.svelte-c5ul3y{border:solid 1px #e9e9e9;border-radius:5px;color:#696969;border:1px solid transparent;font-size:12px;outline:none;width:100%;display:flex}button.svelte-c5ul3y.svelte-c5ul3y{border:none;color:#3897f0;font-size:12px;outline:none;cursor:pointer}",w(document.head,e)),pt(this,t,Nt,xt,h,{character:5})}};function kt(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ot(t,{delay:e=0,duration:n=400,easing:r=kt,amount:i=5,opacity:o=0}){const s=getComputedStyle(t),a=+s.opacity,u="none"===s.filter?"":s.filter,c=a*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`opacity: ${a-c*e}; filter: ${u} blur(${e*i}px);`}}function Dt(t,e,n){const r=t.slice();return r[7]=e[n],r}function Lt(t){let e;return{c(){e=_("p"),e.textContent="loading..."},m(t,n){E(t,e,n)},d(t){t&&I(e)}}}function Rt(t){let e,n,r,i;return n=new gt({props:{$$slots:{default:[Pt]},$$scope:{ctx:t}}}),{c(){e=_("div"),ht(n.$$.fragment)},m(t,r){E(t,e,r),lt(n,e,null),i=!0},p(t,e){const r={};1024&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){i||(it(n.$$.fragment,t),H(()=>{r||(r=at(e,Ot,{},!0)),r.run(1)}),i=!0)},o(t){ot(n.$$.fragment,t),r||(r=at(e,Ot,{},!1)),r.run(0),i=!1},d(t){t&&I(e),ft(n),t&&r&&r.end()}}}function Pt(t){let e,n;return e=new wt({}),e.$on("click",t[4]),{c(){ht(e.$$.fragment)},m(t,r){lt(e,t,r),n=!0},p:r,i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Ct(t){let e,n,r,i,o,s,a,c,h,l,f,p,d,v,y,g,m,b,k,D,L,R,P,C,V,M,U,j,F,z,q,B,G,$,H,W,K,Y,X,Q,Z,J,tt,et,st=t[7].name+"",at=t[7].location.name+"",ut=t[7].species+"",ct=t[1]&&Rt(t);return Q=new St({props:{character:t[7]}}),{c(){e=_("div"),ct&&ct.c(),n=A(),r=_("div"),i=_("div"),o=_("div"),s=_("img"),h=A(),l=_("div"),f=_("h2"),p=T(st),d=A(),v=_("span"),y=T(at),g=A(),m=_("div"),m.innerHTML='<i class="fas fa-ellipsis-h svelte-oew2z6"></i>',b=A(),k=_("div"),D=_("figure"),L=_("img"),C=A(),V=_("div"),M=_("div"),U=_("i"),j=A(),F=_("i"),z=A(),q=_("div"),B=_("i"),G=A(),$=_("div"),H=_("h3"),H.textContent="Especie",W=A(),K=_("span"),Y=T(ut),X=A(),ht(Q.$$.fragment),Z=A(),s.src!==(a=t[7].image)&&N(s,"src",a),N(s,"alt",c=t[7].name),N(s,"class","svelte-oew2z6"),N(f,"class","svelte-oew2z6"),N(v,"class","svelte-oew2z6"),N(l,"class","card-user-details svelte-oew2z6"),N(o,"class","card-user svelte-oew2z6"),N(m,"class","card-settings svelte-oew2z6"),N(i,"class","card-header svelte-oew2z6"),L.src!==(R=t[7].image)&&N(L,"src",R),N(L,"alt",P=t[7].name),N(L,"class","svelte-oew2z6"),N(D,"class","svelte-oew2z6"),N(k,"class","card-photo svelte-oew2z6"),N(U,"class","fas fa-heart svelte-oew2z6"),O(U,"active-like",t[3]),N(F,"class","fas fa-paper-plane svelte-oew2z6"),N(M,"class","card-icons-first"),N(B,"class","fas fa-bookmark svelte-oew2z6"),O(B,"active-bookmark",t[2]),N(q,"class","card-icons-second"),N(V,"class","card-icons svelte-oew2z6"),N(H,"class","svelte-oew2z6"),N(K,"class","svelte-oew2z6"),N($,"class","card-description svelte-oew2z6"),N(r,"class","card-container"),N(e,"class","card svelte-oew2z6")},m(a,u){E(a,e,u),ct&&ct.m(e,null),w(e,n),w(e,r),w(r,i),w(i,o),w(o,s),w(o,h),w(o,l),w(l,f),w(f,p),w(l,d),w(l,v),w(v,y),w(i,g),w(i,m),w(r,b),w(r,k),w(k,D),w(D,L),w(r,C),w(r,V),w(V,M),w(M,U),w(M,j),w(M,F),w(V,z),w(V,q),w(q,B),w(r,G),w(r,$),w($,H),w($,W),w($,K),w(K,Y),w(r,X),lt(Q,r,null),w(e,Z),J=!0,tt||(et=[x(D,"dblclick",t[5]),x(U,"click",t[5]),x(F,"click",t[4]),x(B,"click",t[6])],tt=!0)},p(t,r){t[1]?ct?(ct.p(t,r),2&r&&it(ct,1)):(ct=Rt(t),ct.c(),it(ct,1),ct.m(e,n)):ct&&(nt(),ot(ct,1,1,()=>{ct=null}),rt()),(!J||1&r&&s.src!==(a=t[7].image))&&N(s,"src",a),(!J||1&r&&c!==(c=t[7].name))&&N(s,"alt",c),(!J||1&r)&&st!==(st=t[7].name+"")&&S(p,st),(!J||1&r)&&at!==(at=t[7].location.name+"")&&S(y,at),(!J||1&r&&L.src!==(R=t[7].image))&&N(L,"src",R),(!J||1&r&&P!==(P=t[7].name))&&N(L,"alt",P),8&r&&O(U,"active-like",t[3]),4&r&&O(B,"active-bookmark",t[2]),(!J||1&r)&&ut!==(ut=t[7].species+"")&&S(Y,ut);const i={};1&r&&(i.character=t[7]),Q.$set(i)},i(t){J||(it(ct),it(Q.$$.fragment,t),J=!0)},o(t){ot(ct),ot(Q.$$.fragment,t),J=!1},d(t){t&&I(e),ct&&ct.d(),ft(Q),tt=!1,u(et)}}}function Vt(t){let e,n,r,i=t[0],o=[];for(let e=0;e<i.length;e+=1)o[e]=Ct(Dt(t,i,e));const s=t=>ot(o[t],1,1,()=>{o[t]=null});let a=null;return i.length||(a=Lt()),{c(){e=_("div"),n=_("div");for(let t=0;t<o.length;t+=1)o[t].c();a&&a.c(),N(n,"class","timeline-container"),N(e,"class","timeline svelte-oew2z6")},m(t,i){E(t,e,i),w(e,n);for(let t=0;t<o.length;t+=1)o[t].m(n,null);a&&a.m(n,null),r=!0},p(t,[e]){if(63&e){let r;for(i=t[0],r=0;r<i.length;r+=1){const s=Dt(t,i,r);o[r]?(o[r].p(s,e),it(o[r],1)):(o[r]=Ct(s),o[r].c(),it(o[r],1),o[r].m(n,null))}for(nt(),r=i.length;r<o.length;r+=1)s(r);rt(),i.length?a&&(a.d(1),a=null):a||(a=Lt(),a.c(),a.m(n,null))}},i(t){if(!r){for(let t=0;t<i.length;t+=1)it(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)ot(o[t]);r=!1},d(t){t&&I(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t),a&&a.d()}}}function Mt(t,e,n){let{characters:r}=e,i=!1,o=!1,s=!1;return t.$$set=t=>{"characters"in t&&n(0,r=t.characters)},[r,i,o,s,function(){n(1,i=!i)},function(){n(3,s=!s)},()=>n(2,o=!o)]}var Ut=class extends dt{constructor(t){var e;super(),document.getElementById("svelte-oew2z6-style")||((e=_("style")).id="svelte-oew2z6-style",e.textContent=".timeline.svelte-oew2z6.svelte-oew2z6{padding:4em 0 0 0}.card.svelte-oew2z6.svelte-oew2z6{border:1px solid rgba(219, 219, 219, 1);border-radius:4px;background-color:white;margin:0 0 2em 0}.card-header.svelte-oew2z6.svelte-oew2z6{display:flex;justify-content:space-between;align-items:center;padding:1em}.card-user.svelte-oew2z6.svelte-oew2z6{display:flex;align-items:center;justify-content:flex-end}.card-user.svelte-oew2z6 img.svelte-oew2z6{width:32px;height:32px;border-radius:50%;border:double 2px transparent;background-image:linear-gradient(#fff, #fff),\n      radial-gradient(circle at top left, #8D5CAF, #32303D);background-origin:border-box;background-clip:content-box, border-box}.card-user.svelte-oew2z6 h2.svelte-oew2z6{color:black}.card-user-details.svelte-oew2z6.svelte-oew2z6{padding-left:10px}.card-user-details.svelte-oew2z6 h2.svelte-oew2z6,span.svelte-oew2z6.svelte-oew2z6{font-size:12px;font-weight:normal;color:rgba(38, 38, 38, 0.7)}.card-photo.svelte-oew2z6.svelte-oew2z6{padding:0;margin:0}.card-photo.svelte-oew2z6 img.svelte-oew2z6{width:100%;height:auto}.card-photo.svelte-oew2z6 figure.svelte-oew2z6{margin:0;padding:0;cursor:pointer}.card-settings.svelte-oew2z6 i.svelte-oew2z6{cursor:pointer;color:#32303D}.card-icons.svelte-oew2z6.svelte-oew2z6{padding:1em;display:flex;justify-content:space-between;align-items:center}.card-icons.svelte-oew2z6 i.svelte-oew2z6{margin:0 1em 0 0;cursor:pointer;font-size:20px}.card-icons.svelte-oew2z6 i.svelte-oew2z6:last-child{margin:0}.card-description.svelte-oew2z6.svelte-oew2z6{padding:0 1em 1em 1em}.card-description.svelte-oew2z6 h3.svelte-oew2z6{font-size:14px;font-weight:bold;color:black}.card-description.svelte-oew2z6 span.svelte-oew2z6{font-size:14px}.active-like.svelte-oew2z6.svelte-oew2z6{color:#ED4748;animation:svelte-oew2z6-bounce linear 0.8s;animation-iteration-count:1;transform-origin:20% 20%}.active-bookmark.svelte-oew2z6.svelte-oew2z6{color:#F7B932}@keyframes svelte-oew2z6-bounce{0%{transform:translate(0px, 0px)}15%{transform:translate(0px, -25px)}30%{transform:translate(0px, 0px)}45%{transform:translate(0px, -15px)}60%{transform:translate(0px, 0px)}75%{transform:translate(0px, -5px)}100%{transform:translate(0px, 0px)}}",w(document.head,e)),pt(this,t,Mt,Vt,h,{characters:0})}};function jt(t){let e;return{c(){e=_("div"),e.innerHTML='<div class="footer-container"><div class="footer-copy"> 2020 Rickinstagram from JbearP</div></div>',N(e,"class","footer svelte-krvzvj")},m(t,n){E(t,e,n)},p:r,i:r,o:r,d(t){t&&I(e)}}}var Ft=class extends dt{constructor(t){var e;super(),document.getElementById("svelte-krvzvj-style")||((e=_("style")).id="svelte-krvzvj-style",e.textContent=".footer.svelte-krvzvj{font-size:11px;letter-spacing:1px;font-weight:normal;color:#c7c7c7}",w(document.head,e)),pt(this,t,null,jt,h,{})}};function zt(t){let e,n,i,o,s,a,u,c;return u=new Ft({}),{c(){e=_("div"),n=_("div"),i=_("div"),i.innerHTML='<div class="profile-content svelte-l6xcwr"><div class="profile-avatar svelte-l6xcwr"><img src="" alt="" class="svelte-l6xcwr"></div> \n        <div class="profile-info svelte-l6xcwr"><h2 class="svelte-l6xcwr">Prueba</h2></div></div>',o=A(),s=_("div"),s.innerHTML='<div class="stories-container"><div class="stories-head svelte-l6xcwr"><h2 class="svelte-l6xcwr">Historias</h2> \n          <span class="svelte-l6xcwr">ver todas</span></div> \n        <div class="stories-items svelte-l6xcwr"><div class="stories-item svelte-l6xcwr"><div class="stories-item-box svelte-l6xcwr"><img src="" alt="" class="svelte-l6xcwr"></div> \n            <h2 class="svelte-l6xcwr">jp\n              <span class="svelte-l6xcwr">10 horas antes</span></h2></div></div></div>',a=A(),ht(u.$$.fragment),N(i,"class","profile"),N(s,"class","stories svelte-l6xcwr"),N(n,"class","sidebar-container svelte-l6xcwr"),N(e,"class","sidebar svelte-l6xcwr")},m(t,r){E(t,e,r),w(e,n),w(n,i),w(n,o),w(n,s),w(n,a),lt(u,n,null),c=!0},p:r,i(t){c||(it(u.$$.fragment,t),c=!0)},o(t){ot(u.$$.fragment,t),c=!1},d(t){t&&I(e),ft(u)}}}var qt=class extends dt{constructor(t){var e;super(),document.getElementById("svelte-l6xcwr-style")||((e=_("style")).id="svelte-l6xcwr-style",e.textContent=".sidebar.svelte-l6xcwr.svelte-l6xcwr{position:relative;padding:4.5em 0 0 0}.sidebar-container.svelte-l6xcwr.svelte-l6xcwr{position:fixed}.profile-content.svelte-l6xcwr.svelte-l6xcwr{display:flex;align-items:center}.profile-avatar.svelte-l6xcwr img.svelte-l6xcwr{width:42px;height:42px;border-radius:50%}.profile-info.svelte-l6xcwr.svelte-l6xcwr{margin:0 0 0 0.5em}.profile-info.svelte-l6xcwr h2.svelte-l6xcwr{font-size:14px;color:black;margin:0;padding:0}.profile-info.svelte-l6xcwr h2.svelte-l6xcwr{font-size:12px;font-weight:normal}.stories.svelte-l6xcwr.svelte-l6xcwr{border:1px solid rgba(219, 219, 219, 1);border-radius:4px;margin:1em 0;padding:0.5em 1em;background-color:white}.stories-item.svelte-l6xcwr img.svelte-l6xcwr{width:32px;height:32px;border-radius:50%}.stories-item.svelte-l6xcwr.svelte-l6xcwr{display:flex;align-items:center;margin:0 0 0.5em 0}.stories-item.svelte-l6xcwr h2.svelte-l6xcwr{font-size:14px;color:black;margin:0 0 0 0.5em}.stories-item.svelte-l6xcwr h2 span.svelte-l6xcwr{display:block;font-size:9px;text-transform:uppercase;color:gray}.stories-head.svelte-l6xcwr.svelte-l6xcwr{display:flex;justify-content:space-between;align-items:center;padding:0.5em 0 0 0}.stories-head.svelte-l6xcwr h2.svelte-l6xcwr{font-size:12px;font-weight:600}.stories-head.svelte-l6xcwr span.svelte-l6xcwr{font-size:12px;font-weight:normal;color:black}.stories-items.svelte-l6xcwr.svelte-l6xcwr{margin:0.5em 0 0.5em 0}.stories-item-box.svelte-l6xcwr.svelte-l6xcwr{width:32px;height:32px;border:double 2px transparent;border-radius:100%;background-image:linear-gradient(#fff, #fff),\n      radial-gradient(circle at top left, #f09433, #bc1888);background-origin:border-box;background-clip:content-box, border-box}",w(document.head,e)),pt(this,t,null,zt,h,{})}};function Bt(t){let e,n,r,i,o,s,a,c,h,l,f,p,d,v,y,g,m,b;return d=new Ut({props:{characters:t[1]}}),y=new qt({}),{c(){e=_("div"),n=_("div"),r=_("div"),i=_("div"),i.innerHTML='<h1 class="svelte-13uhmx9">JBearP</h1>',o=A(),s=_("div"),a=_("input"),c=A(),h=_("div"),h.innerHTML='<ul class="svelte-13uhmx9"><li class="svelte-13uhmx9"><i class="fas fa-heart svelte-13uhmx9"></i></li> \n          <li class="svelte-13uhmx9"><i class="fas fa-user-alt svelte-13uhmx9"></i></li></ul>',l=A(),f=_("div"),p=_("div"),ht(d.$$.fragment),v=A(),ht(y.$$.fragment),N(i,"class","header-logo"),N(a,"class","search-c svelte-13uhmx9"),N(a,"type","text"),N(a,"name","search"),N(a,"placeholder","Buscar personajes"),N(s,"class","search"),N(h,"class","header-nav"),N(r,"class","header-content svelte-13uhmx9"),N(n,"class","header-container svelte-13uhmx9"),N(e,"class","header svelte-13uhmx9"),N(p,"class","main-container svelte-13uhmx9"),N(f,"class","main svelte-13uhmx9")},m(u,I){E(u,e,I),w(e,n),w(n,r),w(r,i),w(r,o),w(r,s),w(s,a),k(a,t[0]),w(r,c),w(r,h),E(u,l,I),E(u,f,I),w(f,p),lt(d,p,null),w(p,v),lt(y,p,null),g=!0,m||(b=[x(a,"input",t[3]),x(a,"keydown",t[2])],m=!0)},p(t,[e]){1&e&&a.value!==t[0]&&k(a,t[0]);const n={};2&e&&(n.characters=t[1]),d.$set(n)},i(t){g||(it(d.$$.fragment,t),it(y.$$.fragment,t),g=!0)},o(t){ot(d.$$.fragment,t),ot(y.$$.fragment,t),g=!1},d(t){t&&I(e),t&&I(l),t&&I(f),ft(d),ft(y),m=!1,u(b)}}}function Gt(t,e,n){let{value:r=""}=e,i=[],o=[];var s;return s=async()=>{const t=await fetch("https://rickandmortyapi.com/api/character");i=await t.json(),n(1,o=i.results)},U().$$.on_mount.push(s),t.$$set=t=>{"value"in t&&n(0,r=t.value)},[r,o,async function(){const t="https://rickandmortyapi.com/api/character/?name="+r,e=await fetch(t);i=await e.json(),n(1,o=i.results)},function(){r=this.value,n(0,r)}]}var $t=new class extends dt{constructor(t){var e;super(),document.getElementById("svelte-13uhmx9-style")||((e=_("style")).id="svelte-13uhmx9-style",e.textContent='@import url("https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Pacifico&display=swap");body{background-color:#fafafa;color:rgba(38, 38, 38, 0.7);font-family:"Lato", sans-serif;margin:0;padding:0}h1, h2, h3{margin:0;padding:0}.main.svelte-13uhmx9.svelte-13uhmx9{display:grid;grid-template-columns:minmax(auto, 936px);justify-content:center;background-color:#fafafa}.main-container.svelte-13uhmx9.svelte-13uhmx9{display:grid;grid-template-columns:3fr 1fr;grid-gap:2em;padding:2em 0}.header.svelte-13uhmx9.svelte-13uhmx9{background-color:#fbfbfd;position:fixed;width:100%}.header-container.svelte-13uhmx9.svelte-13uhmx9{grid-template-columns:minmax(auto, 936px);display:grid;justify-content:center;background-color:#fbfbfd;border-bottom:1px solid rgba(38, 38, 38, 0.4)}.header-content.svelte-13uhmx9.svelte-13uhmx9{display:flex;align-items:center;justify-content:space-between;padding:0.5em}.header.svelte-13uhmx9 ul.svelte-13uhmx9{list-style:none}.header.svelte-13uhmx9 li.svelte-13uhmx9{display:inline-block;margin:0 0 0 1em}.header.svelte-13uhmx9 i.svelte-13uhmx9{font-size:16px;color:#1a86f5;cursor:pointer}h1.svelte-13uhmx9.svelte-13uhmx9{padding:0;margin:0;font-size:28px;color:black;font-family:"Pacifico", cursive;cursor:pointer;position:relative;background:#fff;mix-blend-mode:multiply;display:inline-block}h1.svelte-13uhmx9.svelte-13uhmx9:before{content:"";display:block;width:100%;height:100%;background:radial-gradient(circle at top left, #8d5caf, #32303d);mix-blend-mode:screen;position:absolute;top:0;left:0}.search-c.svelte-13uhmx9.svelte-13uhmx9{width:80%;margin:0 auto;padding:10px;border:none;margin-bottom:10px;border-radius:50px}',w(document.head,e)),pt(this,t,Gt,Bt,h,{value:0})}}({target:document.body});e.default=$t}]);